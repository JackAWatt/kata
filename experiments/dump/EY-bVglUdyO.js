if (self.CavalryLogger) { CavalryLogger.start_js(["uVpeW"]); }

__d("XRefererFrameController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/common\/referer_frame.php",{v:{type:"Int"}});}),null);
__d('ControlledReferer',['URI','UserAgent','XRefererFrameController','isMessengerDotComURI','lowerFacebookDomain'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={useFacebookReferer:function i(j,k,l){var m=false;function n(){if(m)return;var p=j.contentWindow.location.pathname;if(p!=='/intern/common/referer_frame.php'&&p!=='/common/referer_frame.php')return;m=true;j.contentWindow.document.body.style.margin=0;k();}var o;if(c('isMessengerDotComURI')(c('URI').getRequestURI())){o=c('XRefererFrameController').getURIBuilder().getURI().toString();}else if(!c('lowerFacebookDomain').isValidDocumentDomain()){o='/intern/common/referer_frame.php';}else if(c('UserAgent').isBrowser('Opera')){o=c('XRefererFrameController').getURIBuilder().getURI().toString();}else o=c('XRefererFrameController').getURIBuilder().getURI().qualify().setProtocol('https').setSubdomain('staticxx').toString();if(l)o+='?fb_source='+l;j.onload=n;j.src=o;},useFacebookRefererHtml:function i(j,k,l){h.useFacebookReferer(j,function(){j.contentWindow.document.body.innerHTML=k;},l);}};f.exports=h;}),null);
__d('TrackingPixel',['Arbiter','ControlledReferer','NonBlockingIFrame','WebSpeedExperiments'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={_iframe:undefined,loadWithNoReferrer:function i(j){if(!h._iframe)if(c('WebSpeedExperiments').non_blocking_logger){h._iframe=true;c('NonBlockingIFrame').loadIFrame().then(function(l){h._iframe=l;c('ControlledReferer').useFacebookReferer(l,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT);},null);}).done();}else{var k=document.createElement('iframe');k.frameborder=0;k.width=k.height=1;k.style.position='absolute';k.style.top='-10px';c('ControlledReferer').useFacebookReferer(k,function(){c('Arbiter').inform('TrackingPixel/iframeIsLoaded',null,c('Arbiter').BEHAVIOR_PERSISTENT);},null);document.body.appendChild(k);h._iframe=k;}c('Arbiter').subscribe('TrackingPixel/iframeIsLoaded',function(){var l=h._iframe.contentWindow,m=new l.Image();m.src=j;});}};f.exports=h;}),null);
__d('ExternalTrackingTag',['AsyncSignal','TrackingPixel','Event'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={listenForElementClick:function i(j,k,l,m,n){c('Event').listen(j,'click',function(){h.sendRequest(k,l,m,n);});},sendRequest:function i(j,k,l,m){if(!j)return;new (c('AsyncSignal'))('/ads/external_tracking_tag/',{href:j,tracking_tag_id:k,adgroup_id:l,ad_id:m}).send();c('TrackingPixel').loadWithNoReferrer(j);}};f.exports=h;}),null);
__d('FeedAdsClickLogger',['Arbiter','AsyncRequest','Banzai','BanzaiODS','collectDataAttributes','DataAttributeUtils','DOM','ge','LitestandMessages','LitestandStream','Parent','TrackingNodes','ExternalTrackingTag','URI','isFacebookURI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='ssinfeed',i={},j=false,k=[],l;function m(){'use strict';}m.prototype.init=function(o){'use strict';l=o.use_feed_renderer;c('Arbiter').subscribe("ClickRefAction/new",this.onNewUserAction.bind(this));if(o.append_tracking_data_to_links){this.appendTrackingDataToLinks();c('Arbiter').subscribe(c('LitestandMessages').STORIES_INSERTED,this.appendTrackingDataToLinks.bind(this));c('Arbiter').subscribe('FeedAdsClickLogger/refreshTrackingData',this.appendTrackingDataToLinks.bind(this),c('Arbiter').SUBSCRIBE_NEW);}};m.prototype.getStories=function(){'use strict';var o=c('LitestandStream').getStreamRoot();if(o){return c('DOM').scry(o,c('LitestandStream').getStoriesSelector());}else{var p=c('ge')('home_stream');if(p)return c('DOM').scry(p,'.uiStreamStory');}return [];};m.prototype.appendTrackingDataToLinks=function(){'use strict';var o=this.getStories();for(var p=0;p<o.length;p++){var q=o[p];if(q in k)continue;var r=c('DataAttributeUtils').getDataFt(q);if(!r||r.indexOf('ei')===-1&&r.indexOf('mei')===-1)continue;var s=c('DOM').scry(q,'a');for(var t=0;t<s.length;t++){var u=s[t];if(u.getAttribute('ajaxify')!=null)continue;if(u.getAttribute('rel')!=null)continue;var v=u.getAttribute('href');if(!v||v.charAt(0)==='#')continue;var w=new (c('URI'))(u);if(c('isFacebookURI')(w)===false)continue;if(w.isLinkshimURI()===true)continue;if(l&&(w.getPath()==='/ads/about'||w.getPath()==='/about/ads'))continue;u.setAttribute('href',n(u).toString());u.setAttribute('onmousedown',"this.href = this.href.replace('__md__=0', '__md__=1');");}k.push(q);}};m.prototype.getHref=function(o){'use strict';return (o.getAttribute&&(o.getAttribute('ajaxify')||o.getAttribute('data-endpoint'))||o.action||o.href);};m.prototype.sendLogRequest=function(o,p){'use strict';var q=o.ei||o.ai;if(!q&&o.mei)q=o.mf_story_key;if(o!==null&&typeof q==="string"){var r=false;if(o.tn){var s=c('TrackingNodes').parseTrackingNodeString(o.tn);for(var t=0;t<s.length;t++){var u=s[t][0];switch(u){case c('TrackingNodes').types.LIKE_LINK:case c('TrackingNodes').types.UNLIKE_LINK:case c('TrackingNodes').types.COMMENT:case c('TrackingNodes').types.COMMENT_LINK:case c('TrackingNodes').types.ADD_COMMENT_BOX:case c('TrackingNodes').types.MULTI_ATTACHMENT_VIDEO:return;case c('TrackingNodes').types.XBUTTON:case c('TrackingNodes').types.HIDE_LINK:case c('TrackingNodes').types.REPORT_SPAM_LINK:case c('TrackingNodes').types.HIDE_ALL_LINK:case c('TrackingNodes').types.DROPDOWN_BUTTON:case c('TrackingNodes').types.UNHIDE_LINK:return;case c('TrackingNodes').types.RELATED_SHARE_ARTICLE:case c('TrackingNodes').types.RELATED_SHARE_VIDEO:return;case c('TrackingNodes').types.ATTACHMENT:case c('TrackingNodes').types.USER_MESSAGE:r=true;break;}}}var v=Date.now(),w=500;o.duplicate_click=!!i[q]&&v-i[q]<w;i[q]=v;if(c('Banzai').isEnabled('ssinfeed')){c('Banzai').post(h,o,{delay:0,retry:c('Banzai').isEnabled('ssinfeed_retry')});}else{var x=new (c('AsyncRequest'))('/ajax/ssinfeed/end/').setData(o).setAllowCrossPageTransition(true).setMethod('POST');x.send();}var y=o.href;if(new (c('URI'))(y).isLinkshimURI()&&new (c('URI'))(y).getQueryData())y=new (c('URI'))(y).getQueryData().u;if(r&&!o.duplicate_click&&p!==null&&p.url&&y&&c('isFacebookURI')(new (c('URI'))(y))===false){c('ExternalTrackingTag').sendRequest(p.url,p.tag_id,p.adgroup_id);c('BanzaiODS').bumpEntityKey('external_tracking_tags','request_sent');}}};m.prototype.onNewUserAction=function(o,p){'use strict';if(!p.node)return;var q=this.getHref(p.node),r=c('Parent').byTag(p.node,'input')||c('Parent').byTag(p.node,'button');if(!q&&r&&r.type=="submit"&&r.getAttribute&&c('DataAttributeUtils').getDataFt(r))q="#";var s,t;if(q&&p.event&&(p.event.type==='click'||p.event.type==='contextmenu')){s=c('collectDataAttributes')(p.node,['ft']);s.ft.href=q;s.ft.mouse_type=p.event.type;t=c('collectDataAttributes')(p.node,['external-tracking-tags']);this.sendLogRequest(s.ft,t['external-tracking-tags']);}};function n(o){var p=new (c('URI'))(o.href),q=c('collectDataAttributes')(o,['ft']).ft,r=p.getQueryData();r.ft=q;r.__md__=0;p.setQueryData(r);return p;}f.exports={init:function o(p){if(j===false){new m().init(p);j=true;}},buildURL:n};}),null);
__d('UFIOrderingModeSelector.react',['cx','invariant','ix','Image.react','InlineBlock.react','Link.react','PopoverMenu.react','React','ReactXUIMenu'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes,n=c('ReactXUIMenu').SelectableMenu,o=c('ReactXUIMenu').SelectableItem;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(){var q,r;'use strict';for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.onMenuItemClick=function(v,w){this.props.onOrderChanged(w.item.getValue());}.bind(this),r;}p.prototype.render=function(){'use strict';if(this.props.orderingModes.length===0)return null;var q=this.props.orderingModes.filter(function(s){return s.value==this.props.selectedMode;}.bind(this)).map(function(s){return s.name;}).pop();!q?i(0):void 0;var r=c('React').createElement(n,{className:"_4tju",onItemClick:this.onMenuItemClick},this.props.orderingModes.map(function(s){return (c('React').createElement(o,{key:s.value,value:s.value,label:s.name,selected:s.value===this.props.selectedMode},c('React').createElement('div',{className:"_3scm"},c('React').createElement('div',{className:"_3scn"},s.name),c('React').createElement('div',{className:"_3sco"},s.description))));}.bind(this)));return (c('React').createElement('div',{className:"_3scp"},c('React').createElement(c('InlineBlock.react'),null,c('React').createElement(c('PopoverMenu.react'),{className:"_3scs",menu:r,alignh:'right'},c('React').createElement(c('Link.react'),null,q,c('React').createElement(c('Image.react'),{className:"_3sct",src:j('/images/ui/xhp/link/more/down_caret.gif')}))))));};p.propTypes={onOrderChanged:m.func.isRequired,orderingModes:m.arrayOf(m.shape({name:m.string.isRequired,description:m.string,value:m.string.isRequired})).isRequired,selectedMode:m.string.isRequired};f.exports=p;}),null);
__d('UFIOrderingModeSelectorContainer.react',['BanzaiLogger','Random','React','SubscriptionsHandler','UFIConfig','UFIInstanceAction','UFIOrderingModeSelector.react','UFIOrderingModeStore','UFISharedDispatcher'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={selectedMode:c('UFIOrderingModeStore').getState().get(this.props.contextArgs.instanceid)},this.$UFIOrderingModeSelectorContainer1=null,this.onOrderChanged=function(q){var r=this.props.feedback;if(r.orderingmodes&&c('UFIConfig').logChangeOrderingModeUsageSampleRate>c('Random').random())c('BanzaiLogger').log('CommentsOrderingModeSelectorUsageLoggerConfig',{start_order:this.props.selectedMode,end_order:q,post_fbid:r.commentstargetfbid,post_owner_fbid:r.ownerid,available_orders:r.orderingmodes.map(function(s){return s.value;})});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.props.contextArgs,q));}.bind(this),m;}k.prototype.componentDidMount=function(){'use strict';this.$UFIOrderingModeSelectorContainer1=new (c('SubscriptionsHandler'))();this.$UFIOrderingModeSelectorContainer1.addSubscriptions(c('UFIOrderingModeStore').addListener(function(){if(!this.$UFIOrderingModeSelectorContainer1)return;this.setState({selectedMode:c('UFIOrderingModeStore').getState().get(this.props.contextArgs.instanceid)});}.bind(this)));};k.prototype.componentWillUnmount=function(){'use strict';if(this.$UFIOrderingModeSelectorContainer1){this.$UFIOrderingModeSelectorContainer1.release();this.$UFIOrderingModeSelectorContainer1=null;}};k.prototype.shouldComponentUpdate=function(l,m){'use strict';return this.state.selectedMode!==m.selectedMode;};k.prototype.render=function(){'use strict';return (c('React').createElement(c('UFIOrderingModeSelector.react'),{onOrderChanged:this.onOrderChanged,orderingModes:this.props.feedback.orderingmodes,selectedMode:this.state.selectedMode}));};k.propTypes={feedback:j.shape({defaultcommentorderingmode:j.string.isRequired,orderingmodes:j.arrayOf(j.shape({name:j.string.isRequired,description:j.string.isRequired,selected:j.bool.isRequired,value:j.string.isRequired})).isRequired,commentstargetfbid:j.string.isRequired,ownerid:j.string.isRequired}).isRequired,contextArgs:j.object.isRequired};f.exports=k;}),null);