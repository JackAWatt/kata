if (self.CavalryLogger) { CavalryLogger.start_js(["T6W3Z"]); }

__d("ComposerEntryPointRef",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FEED:"feed",FEED_INLINE:"feed_inline",SPROUTS:"sprouts",TIMELINE:"timeline",NATIVE_PERMALINK:"native_permalink",EVENT:"event",EVENT_ALL_MEDIA:"event_all_media",EVENT_PHOTOS:"event_photos",EVENT_VIDEOS:"event_videos",EVENT_WALL:"event_wall",EVENT_ABOUT:"event_about",GROUP:"group",NATIVE_GROUP:"native_group",NATIVE_PAGE:"native_page",PAGES_MANAGER:"pages_manager",FINCH_PAGE_CHECKIN:"finch_page_checkin",PLACES_NEARBY_FRIENDS:"places_nearby_friends",PLACES_SEARCH_FAILURE:"places_search_failure",FEED_STORY:"feed_story",PHOTOS_DASHBOARD:"photos_dashboard",PHOTOS_TAB_TIMELINE:"photos_tab_timeline",ADD_PHOTO_IN_TIMELINE_TAB:"add_photo_in_timeline_tab",ADD_PHOTO_IN_ALBUM:"add_photo_in_album",ADD_PHOTO_IN_PHOTOS_SECTION:"add_photo_in_photos_section",PHOTOS_ALBUM:"photos_album",PHOTOS_ALBUM_LISTING:"photos_album_listing",CREATE_COUPON_DIALOG:"create_coupon_dialog",SOCIAL_PLUGIN:"social_plugin",PLATFORM_DIALOG:"platform_dialog",SHARE_BUTTON_PLUGIN:"share_button",PAGE_PLUGIN:"page",ADS_CREATE:"ads_create",ADS_POWER_EDITOR:"ads_power_editor",TOPIC_HASHTAG_FEED:"topic_hashtag_feed",PERMALINK:"permalink",EDIT_DIALOG:"edit_dialog",EDIT_COMPOSER:"edit_composer",PAGES_FEED:"pages_feed",PAGES_PHOTO_TAB:"pages_photo_tab",PAGES_VIDEO_TAB:"pages_video_tab",PAGES_VIDEO_TAB_HUB:"pages_video_tab_hub",PAGE_TIPS:"page_tips",AGGREGATED_LINK_STORY:"aggregated_link_story",FEED_STICKY_COMPOSER:"feed_sticky_composer",FUNDRAISER_PAGE_FEED:"fundraiser_page_feed",WIFI_CHECKIN:"wifi_checkin",HOVERCARD_CONICS:"hovercard_conics",AGGREGATED_STORY:"aggregated_story",YEAR_IN_REVIEW:"year_in_review",ORIGIN_STORY:"origin_story",CELEBRATE_FRIENDS:"celebrate_friends",MEGAPHONE:"megaphone",MOMENTS:"moments",LIVE:"live",LIVE_BROADCAST:"live_broadcast",LIVE_MAP:"live_map",TOPIC_STORY_ACTION_LINK:"topic_story_action_link",OTHER:"other",TRENDING_TOPIC:"trending_topic",UC_TOOLBAR:"uc_toolbar",PAGE_CONTENT_TAB_DRAFTS:"page_content_tab_drafts",PAGE_LAUNCH_POINT:"page_launch_point",PAGE_CONTENT_TAB_PUBLISHED_POSTS:"page_content_tab_published_posts",PAGE_CONTENT_TAB_SCHEDULED_POSTS:"page_content_tab_scheduled_posts",PAGE_CONTENT_TAB_ADS_POSTS:"page_content_tab_ads_posts",PAGE_CONTNET_TAB_JOB_POSTS:"page_contet_tab_job_posts",PAGE_CONTENT_TAB_VIDEO_LIBRARY:"page_content_tab_video_library",PAGE_CONTENT_TAB_CANVAS:"page_content_tab_canvas",PAGE_CONTENT_TAB_REFERENCE_LIBRARY:"page_content_tab_reference_library",REVIEW_UNIT:"review_unit",REVIEWS_LIST:"reviews_list",CHECKIN_STORY:"checkin_story",RECOMMENDATIONS_DASHBOARD:"recommendations_dashboard",BULK_UPLOAD:"bulk_upload",REFERENCE_VIDEO_BULK_UPLOAD:"reference_video_bulk_upload",SAHELI:"saheli",GAMEFACE:"gameface",GAMETIME:"gametime",ANNIVERSARY_VIDEO:"anniversary_video",FRIENDS_DAY:"friends_day_2016",FRIENDVERSARY:"FRIENDVERSARY",PRIVACY_CHECKUP:"privacy_checkup",FEEDX:"feedx",FEED_SPROUTS:"feed_sprouts",FEEDX_SPROUTS:"feedx_sprouts",LEGACY_FEED:"legacy_feed",REACTION:"reaction",FLASHBACK:"flashback",INSIGHTS_POST_SPONSORED_TABLE:"insights_post_sponsored_table",VOTER_REGISTRATION:"voter_registration",ISSUE_MODULE:"issue_module",ENDORSEMENT_MODULE:"endorsement_module",COMPOSER_PREFILL:"composer_prefill",MTOUCH_LOCAL_SERP:"mtouch_local_serp",RED_ENVELOPE_POST:"red_envelope_post",FUNDRAISER_PAGE:"fundraiser_page",OFFERS_COMPOSER:"offers_composer",RESHARE_DIALOG:"reshare_dialog",POLITICAL_ISSUE:"political_issue",POLITICAL_ENDORSEMENT:"political_endorsement",PROFILE_PIC_CHANGE_DIALOG:"profile_pic_change_dialog",PROFILE_VIDEO:"profile_video",PRODUCT_TAG_UPSELL:"product_tag_upsell",PUBLISH_FRAME_DIALOG:"publish_frame_dialog",AYMT:"aymt",SW_BG_SYNC:"sw_bg_sync",FEED_INSPIRATIONS:"feed_inspirations",INSPIRATIONS:"inspirations",WORK_FEED:"work_feed",DEVELOPER_SITE:"developer_site",RECENT_POSTS:"timeline\/recent_posts"};}),null);
__d("PagesPrivateReplyConstants",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created",CANNOT_MESSAGE:"cannot_message",MESSAGING_DISABLED:"messaging_disabled"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};}),null);
__d("ReactComposerAttachmentType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STATUS:"STATUS",MEDIA:"MEDIA",ALBUM:"ALBUM",MLE:"MLE",LIFE_EVENT:"LIFE_EVENT",NOTES:"NOTES",QANDA:"QANDA",PAGES_EXTRA:"PAGES_EXTRA",FILE:"FILE",QUESTION:"QUESTION",SELL:"SELL",WORK_HEADER:"WORK_HEADER",RED_ENVELOPE:"RED_ENVELOPE",LIVE_BROADCAST:"LIVE_BROADCAST",PHOTO_ZOOM_CROP:"PHOTO_ZOOM_CROP",PROFILE_PIC_DESCRIPTION:"PROFILE_PIC_DESCRIPTION",PROFILE_PIC_FRAME:"PROFILE_PIC_FRAME",LIVE_VIDEO:"LIVE_VIDEO",DOC:"DOC",EVENT:"EVENT",GAME:"GAME",CTA:"CTA",QA:"QA",MESSAGE:"MESSAGE",GET_DIRECTIONS:"GET_DIRECTIONS",CALL:"CALL",PLACE_LIST:"PLACE_LIST"};}),null);
__d("ReactComposerFeatureType",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={DATE:"date",EVENT:"event",FILE:"file",LIFE_EVENT:"life_event",LINK:"link",LOCATION:"location",MARKDOWN:"markdown",MEDIA:"media",MENTION_TAG:"mention_tag",MILESTONE:"milestone",MINUTIAE:"minutiae",NOTE:"note",OFFER:"offer",PHOTO_TAG:"photo_tag",PRIVACY:"privacy",SELL:"sell",SPONSOR:"sponsor",TEXT:"text",WITH_TAG:"with_tag"};}),null);
__d("ReactComposerLoggingName",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ALBUM_SPROUT:"album_sprout",ALBUM_TAB_SELECTOR:"album_tab_selector",AUDIENCE_SELECTOR:"audience_selector",BACKDATE_TAGGER:"backdate_tagger",CANVAS_EDITOR:"canvas_editor",CHEVRON_MENU_EDIT_POST:"chevron_menu\/edit_post",CONTENT_WARNINGS_TAGGER:"content_warnings_tagger",DELETE_POST_EDIT_BUTTON:"delete_post_dialog\/edit_post_button",DOC_TAB_SELECTOR:"doc_tab_selector",ELLIPSIS_SPROUT:"ellipsis_sprout",ESCAPE_KEY:"escape_key",EVENT_TAB_SELECTOR:"event_tab_selector",FILE_TAB_SELECTOR:"file_tab_selector",FRIEND_TAG_SPROUT:"friend_tag_sprout",GAME_TAB_SELECTOR:"game_tab_selector",INLINE_COMPOSER:"inline_composer",LINK_DROPPED:"link_dropped",LINK_PASTED:"link_pasted",LINK_REMOVE_BUTTON:"link_remove_button",LIVE_VIDEO_SPROUT:"live_video_sprout",LIVE_VIDEO_TAB_SELECTOR:"live_video_tab_selector",LOCATION_TAG_SPROUT:"location_tag_sprout",LOCATION_TAGGER:"location_tagger",MARKDOWN_SPROUT:"markdown_sprout",MARKDOWN_TAGGER:"markdown_tagger",MARKETPLACE:"marketplace",MEDIA_ATTACHMENT_UPLOAD_BUTTON:"media_attachment_upload_button",MEDIA_COLLAGE_PLUS_BUTTON:"media_collage_plus_button",MEDIA_FILE_DROPPED:"media_file_dropped",MEDIA_FILE_PASTED:"media_file_pasted",MEDIA_SPROUT:"media_sprout",MEDIA_TAB_SELECTOR:"media_tab_selector",MEDIA_TAGGER:"media_tagger",MEDIA_UPLOADS_PLUS_BUTTON:"media_uploads_plus_button",MEDIA_COMPOSER_ON_INIT:"media_composer_on_init",MENTIONS_INPUT_FOCUS:"mentions_input_focus",MINUTIAE_SPROUT:"minutiae_sprout",MINUTIAE_TAGGER:"minutiae_tagger",MLE_TAB_SELECTOR:"mle_tab_selector",NOTES_SPROUT:"notes_sprout",NOTES_TAB_SELECTOR:"notes_tab_selector",PAGES_EXTRA_TAB_SELECTOR:"pages_extra_tab_selector",PEOPLE_TAGGER:"people_tagger",PEOPLE_TAGGER_SPROUT:"people_tagger_sprout",PHOTO_UPLOAD_DONE:"photo_upload_done",PRODUCT_TAGGER:"product_tagger",PROMPT:"prompt",QA_TAB_SELECTOR:"qa_tab_selector",QANDA_TAB_SELECTOR:"qanda_tab_selector",QUICKSILVER_SHARE_SCORE_BUTTON:"quicksilver_share_score_button",QUESTION_TAB_SELECTOR:"question_tab_selector",RECOMMENDATIONS_DASHBOARD:"recommendations_dashboard",RED_ENVELOPE_TAB_SELECTOR:"red_envelope_tab_selector",SELL_TAB_SELECTOR:"sell_tab_selector",SHARE_NOW_MENU_SHARE_TO_PAGE:"share_now_menu\/share_to_page",SHARE_NOW_MENU_POST_TO_GROUP:"share_now_menu\/post_to_group",SHARE_NOW_MENU_SEND_MESSAGE:"share_now_menu\/send_message",SHARE_NOW_MENU_SHARE_FRIEND_TIMELINE:"share_now_menu\/share_friend_timeline",SHARE_NOW_MENU_WRITE_POST:"share_now_menu\/write_post",SPONSOR_SPROUT:"sponsor_sprout",SPONSOR_TAGGER:"sponsor_tagger",STATUS_TAB_SELECTOR:"status_tab_selector",TAGGER_SUMMARY_LOCATION:"tagger_summary_row\/location_tagger",TAGGER_SUMMARY_MINUTIAE:"tagger_summary_row\/minutiae_tagger",TAGGER_SUMMARY_PEOPLE:"tagger_summary_row\/people_tagger",TAGGER_SUMMARY_ROW:"tagger_summary_row",TARGETING_TAGGER:"targeting_tagger",OTHERS:"others"};}),null);
__d("ReactionNuxTypeEnum",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux"};}),null);
__d("TranslationTrigger",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SEE_TRANSLATION:"see_translation",AUTO_TRANSLATION:"auto_translation",SEE_CONVERSION:"see_conversion",TRANSLATE_ALL:"translate_all",LOGGED_OUT_AUTO_TRANSLATION:"logged_out_auto_translation",NONE:"none"};}),null);
__d("UFIActionTypes",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INSTANCE:{CHANGE_ORDER_MODE:"story_change_order_mode",CHANGE_VISIBILITY:"story_change_visibility",INIT:"instance_init",RECEIVED_VOD_COMMENTS:"received_vod_comments",REMOVE:"story_remove",REQUESTED_VOD_COMMENTS:"requested_vod_comments",TOGGLE_COMMENTS:"story_toggle_comments",TRANSLATE_ALL:"translate_all"},STORY:{COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",TOGGLE_REPLIES:"story_toggle_replies",FRIEND_TYPING:"story_friend_typing",SOMEONE_TYPING:"story_someone_typing",TYPING_STOPPED:"story_typing_stopped",LIVE_PIN_COMMENT:"story_live_pin_comment",LIVE_UNPIN_COMMENT:"story_live_unpin_comment"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",TYPING_CHANGE:"add_comment_typing_change"},COMMENT:{CHANGE_REACTION:"comment_change_reaction",CHANGE_VISIBILITY:"comment_change_visibility",EDIT:"comment_edit",EMBED:"embed",HIDE_CONSTITUENT_TITLE:"comment_hide_constituent_title",MOUNTED:"comment_mounted",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",SHOW_CONSTITUENT_TITLE:"comment_show_constituent_title",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate",TRANSLATE_ARRAY:"comment_translate_array",UNMOUNTED:"comment_unmounted"}};}),null);
__d("UFILikeWebDriverIDs",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE_LINK:"fb-ufi-likelink",UNLIKE_LINK:"fb-ufi-unlikelink"};}),null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;}),null);
__d('UFICommentLogger',['UFICommentTypedLogger'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();}),null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))();function i(l,m){c('MarauderLogger').log('comment_vpv',undefined,null,'comment',m);if(!h.has(l))h.set(l,new (c('Set'))());h.get(l).add(m);}function j(l,m){if(h.has(l))return h.get(l).has(m);return false;}var k={logVPV:i,hasLoggedVPV:j};f.exports=k;}),null);
__d('UFIDispatcherBase',['invariant','ReactDispatcher_DEPRECATED','UFIActionTypes'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();function k(n,o){return Object.values(o).indexOf(n)>=0;}function l(n,o,p){!n[o]?h(0):void 0;}i=babelHelpers.inherits(m,c('ReactDispatcher_DEPRECATED'));j=i&&i.prototype;m.prototype.dispatch=function(n){'use strict';l(n,'instanceID','contextArgs.instanceid');l(n,'ftentidentifier','contextArgs.ftentidentifier');if(k(n.type,c('UFIActionTypes').COMMENT))l(n,'fbid','comment.fbid');j.dispatch.call(this,n);};function m(){'use strict';i.apply(this,arguments);}f.exports=new m();}),null);
__d('UFIComments',['invariant','ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIInstanceState','randomInt'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={},j={};function k(ba){return ba in j?j[ba]:ba;}function l(ba,ca){ba.forEach(function(da){var ea=da.ftentidentifier,fa=c('UFIConstants').UFIPayloadSourceType,ga=da.clientid,ha=false,ia=babelHelpers['extends']({},da);if(ga){delete ia.clientid;ha=c('ClientIDs').isExistingClientID(ga);if(ha&&j[ga]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(da.id).log();return;}}if(ca===fa.LIVE_SEND||ca===c('UFIConstants').UFIPayloadSourceType.STREAMING||ca===fa.USER_ACTION||ca===fa.ENDPOINT_ADD_COMMENT||ca===fa.ENDPOINT_EDIT_COMMENT)ia.isunseen=true;if(ca===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ca===c('UFIConstants').UFIPayloadSourceType.STREAMING)ia.islive=true;if(ca===fa.ENDPOINT_COMMENT_FETCH||ca===fa.ENDPOINT_ID_COMMENT_FETCH)ia.fromfetch=true;if(ha&&i[ga]){if(i[ga].ufiinstanceid)c('UFIInstanceState').updateStateField(i[ga].ufiinstanceid,'locallycomposed',da.id,true);ia.ufiinstanceid=i[ga].ufiinstanceid;j[ga]=da.id;i[da.id]=i[ga];delete i[ga];c('UFICentralUpdates').didUpdateComment(ga);}aa.setComment(da.id,new (c('ImmutableObject'))(ia));c('UFICentralUpdates').didUpdateComment(da.id);c('UFICentralUpdates').didUpdateFeedback(ea);});}function m(ba,ca){for(var da=0;da<ba.length;da++){var ea=ba[da];switch(ea.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(aa.getComment(ea.entidentifier))n(ea.clientid,ea.entidentifier,ea.hasviewerliked,ea.likecount,ea.reactiondata,ca);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:n(ea.clientid,ea.commentid,ea.viewerliked,ea.likecount,ea.reactiondata,ca);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:o(ea);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:s(ea);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:t(ea);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:u(ea);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:v(ea);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:w(ea);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:q(ea);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:p(ea);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:y(ea);break;}}}function n(ba,ca,da,ea,fa,ga){var ha=aa.getComment(ca);if(ha){var ia={},ja=ba&&c('ClientIDs').isExistingClientID(ba);if(!ja){ia.hasviewerliked=da;ia.likecount=ea;if(fa){ia.reactioncount=fa.reactioncount;ia.reactioncountmap=fa.reactioncountmap;ia.reactioncountreduced=fa.reactioncountreduced;ia.viewerreaction=fa.viewerreaction;}}if(ga===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND||ga===c('UFIConstants').UFIPayloadSourceType.STREAMING)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(ja).setCommentID(ca).log();ia.likeconfirmhash=c('randomInt')(0,1024);z(ca,ia);}}function o(ba){var ca=aa.getComment(ba.commentid);if(ca){var da={};if(ba.clientid&&c('ClientIDs').isExistingClientID(ba.clientid)&&ba.viewerreaction!==ca.viewerreaction)return;da.hasviewerliked=ba.hasviewerliked;da.likecount=ba.likecount;da.reactioncount=ba.reactioncount;da.reactioncountmap=ba.reactioncountmap;da.reactioncountreduced=ba.reactioncountreduced;da.viewerreaction=ba.viewerreaction;z(ba.commentid,da);}}function p(ba){var ca=aa.getComment(ba.commentid);if(ca&&ba.hasviewerliked===ca.hasviewerliked){var da={likecount:ba.likecount,likeconfirmhash:c('randomInt')(0,1024)};z(ba.commentid,da);}}function q(ba){var ca=ba.commentid,da=aa.getComment(ca);if(da){var ea={translationdata:ba.translationdata};z(ca,ea);}}function r(ba){var ca={reportLink:ba.reportLink,commenterIsFOF:ba.commenterIsFOF,userIsMinor:ba.userIsMinor,giveFeedbackLink:ba.giveFeedbackLink,reportGroupAdminLink:ba.reportGroupAdminLink};return ca;}function s(ba){var ca=aa.getComment(ba.commentid);x(ca,c('UFIConstants').UFIStatus.DELETED);}function t(ba){var ca=aa.getComment(ba.commentid);if(ca&&ca.status!==c('UFIConstants').UFIStatus.DELETED)x(ca,c('UFIConstants').UFIStatus.LIVE_DELETED);}function u(ba){z(ba.commentid,{attachment:null});}function v(ba){var ca=aa.getComment(ba.commentid),da=ba.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;x(ca,da);}function w(ba){z(ba.commentid,r(ba));}function x(ba,ca){z(ba.id,{priorstatus:ba.status,status:ca});}function y(ba){var ca=aa.getComment(ba.commentid);if(ca){var da={constituentTitle:ba.constituentTitle};z(ba.commentid,da);}}function z(ba,ca){var da=aa.getComment(ba)||new (c('ImmutableObject'))({});aa.setComment(ba,c('ImmutableObject').set(da,ca));c('UFICentralUpdates').didUpdateComment(da.id);c('UFICentralUpdates').didUpdateFeedback(da.ftentidentifier);}var aa={getComment:function ba(ca){if(ca===c('UFIConstants').unavailableCommentKey)return null;return i[k(ca)];},setComment:function ba(ca,da){!(da instanceof c('ImmutableObject'))?h(0):void 0;i[k(ca)]=da;},resetComments:function ba(ca){for(var da in ca)delete i[k(da)];},getCommentsForFTEntIdentifier:function ba(ca){return Object.values(i).filter(function(da){return da.ftentidentifier==ca;});}};c('UFICentralUpdates').subscribe('update-comments',function(ba,ca){if(ca.comments&&ca.comments.length)l(ca.comments,ca.payloadsource);if(ca.pinnedcomments&&ca.pinnedcomments.length)l(ca.pinnedcomments,ca.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ba,ca){if(ca.actions&&ca.actions.length)m(ca.actions,ca.payloadsource);});f.exports=aa;}),6);
__d('UFIVisibility',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={VISIBLE:'visible',HIDDEN:'hidden'};f.exports=h;}),null);
__d('UFICommentVisibilityStore',['invariant','FluxReduceStore','UFIActionTypes','UFIComments','UFIRootRegistry','UFIDispatcherBase','UFIVisibility','filterObject'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();function k(p,q){if(q)return p+'-'+q;return p;}function l(p,q){return p===q||p.startsWith(q+'-');}function m(p){var q=c('UFIRootRegistry').getInstanceIDFromFTEntIdentifier(p);return q?q:[];}function n(p){return {instanceid:p};}i=babelHelpers.inherits(o,c('FluxReduceStore'));j=i&&i.prototype;o.prototype.getInitialState=function(){return {};};o.prototype.getVisibility=function(p,q){var r=arguments.length<=2||arguments[2]===undefined?null:arguments[2],s=r?k(q.instanceid,r.fbid):k(q.instanceid);if(p.hasOwnProperty(s))return p[s];return c('UFIVisibility').HIDDEN;};o.prototype.$UFICommentVisibilityStore1=function(p){var q=n(p);return (this.getVisibility(this.getState(),q)===c('UFIVisibility').VISIBLE);};o.prototype.isFeedbackTargetVisible=function(p){var q=m(p);return q.some(function(r){return this.$UFICommentVisibilityStore1(r);}.bind(this));};o.prototype.reduce=function(p,q){var r,s;switch(q.type){case c('UFIActionTypes').COMMENT.UNMOUNTED:var t=babelHelpers['extends']({},p);delete t[k(q.instanceID,q.fbid)];return t;case c('UFIActionTypes').COMMENT.CHANGE_VISIBILITY:return babelHelpers['extends']({},p,(r={},r[k(q.instanceID,q.fbid)]=q.visibility,r));case c('UFIActionTypes').INSTANCE.CHANGE_VISIBILITY:var u=c('UFIRootRegistry').getFTEntIdentifierFromInstanceID(q.instanceID),v=c('UFIComments').getCommentsForFTEntIdentifier(u),w=v.reduce(function(z,aa){!(q.type===c('UFIActionTypes').INSTANCE.CHANGE_VISIBILITY)?h(0):void 0;z[k(q.instanceID,aa.fbid)]=q.visibility;return z;},{});return babelHelpers['extends']({},p,(s={},s[k(q.instanceID)]=q.visibility,s),w);case c('UFIActionTypes').INSTANCE.REMOVE:var x=q.instanceID,y=k(x);return c('filterObject')(p,function(z,aa){return (aa!==y&&!l(aa,x));});}return p;};function o(){i.apply(this,arguments);}f.exports=new o(c('UFIDispatcherBase'));}),null);
__d('UFIFeedbackStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('UFIActionTypes').INSTANCE;h=babelHelpers.inherits(k,c('FluxReduceStore'));i=h&&h.prototype;k.prototype.getInitialState=function(){return {};};k.prototype.reduce=function(l,m){var n;switch(m.type){case j.INIT:var o=m.payload.feedbacktargets||[],p=o[0];if(!p)return l;return babelHelpers['extends']({},l,(n={},n[m.ftentidentifier]=babelHelpers['extends']({orderingmodes:[],defaultcommentorderingmode:''},p),n));}return l;};function k(){h.apply(this,arguments);}f.exports=new k(c('UFIDispatcherBase'));}),null);
__d('UFIInteractionStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('UFIActionTypes').ADD_COMMENT,k=c('UFIActionTypes').COMMENT,l=c('UFIActionTypes').INSTANCE,m=c('UFIActionTypes').STORY;h=babelHelpers.inherits(n,c('FluxReduceStore'));i=h&&h.prototype;n.prototype.getInitialState=function(){return {};};n.prototype.reduce=function(o,p){var q;switch(p.type){case j.SUBMIT_EDIT:case j.SUBMIT_NEW:case j.TYPING_CHANGE:case k.CHANGE_REACTION:case k.EDIT:case k.REMOVE:case k.TOGGLE_LIKE:case k.TOGGLE_MARK_AS_SPAM:case k.TRANSLATE:case l.CHANGE_ORDER_MODE:case l.TOGGLE_COMMENTS:case m.PAGE_IN_COMMENTS:case m.SHOW_REPLIES:case m.TOGGLE_REPLIES:return babelHelpers['extends']({},o,(q={},q[p.instanceID]=true,q));}return o;};function n(){h.apply(this,arguments);}f.exports=new n(c('UFIDispatcherBase'));}),null);
__d('UFILivePinnedCommentStore',['FluxReduceStore','UFIActionTypes','UFIComments','UFIFeedbackTargets','UFIDispatcherBase','areEqual'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m;switch(l.type){case c('UFIActionTypes').STORY.LIVE_PIN_COMMENT:case c('UFIActionTypes').STORY.LIVE_UNPIN_COMMENT:var n=l.commentID,o=l.pinEventID;return babelHelpers['extends']({},k,(m={},m[l.ftentidentifier]={commentID:n,pinEventID:o},m));default:return k;}};j.prototype.areEqual=function(k,l){return c('areEqual')(k,l);};j.prototype.getPinnedCommentID=function(k){var l=this.getState()[k];if(!l){var m=c('UFIFeedbackTargets').getFeedbackTargetIfExists(k);if(!m)return null;return m.livepinnedcommentid||null;}return l.commentID||null;};j.prototype.getPinEventID=function(k){var l=this.getState()[k];if(!l)return null;return l.pinEventID||null;};j.prototype.getPinnedCommentAuthorID=function(k){var l=this.getPinnedCommentID(k);if(l===null)return null;return c('UFIComments').getComment(l).author||null;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIActionTypes').STORY.FRIEND_TYPING:return 'friend';case c('UFIActionTypes').STORY.SOMEONE_TYPING:return 'someone';case c('UFIActionTypes').STORY.TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n));}return k;};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend';};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFIOrderingModeStore',['FluxReduceStore','immutable','UFIActionTypes','UFIConstants','UFIDispatcherBase','UFIFeedbackStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('UFIActionTypes').INSTANCE,k=c('UFIConstants').UFICommentOrderingMode;function l(n,o){return n.filter(function(p){return p.selected;}).map(function(p){return p.value;}).pop()||o;}h=babelHelpers.inherits(m,c('FluxReduceStore'));i=h&&h.prototype;m.prototype.getInitialState=function(){return new (c('immutable').Map)();};m.prototype.areEqual=function(n,o){return c('immutable').is(n,o);};m.prototype.isLiveStreaming=function(n){return (this.getState().get(n)==k.LIVE_STREAMING);};m.prototype.reduce=function(n,o){switch(o.type){case j.INIT:if(n.get(o.instanceID))return n;c('UFIDispatcherBase').waitFor([c('UFIFeedbackStore').getDispatchToken()]);var p=c('UFIFeedbackStore').getState()[o.ftentidentifier];return n.set(o.instanceID,l(p.orderingmodes,p.defaultcommentorderingmode));case j.CHANGE_ORDER_MODE:return n.set(o.instanceID,o.mode);}return n;};function m(){h.apply(this,arguments);}f.exports=new m(c('UFIDispatcherBase'));}),null);
__d('UFIReactionsUtils',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getReactionData:function i(j,k,l,m,n){k=parseInt(k,10);var o=!!k,p=j.reactorids?j.reactorids.slice(0):[],q=p.indexOf(l),r=0;if(o){if(q<0){p.unshift(l);r=1;}}else if(q>-1){p.splice(q,1);r=-1;}var s=Math.max(j.reactioncount+r,0),t=j.reactioncountreduced;if(t&&!isNaN(t))if(m){t=m(s,n);}else t=s.toString();var u=j.reactioncountmap||{},v,w=j.viewerreaction;if(w&&u[w]){u[w]['default']=Math.max((u[w]['default']||0)-1,0);v=u[w].reduced;if(v&&!isNaN(v))u[w].reduced=u[w]['default'].toString();}if(o&&u[k]){u[k]['default']=(u[k]['default']||0)+1;v=u[k].reduced;if(v&&!isNaN(v))u[k].reduced=u[k]['default'].toString();}var x=j.userreactions;if(!x||Array.isArray(x))x={};if(o){x[l]=k;}else delete x[l];var y=j.importantreactorids||[],z=y.indexOf(l);if(o&&z===-1){y.unshift(l);}else if(!o&&z!==-1)y.splice(z,1);var aa=null;if(j.reactionsentences){var ba=!(w&&k);aa={current:j.reactionsentences[ba?'alternate':'current'],alternate:j.reactionsentences[ba?'current':'alternate']};}return {importantreactorids:y,reactioncount:s,reactioncountmap:u,reactioncountreduced:t,reactionsentences:aa,reactorids:p,userreactions:x,viewerreaction:k};},getReactionCountMapFromSummary:function i(j){var k={};if(!j)return k;for(var l=0;l<j.length;l++){var m=j[l],n=m.feedback_reaction.key;k[n]={'default':m.reactors&&m.reactors.count,reduced:m.reactors&&m.reactors.display_count};}return k;}};f.exports=h;}),null);
__d('UFICommentOrdering',['UFIConstants'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={inverted:function i(j){switch(j){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:case c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=h;}),null);
__d('UFIPagedCommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','keyMirror'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({actorID:true});function i(j){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new (c('KeyedCallbackManager'))();this.feedbackTargetID=j;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink='';this.commentPermalinks={};c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(k){this.actorID=k.actorforpost;this.basePermalink=k.permalink;}.bind(this));}i.prototype.addOrUpdateComment=function(j){if(j.islocal){this.$UFIPagedCommentList1(j.id);}else this.$UFIPagedCommentList2(j.id,j.clientid,j.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.$UFIPagedCommentList1=function(j){this.dataSource.setResource(this.count,j);this.count++;};i.prototype.$UFIPagedCommentList2=function(j,k,l){var m=k&&c('ClientIDs').isExistingClientID(k),n=this.dataSource.getAllResources(),o={};for(var p in n){var q=n[p];o[q]=p;}if(m&&k in o){o[j]=o[k];var r=o[k];this.dataSource.setResource(r,j);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(k,Date.now());}else if(!o[j]&&k)this.$UFIPagedCommentList1(j);if(l&&j in o)this.commentPermalinks[j]=this.buildCommentPermalink(j,l,o[j]);};i.prototype.addCommentIDs=function(j,k,l){var m={};for(var n=0;n<k;n++)m[j+n]=l[n]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(m);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);return this;};i.prototype.getComments=function(j,k,l,m){var n=new Array(k).fill().map(function(t,u){return u+j;}),o=this.dataSource.getUnavailableResourcesFromRequest(n);if(o.length){var p=Math.min.apply(Math,o),q=Math.max.apply(Math,o),r=p,s=q-p+1;if(r<this.lastRequestedOffset||r+s>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=r;this.lastRequestedLength=s;this.fetchComments(r,s,l);}}else this.dataSource.executeOrEnqueue(n,function(t){return m(this.commentsFromCommentIDs(t,j,k));}.bind(this));};i.prototype.getCommentsOrThrow=function(j){var k=j.getLength(),l=j.getOffset(),m={};new Array(k).fill().forEach(function(n,o){var p=o+l,q=this.dataSource.getResource(p);if(!q)throw new Error('Tried to get nonexistent comment');m[p]=q;}.bind(this));return this.commentsFromCommentIDs(m,l,k);};i.prototype.fetchComments=function(j,k,l){};i.prototype.commentsFromCommentIDs=function(j,k,l){};i.prototype.reset=function(){var j=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return j;};i.prototype.deleteComment=function(j){if(!(j in this.deletedComments)){this.deletedComments[j]=true;this.deletedCount++;}};i.prototype.updateCommentCount=function(j){this.count=j;this.deletedCount=0;return this;};i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getCommentCount=function(){return this.count;};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};i.prototype.getBasePermalink=function(){return this.basePermalink;};i.prototype.buildCommentPermalink=function(j,k,l){};i.prototype.getPermalinkForComment=function(j){return this.commentPermalinks[j];};i.isValidContextPropertyForReset=function(j){return j in h;};f.exports=i;}),null);
__d('UFIReplyCommentList',['ActorURI','getObjectValues','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={},k=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(l,c('UFIPagedCommentList'));i=h&&h.prototype;l.getCommentList=function(n,o,p){if(!j[o])j[o]={};if(!j[o][p]){var q=new l(n,o,p),r=l.getReplyListsForParentCommentID(o);if(r.length)q.updateCommentCount(r[0].getCommentCount());j[o][p]=q;}return j[o][p];};l.getReplyListsForParentCommentID=function(n){return c('getObjectValues')(j[n]||{});};l.resetWithContext=function(n,o,p,q){var r=j[o][q];if(!r)return;r.reset();for(var s in p)if(this.isValidContextPropertyForReset(s))r[s]=p[s];};function l(n,o,p){i.constructor.call(this,n);this.parentCommentID=o;this.containerOrderingMode=p;}l.prototype.fetchComments=function(n,o,p){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:o,is_reply:true});var q={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[n],lengths:[o],feed_context:p?p.feedContext:null,numpagerclicks:p?p.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:p?p.translateAll:null};if(!p||!p.viewAs)q[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',q);};l.prototype.commentsFromCommentIDs=function(n,o,p){var q={};for(var r=0;r<p;r++){var s=c('UFIComments').getComment(n[o+r]);if(s)q[o+r]=s;}return q;};l.prototype.reset=function(){var n=i.reset.call(this),o={};for(var p in n){var q=n[p];o[q]=true;}c('UFIComments').resetComments(o);};l.prototype.getParentCommentID=function(){return this.parentCommentID;};l.prototype.buildCommentPermalink=function(n,o,p){if(!this.basePermalink)return null;var q=this.getParentCommentID().split("_"),r=o;if(q.length===2){r=q[1];}else k.error("Bad reply comment ID: "+this.getParentCommentID());return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:r,reply_comment_id:o}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function m(n){var o=c('UFIComments').getComment(n.commentid),p=o.id,q=o.parentcommentid;if(!q)return;if(o.status!==c('UFIConstants').UFIStatus.DELETED&&o.status!==c('UFIConstants').UFIStatus.FAILED_ADD)l.getReplyListsForParentCommentID(q).forEach(function(r){r.deleteComment(p);});}c('UFICentralUpdates').subscribe('update-actions',function(n,o){if(o.actions&&o.actions.length)for(var p=0;p<o.actions.length;p++){var q=o.actions[p];switch(q.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:m(q);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(n,o){var p=o.commentlists;if(p&&p.replies&&Object.keys(p).length)for(var q in p.replies){var r=p.replies[q],s=r.ftentidentifier,t=r.containerorderingmode;l.getCommentList(s,q,t).addCommentIDs(r.range.offset,r.range.length,r.values).updateCommentCount(r.count);}});c('UFICentralUpdates').subscribe('update-comments',function(n,o){if(o.comments&&o.comments.length)o.comments.forEach(function(p){var q=p.parentcommentid;if(!q)return;l.getReplyListsForParentCommentID(q).forEach(function(r){r.addOrUpdateComment(p);});});});f.exports=l;}),6);
__d('UFIRange',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){var i=arguments.length<=0||arguments[0]===undefined?0:arguments[0],j=arguments.length<=1||arguments[1]===undefined?0:arguments[1];this.offset=i;this.length=j;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this;};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j;};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset;};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n);}return m;};f.exports=h;}),null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIComments','UFIConstants','UFIRange'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0;}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getClientHasAll=function(){return false;};i.prototype.getActualCommentCount=function(){return this.commentIDs.length;};i.prototype.getCommentCount=function(){return this.totalCommentCount;};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount();};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getPermalinkForComment=function(j){return '';};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l));};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();!(m===0)?h(0):void 0;var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o;};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j;};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false;};i.prototype.addOrUpdateComment=function(j,k){var l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.islocal){if(this.hasComment(j))return;this.commentIDs.push(j.id);this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.deleteComment=function(j){var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m===j){this.deletedCount+=1;}else k.push(m);}this.commentIDs=k;};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l);}var m=l.get(k);if(!m){m=new i(j);l.set(k,m);}return m;};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k);};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values());};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true;});return;}var m={};k.forEach(function(n){m[n]=true;});i.$UFIToplevelStreamedCommentList2.set(j,m);};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3());};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3());});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l);}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid),n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentList(o).deleteComment(n);});});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,!!k.isstreaming);}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,!!k.isstreaming);});});});f.exports=i;}),6);
__d('UFIToplevelPagedCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','UFIToplevelStreamedCommentList','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={};h=babelHelpers.inherits(k,c('UFIPagedCommentList'));i=h&&h.prototype;k.getCommentList=function(m,n){if(!j[m])j[m]={};if(!j[m][n]){var o=new k(m,n),p=k.getCommentListsForFeedbackTargetID(m);if(p.length)o.updateCommentCount(p[0].getCommentCount());j[m][n]=o;}return j[m][n];};k.getCommentListsForFeedbackTargetID=function(m){var n=[],o=j[m]||{};for(var p in o)n.push(o[p]);return n;};k.getDisplayedCommentCountForFeedbackTargetID_UNSAFE=function(m){var n=k.getCommentListsForFeedbackTargetID(m),o=n.length?n[0].getDisplayedCommentCount():null,p=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(m),q=p.length?p[0].getDisplayedCommentCount():null;if(o===null&&q===null)return null;return Math.max(o,q);};k.resetCommentListsForFeedbackTargetID=function(m){if(!j[m])return;var n={};for(var o in j[m]){var p=j[m][o],q=p.reset();for(var r in q){var s=q[r];n[s]=true;}}c('UFIComments').resetComments(n);};k.resetCommentListsWithContext=function(m,n){if(!j[m])return;var o={};for(var p in j[m]){var q=j[m][p];for(var r in n)if(this.isValidContextPropertyForReset(r))q[r]=n[r];var s=q.reset();for(var t in s){var u=s[t];o[u]=true;c('UFIReplyCommentList').resetWithContext(m,u,n,p);}}c('UFIComments').resetComments(o);};function k(m,n){i.constructor.call(this,m);this.orderReversed=false;if(c('UFICommentOrdering').inverted(n))this.orderReversed=true;this.orderingMode=n;this.clientHasAll=false;}k.prototype.fetchComments=function(m,n,o){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:n,is_reply:false});var p={ft_ent_identifier:this.feedbackTargetID,viewas:o&&o.viewAs?o.viewAs+'':null,source:o&&o.feedbackSource,offset:m,length:n,orderingmode:this.orderingMode,feed_context:o?o.feedContext:null,numpagerclicks:o?o.numPagerClicks:null,translate_all:o?o.translateAll:null};switch(this.orderingMode){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:p.clientcommentcount=this.count;}if(!o||!o.viewAs)p[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',p);};k.prototype.commentsFromCommentIDs=function(m,n,o){var p={},q=n,r=n+o-1;for(var s=0;s<o;s++){var t=this.orderReversed?r-s:q+s,u=c('UFIComments').getComment(m[t]);if(u)p[n+s]=u;}return p;};k.prototype.getOrderingMode=function(){return this.orderingMode;};k.prototype.setClientHasAll=function(m){this.clientHasAll=m;return this;};k.prototype.getClientHasAll=function(){return this.clientHasAll;};k.prototype.buildCommentPermalink=function(m,n,o){if(!this.basePermalink)return null;return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:n}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function l(m){var n=c('UFIComments').getComment(m.commentid),o=n.id,p=n.ftentidentifier,q=n.parentcommentid;if(q)return;if(m.islocal||n.status!==c('UFIConstants').UFIStatus.DELETED&&n.status!==c('UFIConstants').UFIStatus.FAILED_ADD)k.getCommentListsForFeedbackTargetID(p).forEach(function(r){r.deleteComment(o);});}c('UFICentralUpdates').subscribe('update-actions',function(m,n){if(n.actions&&n.actions.length)for(var o=0;o<n.actions.length;o++){var p=n.actions[o];switch(p.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:l(p);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(m,n){var o=n.commentlists;if(o&&o.comments&&Object.keys(o).length)for(var p in o.comments)for(var q in o.comments[p]){var r=o.comments[p][q],s=k.getCommentList(p,q).addCommentIDs(r.range.offset,r.range.length,r.values);s.setClientHasAll(!!r.forcenotpageable);}});c('UFICentralUpdates').subscribe('update-comments',function(m,n){if(n.comments&&n.comments.length)n.comments.forEach(function(o){if(o.parentcommentid)return;var p=o.ftentidentifier;k.getCommentListsForFeedbackTargetID(p).forEach(function(q){q.addOrUpdateComment(o);});});});c('UFICentralUpdates').subscribe('update-feedback',function(m,n){if(n.feedbacktargets&&n.feedbacktargets.length)n.feedbacktargets.forEach(function(o){var p=o.entidentifier,q=o.defaultcommentorderingmode,r={};if(q)r[q]=true;if(o.orderingmodes)o.orderingmodes.forEach(function(t){if(t.value===c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING)return;r[t.value]=true;});for(var s in r)k.getCommentList(p,s).updateCommentCount(o.commentcount);});});f.exports=k;}),6);
__d("XConstituencyTitleEditVisibilityDialogController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/constituency_title\/edit_comment_visibility\/",{ft_id:{type:"FBID",required:true},action_type:{type:"Enum",required:true,enumType:1},source:{type:"Enum",required:true,enumType:1},comment_id:{type:"String"},__asyncDialog:{type:"Int"}});}),null);
__d("XConstituencyTitleEnableController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/constituency_title\/enable\/",{});}),null);
__d("XUFIActorChangeController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});}),null);
__d("XUFIAddCommentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});}),null);
__d("XUFICommentLikeController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});}),null);
__d("XUFICommentReactionController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}});}),null);
__d("XUFIDeleteCommentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});}),null);
__d("XUFIEditCommentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});}),null);
__d("XUFIHideCommentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});}),null);
__d("XUFILikeController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});}),null);
__d("XUFIReactionController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},live_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});}),null);
__d("XUFITranslateCommentController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});}),null);
__d("XUFITypingIndicatorController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1},session_id:{type:"String"}});}),null);
__d('UFIUserActions',['errorCode','fbt','ActorURI','AsyncRequest','AsyncResponse','requireWeak','ChannelClientID','ClientIDs','ImmutableObject','Nectar','NumberFormat','UFICentralUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionTypes','UFIReactionsUtils','UFIVideoPlayerRegistry','MercuryServerDispatcher','XConstituencyTitleEditVisibilityDialogController','XConstituencyTitleEnableController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentLikeController','XUFICommentReactionController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFIReactionController','XUFITranslateCommentController','XUFITypingIndicatorController','collectDataAttributes','ifRequired','UnicodeBidi'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j;c('requireWeak')('StickerAssetType',function(ma){j=ma;});var k={BAN:'ban',UNDO_BAN:'undo_ban'},l={changeActor:function ma(na,oa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(pa){c('UFIToplevelPagedCommentList').resetCommentListsWithContext(na,{actorID:oa});c('UFIToplevelStreamedCommentList').resetAllCommentLists(na);c('UFICentralUpdates').inform('actor-changed',{actorID:oa});var qa={from_actor_id:pa.actorforpost,ft_ent_identifier:na};qa[c('ActorURI').PARAMETER_ACTOR]=oa;var ra=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ra,qa);});},changeCommentLike:function ma(na,oa,pa){var qa=c('UFIComments').getComment(na);if(qa.hasviewerliked!=oa){var ra=m(pa.target),sa=oa?1:-1,ta={commentid:na,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:oa,likecount:(qa.likecount||0)+sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(ua){var va={};va[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;var wa=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({comment_id:na,legacy_id:qa.legacyid,like_action:oa,ft_ent_identifier:qa.ftentidentifier,source:pa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ra,va));});}},changeCommentReaction:function ma(na,oa,pa){var qa=c('UFIComments').getComment(na);if(qa.viewerreaction!=oa)c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(ra){var sa=m(pa.target),ta=oa===c('UFIReactionTypes').LIKE,ua=[la(qa,oa,na,ra.supportedreactions,ra.actorforpost)];if(ra.hasviewerliked!==ta){var va=ta?1:-1;ua.push({commentid:na,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ta,likecount:(qa.likecount||0)+va});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ua});var wa={};wa[c('ActorURI').PARAMETER_ACTOR]=ra.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:na,legacy_id:qa.legacyid,reaction_type:oa,ft_ent_identifier:qa.ftentidentifier,source:pa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},sa,wa));});},_getAttachment:function ma(na){return na;},_getLocalComment:function ma(na,oa,pa,qa,ra,sa){var ta=c('ClientIDs').getNewClientID(),ua=c('UnicodeBidi').isDirectionLTR(pa)?'ltr':'rtl',va=this._getAttachment(ra.attachedsticker);return {ftentidentifier:oa,body:{text:pa,dir:ua},author:na.actorforpost,id:ta,islocal:true,ufiinstanceid:ra.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:ra.replyid,replycommentparentid:ra.replycommentparentid,attachment:va,photo_comment:ra.attachedphoto,video_comment:ra.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("A few seconds ago")},photoTextTagID:ra.photoTextTagID,isPhotoTag:ra.isPhotoTag,photoTagX:ra.photoTagX,photoTagY:ra.photoTagY,videoTimeOffset:sa,postedLiveState:ra.islivestreaming?c('UFIConstants').UFICommentPostedLiveState.LIVE:c('UFIConstants').UFICommentPostedLiveState.ON_DEMAND};},addComment:function ma(na,oa,pa,qa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(ra){var sa=this.createComment(na,oa,pa,qa);if(!sa)return;var ta={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ra.actorforpost,hasviewersubscribed:true,entidentifier:ra.entidentifier},ua={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:ra.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[sa],actions:[ta,ua]});}.bind(this));},createComment:function ma(na,oa,pa,qa){var ra=c('UFIFeedbackTargets').getFeedbackTargetIfExists(na);if(!ra.actorforpost)return null;var sa=null;if(qa.isBroadcasterUFI){sa=c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(ua){return (ua.getCurrentBroadcastTime());});}else if(qa.fluentContentToken&&(qa.isLiveVOD||qa.islivestreaming))sa=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(qa.target,qa.fluentContentToken);var ta=this._getLocalComment(ra,na,oa,pa,qa,sa);this._sendCommentToServer(na,ra.actorforpost,oa,pa,qa,ta.id,sa);return ta;},_sendCommentToServer:function ma(na,oa,pa,qa,ra,sa,ta){var ua=null;if(ra.reply_fbid){ua=ra.reply_fbid;}else if(ra.replyid)ua=c('UFIComments').getComment(ra.replyid).fbid;var va;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(sa,ra.timestamp,{has_photo:!!ra.attachedphoto,has_video:!!ra.attachedvideo,has_sticker:!!ra.attachedsticker,is_reply:!!ra.replyid});var wa={};wa[c('ActorURI').PARAMETER_ACTOR]=oa;var xa=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(xa,babelHelpers['extends']({ft_ent_identifier:na,comment_text:qa,source:ra.source,client_id:sa,session_id:c('ChannelClientID').getID(),reply_fbid:ua,parent_comment_id:ra.parent_comment_id||ra.replyid,reply_comment_parent_id:ra.replycommentparentid,rootid:ra.rootid,clp:va,attached_sticker_fbid:ra.attachedsticker?ra.attachedsticker.fbid:0,attached_photo_fbid:ra.attachedphoto?ra.attachedphoto.fbid:0,attached_video_fbid:ra.attachedvideo?ra.attachedvideo.fbid:0,external_image_url:ra.externalimageurl,feedback_referrer:ra.feedbackReferrer,feed_context:ra.feedcontext,video_time_offset:ta,is_live_streaming:ra.islivestreaming,is_markdown:ra.isMarkdown},m(ra.target),wa,{photo_text_tag_id:ra.photoTextTagID,is_private:ra.isPrivate,is_photo_tag:ra.isPhotoTag,photo_fbid:ra.photoFBID,photo_tag_x:ra.photoTagX,photo_tag_y:ra.photoTagY}));},_hasCommentTextChanged:function ma(na,oa){return na.body&&na.body.text!=oa;},_hasCommentPhotoChanged:function ma(na,oa){return (na||oa)&&!(na&&oa)||na&&oa&&na.fbid!=oa.fbid;},_hasCommentVideoChanged:function ma(na,oa){return (na||oa)&&!(na&&oa)||na&&oa&&na.fbid!=oa.fbid;},_hasCommentStickerChanged:function ma(na,oa){return (na||oa)&&!(na&&oa)||na&&na.type=="sticker"&&oa&&na.fbid!=oa.fbid;},editComment:function ma(na,oa,pa,qa){var ra=m(qa.target),sa=c('UFIComments').getComment(na),ta=this._hasCommentTextChanged(sa,oa)||this._hasCommentPhotoChanged(sa.photo_comment,qa.attachedPhoto)||this._hasCommentStickerChanged(sa.attachment,qa.attachedSticker)||this._hasCommentVideoChanged(sa.video_comment,qa.attachedVideo);sa=c('ImmutableObject').set(sa,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:oa},editnux:null,attachment:qa.attachedSticker,photo_comment:qa.attachedPhoto,video_comment:qa.attachedVideo});if(ta)sa=c('ImmutableObject').set(sa,{originalTimestamp:sa.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("A few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[sa]});c('UFIFeedbackTargets').getFeedbackTarget(sa.ftentidentifier,function(ua){var va={};va[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;var wa=c('XUFIEditCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({ft_ent_identifier:sa.ftentidentifier,comment_text:pa,source:qa.source,comment_id:sa.id,parent_comment_id:sa.parentcommentid,attached_sticker_fbid:qa.attachedSticker?qa.attachedSticker.fbid:0,attached_photo_fbid:qa.attachedPhoto?qa.attachedPhoto.fbid:0,attached_video_fbid:qa.attachedVideo?qa.attachedVideo.fbid:0},ra,va));});},translateComments:function ma(na,oa,pa,qa){var ra=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ra,{ft_ent_identifier:na,comment_ids:oa,source:qa.source,trigger:pa});},setHideAsSpam:function ma(na,oa,pa){var qa=m(pa.target),ra=c('UFIComments').getComment(na),sa={commentid:na,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:oa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({comment_id:na,spam_action:oa,ft_ent_identifier:ra.ftentidentifier,source:pa.source},qa,ua));});},removeComment:function ma(na,oa){var pa=m(oa.target),qa=c('UFIComments').getComment(na),ra={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:na,islocal:true,oneclick:oa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(sa){var ta={};ta[c('ActorURI').PARAMETER_ACTOR]=sa.actorforpost;var ua=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ua,babelHelpers['extends']({comment_id:qa.id,comment_legacyid:qa.legacyid,ft_ent_identifier:qa.ftentidentifier,one_click:oa.oneclick,source:oa.source,client_id:c('ClientIDs').getNewClientID()},pa,ta));});},banUser:function ma(na,oa,pa,qa){var ra=pa?k.BAN:k.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:oa,commenter_id:na.author,action:ra,comment_id:na.id,client_side:true});},changeReaction:function ma(na,oa,pa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(qa){var ra=[ka(qa,oa)],sa=parseInt(oa,10)!==0;if(qa.hasviewerliked!==sa){var ta=sa?1:-1;ra.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:qa.actorforpost,hasviewerliked:sa,likecount:(qa.likecount||0)+ta,entidentifier:na,likesentences:{current:qa.likesentences.alternate,alternate:qa.likesentences.current}});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ra});var ua=m(pa.target),va={};va[c('ActorURI').PARAMETER_ACTOR]=qa.actorforpost;var wa=babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:na,reaction_type:oa,root_id:pa.rootid,session_id:c('ChannelClientID').getID(),source:pa.source,feedback_referrer:pa.feedbackReferrer},va,ua);if(pa.fluentContentToken)if(pa.isLiveVOD){wa.on_demand_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(pa.target,pa.fluentContentToken);}else if(pa.islivestreaming)wa.live_content_time_offset=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(pa.target,pa.fluentContentToken);c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),wa);});},changeSubscribe:function ma(na,oa,pa){c('UFIFeedbackTargets').getFeedbackTarget(na,function(qa){var ra=m(pa.target);if(qa.hasviewersubscribed!==oa){var sa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:qa.actorforpost,hasviewersubscribed:oa,entidentifier:na};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});var ta={};ta[c('ActorURI').PARAMETER_ACTOR]=qa.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:oa,ft_ent_identifier:na,source:pa.source,client_id:c('ClientIDs').getNewClientID(),rootid:pa.rootid,comment_expand_mode:pa.commentexpandmode},ra,ta));}});},fetchSpamComments:function ma(na,oa,pa,qa){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:na,viewas:qa,comment_ids:oa,parent_comment_id:pa,source:null});},hideConstituentTitle:function ma(na){var oa=c('XConstituencyTitleEnableController').getURIBuilder().getURI();new (c('AsyncRequest'))(oa).setMethod('POST').setData({ft_id:na.ftentidentifier,enable:false,source:'comment_edit_menu',comment_id:na.id}).send();},showConstituentTitle:function ma(na){var oa=c('XConstituencyTitleEditVisibilityDialogController').getURIBuilder().setFBID('ft_id',na.ftentidentifier).setEnum('action_type','comment_show_constituent_title').setEnum('source','comment_edit_menu').setString('comment_id',na.id).getURI();new (c('AsyncRequest'))(oa).send();},removePreview:function ma(na,oa){var pa=m(oa.target),qa={commentid:na.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[qa]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:na.id,ft_ent_identifier:na.ftentidentifier,source:oa.source},pa));},typingChange:function ma(na,oa){new (c('AsyncRequest'))(c('XUFITypingIndicatorController').getURIBuilder().setString('feedback_id',na).setEnum('update',oa?'start':'stop').getURI()).send();}};function m(ma){if(!ma)return {ft:{}};var na={ft:c('collectDataAttributes')(ma,['ft']).ft};c('Nectar').addModuleData(na,ma);return na;}function n(ma){c('AsyncResponse').defaultErrorHandler(ma);}function o(ma){var na=ma.request.data;c('AsyncResponse').defaultErrorHandler(ma);var oa=na.client_id||na.comment_id,pa=c('UFIComments').getComment(oa),qa=pa.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;pa=c('ImmutableObject').setDeep(pa,{status:qa,allowRetry:p(ma),body:{mentionstext:na.comment_text,mentionsphoto:pa.photo_comment,mentionsvideo:pa.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function p(ma){var na=ma.getError();if(ma.isBlockedAction())return false;if(ma.silentError)return true;if(na===1357012||na===1357006)return false;return true;}function q(ma){var na=ma.request.data,oa=na.comment_id,pa=c('UFIComments').getComment(oa);pa=c('ImmutableObject').set(pa,{status:pa.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function r(ma){var na=ma.request.data,oa=na.comment_id,pa=c('UFIComments').getComment(oa);if(na.like_action===pa.hasviewerliked){var qa=pa.hasviewerliked?-1:1,ra={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!pa.hasviewerliked,likecount:(pa.likecount||0)+qa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}c('AsyncResponse').defaultErrorHandler(ma);}function s(ma){c('AsyncResponse').defaultErrorHandler(ma);}function t(ma){var na=ma.request.data,oa=na.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(oa,function(pa){if(pa.hasviewerliked===na.like_action){var qa=pa.hasviewerliked?-1:1,ra={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:pa.actorforpost,hasviewerliked:!pa.hasviewerliked,likecount:(pa.likecount||0)+qa,entidentifier:oa,likesentences:{current:pa.likesentences.alternate,alternate:pa.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}});c('AsyncResponse').defaultErrorHandler(ma);}function u(ma){var na=ma.request.data,oa=na.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(oa,function(pa){if(pa.hasviewersubscribed===na.subscribe_action){var qa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:pa.actorforpost,hasviewersubscribed:!pa.hasviewersubscribed,entidentifier:oa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[qa]});}});c('AsyncResponse').defaultErrorHandler(ma);}var v={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:ia,batch_function:ja},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},w=c('XUFIAddCommentController').getURIBuilder().getURI();v[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var x=c('XUFIDeleteCommentController').getURIBuilder().getURI();v[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var y=c('XUFICommentLikeController').getURIBuilder().getURI();v[y]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:r,batch_if:ga,batch_function:ja};var z=c('XUFICommentReactionController').getURIBuilder().getURI();v[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ga,batch_function:ja};var aa=c('XUFIHideCommentController').getURIBuilder().getURI();v[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var ba=c('XUFILikeController').getURIBuilder().getURI();v[ba]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:ha,batch_function:ja};var ca=c('XUFIEditCommentController').getURIBuilder().getURI();v[ca]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var da=c('XUFITranslateCommentController').getURIBuilder().getURI();v[da]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ea=c('XUFIActorChangeController').getURIBuilder().getURI();v[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE};var fa=c('XUFIReactionController').getURIBuilder().getURI();v[fa]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(v);function ga(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier&&ma.comment_id==na.comment_id;}function ha(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function ia(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function ja(ma,na){return na;}function ka(ma,na){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:ma.actorforpost,entidentifier:ma.entidentifier},c('UFIReactionsUtils').getReactionData(ma,na,ma.actorforpost,c('NumberFormat').formatIntegerWithDelimiter,c('UFIConfig').numberDelimiter));}function la(ma,na,oa,pa,qa){var ra={};for(var sa=0;sa<pa.length;sa++){var ta=pa[sa],ua=ma.reactioncountmap[ta];ra[ta]={'default':ua?ua['default']:0,reduced:ua?ua.reduced:'0'};}var va=c('UFIReactionsUtils').getReactionData({viewerreaction:ma.viewerreaction,reactioncount:ma.reactioncount,reactioncountreduced:ma.reactioncountreduced,reactioncountmap:ra,reactorids:ma.viewerreaction?[qa]:[]},na,qa);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:oa,hasviewerliked:!!na,likecount:va.reactioncountmap[1]['default'],reactioncount:va.reactioncount,reactioncountmap:va.reactioncountmap,reactioncountreduced:va.reactioncountreduced,viewerreaction:na};}f.exports=l;}),null);
__d('UFISpamStore',['FluxReduceStore','UFIActionTypes','UFIDispatcherBase','UFIUserActions'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length;};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIActionTypes').STORY.SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return (k[m]=true);});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFIDispatcherBase'));}),null);
__d('UFISharedDispatcher',['UFIDispatcherBase','UFIFeedbackStore','UFICommentVisibilityStore','UFIInteractionStore','UFILivePinnedCommentStore','UFILiveTypingStore','UFIOrderingModeStore','UFISpamStore'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();c('UFIFeedbackStore');c('UFICommentVisibilityStore');c('UFIInteractionStore');c('UFILivePinnedCommentStore');c('UFILiveTypingStore');c('UFIOrderingModeStore');c('UFISpamStore');f.exports=c('UFIDispatcherBase');}),null);
__d('UFIStopWatch',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='COUNTING',i='PAUSED';function j(){this.$UFIStopWatch1=i;this.$UFIStopWatch2=0;this.$UFIStopWatch3=0;}j.prototype.start=function(){if(this.$UFIStopWatch1===h)return this;this.$UFIStopWatch1=h;this.$UFIStopWatch3=Date.now();return this;};j.prototype.pause=function(){if(this.$UFIStopWatch1===i)return this;this.$UFIStopWatch1=i;this.$UFIStopWatch2+=Date.now()-this.$UFIStopWatch3;return this;};j.prototype.reset=function(){this.$UFIStopWatch2=0;this.$UFIStopWatch3=0;if(this.$UFIStopWatch1==h)this.$UFIStopWatch3=Date.now();return this;};j.prototype.state=function(){return this.$UFIStopWatch1;};j.prototype.milliseconds=function(){var k=0;if(this.$UFIStopWatch1===h)k=Date.now()-this.$UFIStopWatch3;return this.$UFIStopWatch2+k;};j.COUNTING=h;j.PAUSED=i;f.exports=j;}),null);
__d('UFIAddCommentAction',['UFIActionTypes'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIActionTypes').ADD_COMMENT,i={cancel:function j(k){return {type:h.CANCEL,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier};},retrySubmit:function j(k,l){return {type:h.RETRY_SUBMIT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,comment:l};},submitEdit:function j(k,l,m,n){return {type:h.SUBMIT_EDIT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,comment:l,commentData:m,target:n};},submitNew:function j(k,l,m,n){return {type:h.SUBMIT_NEW,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,comment:l,target:m,replyCommentID:n,timestamp:Date.now()};},typingChange:function j(k,l){return {type:h.TYPING_CHANGE,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,state:l};}};f.exports=i;}),null);
__d('UFICommentAction',['UFIActionTypes'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIActionTypes').COMMENT,i={changeReaction:function j(k,l,m,n){return {type:h.CHANGE_REACTION,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,reactionType:m,target:n};},mounted:function j(k,l){return {type:h.MOUNTED,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,contextArgs:k};},unmounted:function j(k,l){return {type:h.UNMOUNTED,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,contextArgs:k};},changeVisibility:function j(k,l,m){return {type:h.CHANGE_VISIBILITY,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,contextArgs:k,visibility:m};},edit:function j(k,l){return {type:h.EDIT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l};},remove:function j(k,l,m,n){return {type:h.REMOVE,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,target:m,onConfirm:n};},removePreview:function j(k,l,m){return {type:h.REMOVE_PREVIEW,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,target:m};},toggleLike:function j(k,l,m){return {type:h.TOGGLE_LIKE,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,like:!l.hasviewerliked,target:m};},translate:function j(k,l,m){return {type:h.TRANSLATE,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,trigger:m};},markAsSpam:function j(k,l,m){return {type:h.TOGGLE_MARK_AS_SPAM,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,is_spam:true,target:m};},markAsNotSpam:function j(k,l,m){return {type:h.TOGGLE_MARK_AS_SPAM,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,is_spam:false,target:m};},inlineBan:function j(k,l,m,n){return {type:h.TOGGLE_INLINE_BAN,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,is_banned:true,ownerid:n,target:m};},undoInlineBan:function j(k,l,m,n){return {type:h.TOGGLE_INLINE_BAN,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l,is_banned:false,ownerid:n,target:m};},embed:function j(k,l){return {type:h.EMBED,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l};},showConstituentTitle:function j(k,l){return {type:h.SHOW_CONSTITUENT_TITLE,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l};},hideConstituentTitle:function j(k,l){return {type:h.HIDE_CONSTITUENT_TITLE,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,fbid:l.fbid,comment:l};}};f.exports=i;}),null);
__d('UFINewCommentNotifier',['Arbiter','UFIFeedbackTargets','UFIUserActions','UFIUIEvents'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={onNewComment:function i(j,k,l,m,n,o){c('UFIUserActions').addComment(k.ftentidentifier,l.visibleValue,l.encodedValue,{source:k.source,ufiinstanceid:k.instanceid,target:m,replyid:n,rootid:k.rootid,attachedphoto:l.attachedPhoto,attachedvideo:l.attachedVideo,attachedsticker:l.attachedSticker,feedcontext:k.feedcontext,timestamp:o,feedbackReferrer:k.feedbackReferrer,isMarkdown:l.isMarkdown,fluentContentToken:k.fluentContentToken,isLiveVOD:k.isLiveVOD,islivestreaming:k.islivestreaming,photoTextTagID:k.photoTextTagID,isPrivate:l.isPrivate,isPhotoTag:k.isPhotoTag,photoFBID:k.photoFBID,photoTagX:k.photoTagX,photoTagY:k.photoTagY,externalimageurl:l.externalImageUrl,isBroadcasterUFI:k.isBroadcasterUFI});c('UFIFeedbackTargets').getFeedbackTarget(k.ftentidentifier,function(p){if(j)c('Arbiter').inform(c('UFIUIEvents').Comment,{ft_id:p.entidentifier,target:m,form:j,isinverted:p.isranked||k.islivestreaming,isPhotoTag:k.isPhotoTag,photoTextTagID:k.photoTextTagID,photoTagX:k.photoTagX,photoTagY:k.photoTagY});});}};f.exports=h;}),null);
__d('UFIStoryAction',['UFIActionTypes'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIActionTypes').STORY,i={commentsArrived:function j(k,l,m,n){return {type:h.COMMENTS_ARRIVED,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,newOffset:l,newLength:m,source:n};},pageInComments:function j(k,l,m,n){return {type:h.PAGE_IN_COMMENTS,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,commentID:l,direction:m,nextRange:n};},showReplies:function j(k,l,m){return {type:h.SHOW_REPLIES,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,commentID:l,initiatorComment:m};},spamFetched:function j(k,l,m,n){return {type:h.SPAM_FETCHED,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,viewas:l,commentIDs:m,parentCommentID:n};},changeReaction:function j(k,l,m){return {type:h.CHANGE_REACTION,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,contextArgs:k,reactionType:l,target:m};},toggleReplies:function j(k,l){return {type:h.TOGGLE_REPLIES,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,commentID:l};},friendTyping:function j(k){return {type:h.FRIEND_TYPING,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier};},someoneTyping:function j(k){return {type:h.SOMEONE_TYPING,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier};},typingStopped:function j(k){return {type:h.TYPING_STOPPED,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier};},pinComment:function j(k,l){var m=arguments.length<=2||arguments[2]===undefined?null:arguments[2];return {type:h.LIVE_PIN_COMMENT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,commentID:l,pinEventID:m};},unpinComment:function j(k){var l=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return {type:h.LIVE_UNPIN_COMMENT,instanceID:k.instanceid,ftentidentifier:k.ftentidentifier,commentID:null,pinEventID:l};}};f.exports=i;}),null);
__d('onCommentIsVisible',['onViewportChanged'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=void 0;function l(n){return i(n);}function m(n){if(k!==n){k=n;j(n);}}return c('onViewportChanged')(m,l);}f.exports=h;}),null);
__d('CommercialBreakUFIOverlay.react',['ix','cx','fbt','Image.react','React','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_29y7"},c('React').createElement(c('Image.react'),{className:"_247x",src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/heart_16_fig-light-30.png")}),' ',j._("Watch ads to support {video owner name}",[j.param('video owner name',' '+this.props.ownerName)])));};function n(){'use strict';k.apply(this,arguments);}n.propTypes={ownerName:m.string.isRequired};f.exports=n;}),null);
__d('BaseGraphQLSubscription',['Banzai','BanzaiLogger','ChannelClientID','CurrentUser','CurrentLocale','RTISubscriptionManager'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=10000,i={subscribe:function j(k,l){var m={transformContext:JSON.stringify(this._getTransformContext(k))},n=this._getQueryParameters(k);this._logEvent('client_subscribe',n);return c('RTISubscriptionManager').subscribe(this._getTopic(k),function(o){this._logEvent('receivepayload',n);l(JSON.parse(o.payload));}.bind(this),m,null,function(){this._logEvent('client_unsubscribe',n);}.bind(this));},_getTransformContext:function j(k){var l=155160167952447;return {viewerID:c('CurrentUser').getID(),appID:l,locale:c('CurrentLocale').get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(k))};},_logEvent:function j(k,l){if(c('Banzai').isEnabled('gqls_web_logging')){var m=c('CurrentUser').isEmployee()?1:h;if(Math.random()*m<1)c('BanzaiLogger').log('GraphQLSubscriptionsLoggerConfig',{clienttime:Date.now()/1000,client_sample_weight:m,event:k,mechanism:'skywalker',query_id:parseInt(this._getQueryID(),10),query_params:l,session_id:c('ChannelClientID').getID(),subscription_call:this._getSubscriptionCallName()});}}};f.exports=i;}),null);
__d('WebGraphQLSubscriptionHelper',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={getExports:function h(i){var j=i.docID,k=i.queryID;return {getQueryID:function l(){return k;}};}};}),null);
__d("PinnedCommentEventCreateSubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"876506432484480",queryID:"876506449151145"});}),null);
__d('LivePinnedCommentEventCreateSubscription',['BaseGraphQLSubscription','PinnedCommentEventCreateSubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/pinned_comment_event_create_subscribe/video_id_'+j;},_getQueryID:function i(){return c('PinnedCommentEventCreateSubscriptionWebGraphQLSubscription').getQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),video_id:j})};},_getSubscriptionCallName:function i(){return 'pinned_comment_event_create_subscribe';}});f.exports=h;}),null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={reveal:function i(j){if(j){var k=c('ge')('content');if(k&&c('containsNode')(k,j))c('DOMScroll').ensureVisible(j,null,60,250);}}};f.exports=h;}),null);
__d("MentionsInputUtils",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function i(j){var k=j.text,l=[];(j.ranges||[]).forEach(function(n){var o=n.entity;if(!o.external&&!n.videoTimestamp&&!n.sphericalViewport&&!/\D/.test(o.id))l.push({uid:o.id,text:k.substr(n.offset,n.length),offset:n.offset,length:n.length,weakreference:!!o.weakreference});});var m={value:k,mentions:l};return m;}};f.exports=h;}),null);
__d('UFIActorIconContainer.react',['cx','Image.react','React','ShortProfiles','UFIBusinessActorIcon.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createElement(c('XUISpinner.react'),{size:'large'});i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={actor:null},this.$UFIActorIconContainer1=function(){c('ShortProfiles').get(this.props.actorID,function(s){return this.setState({actor:s});}.bind(this));}.bind(this),o;}m.prototype.componentWillMount=function(){'use strict';this.$UFIActorIconContainer1();};m.prototype.componentDidUpdate=function(n){'use strict';if(this.props.actorID!==n.actorID)this.$UFIActorIconContainer1();};m.prototype.render=function(){'use strict';var n=this.state.actor;if(!n)return l;var o=c('joinClasses')("img UFIActorImage _54ru",this.props.className);return (n.isBusinessPersona?c('React').createElement(c('UFIBusinessActorIcon.react'),{classNames:o,firstName:n.firstName,lastName:n.lastName,textClassNames:"UFIBusinessActorIconText"}):c('React').createElement(c('Image.react'),{alt:n.name,className:o,src:n.thumbSrc}));};m.propTypes={actorID:k.string.isRequired,className:k.string};f.exports=m;}),null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={START:'start',STOP:'stop'},i=10*1000;function j(k,l,m){this.$AbstractCommentLiveTypingController5=k;this.$AbstractCommentLiveTypingController6=l;this.$AbstractCommentLiveTypingController7=m;this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;c('destroyOnUnload')(this.destroy.bind(this));}j.prototype.destroy=function(){this.$AbstractCommentLiveTypingController1&&this.$AbstractCommentLiveTypingController1.destroy();this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;};j.prototype.bootloadPublisherModule=function(k){throw new Error(c('ex')('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};j.prototype.$AbstractCommentLiveTypingController8=function(k){var l=new k(this.$AbstractCommentLiveTypingController5,this.$AbstractCommentLiveTypingController6,this.$AbstractCommentLiveTypingController7),m=Date.now(),n=this.$AbstractCommentLiveTypingController3;if(n&&n+i>=m){var o=this.$AbstractCommentLiveTypingController4;if(o===h.START){l.handleStartEvent();}else if(o===h.STOP)l.handleStopEvent();}this.$AbstractCommentLiveTypingController1=l;};j.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController2||!this.$AbstractCommentLiveTypingController5)return;this.$AbstractCommentLiveTypingController2=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};j.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController4=h.START;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};j.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController4=h.STOP;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};f.exports=j;}),null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AbstractCommentLiveTypingController'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,l,m);}j.prototype.bootloadPublisherModule=function(k){c('Bootloader').loadModules(["UFIAddCommentLiveTypingPublisher"],k,'UFIAddCommentLiveTypingController');};j.prototype.attemptPublishStartEvent=function(){i.attemptPublishStartEvent.call(this);};j.prototype.attemptPublishStopEvent=function(){i.attemptPublishStopEvent.call(this);};f.exports=j;}),null);
__d('UFIGifButton.react',['cx','fbt','Arbiter','Bootloader','Link.react','React','ReactLayeredComponentMixin_DEPRECATED'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=278,k=c('React').PropTypes,l=c('React').createClass({displayName:'UFIGifButton',propTypes:{onGifFlyoutShow:k.func,onGifSelected:k.func.isRequired,showTooltip:k.bool},mixins:[c('ReactLayeredComponentMixin_DEPRECATED')],getDefaultProps:function m(){return {showTooltip:true};},getInitialState:function m(){return {renderFlyout:null,flyoutShown:false,query:''};},componentDidMount:function m(){this._updateListener=c('Arbiter').subscribe('page_transition',function(){return this._hideFlyout();}.bind(this));},componentWillUnmount:function m(){this._updateListener&&this._updateListener.unsubscribe();},render:function m(){var n=i._("Post a GIF");return (c('React').createElement(c('Link.react'),{className:"_r1a UFICommentGifButton",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':this.props.showTooltip?n:null,onClick:this._onLinkClicked,onMouseDown:this._prepareForClick},c('React').createElement('div',{ref:'icon',tabIndex:0,className:'UFICommentGifIcon'}),this.props.children));},renderLayers:function m(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function m(){this.setState({flyoutShown:false});},_prepareForClick:function m(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function m(){if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow();this.setState({flyoutShown:true});}return;}c('Bootloader').loadModules(["XUIContextualDialog.react","ChatContentSearchFlyout.react","ContextualLayerAutoFlip"],function(n,o,p){this.setState({flyoutShown:true,renderFlyout:function(){return {contextualDialog:c('React').createElement(n,{alignment:'right',behaviors:{flip:p},className:"_5trk",contextRef:function(){return this.refs.icon;}.bind(this),onBlur:this._hideFlyout,onToggle:function(q){if(!q&&this.state.flyoutShown)this._hideFlyout();}.bind(this),position:'above',shown:this.state.flyoutShown,hasActionableContext:true,width:j},c('React').createElement('div',null,c('React').createElement(o,{onEscKeyDown:this._hideFlyout,onSelect:this._onGifSelected,query:this.state.query,shown:this.state.flyoutShown})))};}.bind(this)});this.props.onGifFlyoutShow&&this.props.onGifFlyoutShow();}.bind(this),'UFIGifButton.react');},_onGifSelected:function m(n){this.props.onGifSelected(n);this._hideFlyout();}});f.exports=l;}),null);
__d('UFIMarkdownButton.react',['cx','fbt','Link.react','React'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=i._("Format text with markdown");return (c('React').createElement(c('Link.react'),{className:"_r1a _45-m",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':n,'aria-label':n,onClick:this.props.onClick},c('React').createElement('div',{tabIndex:0,className:"_45-n"+(this.props.active?' '+"_45-o":'')})));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={active:l.bool,onClick:l.func.isRequired};f.exports=m;}),null);
__d('UFITipJarButton.react',['cx','fbt','Bootloader','Link.react','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);this.$UFITipJarButton1=function(){if(!this.state.renderFlyout){c('Bootloader').loadModules(["UFITipJarDialogContainer.react"],function(n){this.setState({flyoutShown:true,renderFlyout:function(){return (c('React').createElement(n,{contextRef:function(){return this.refs.tipJar;}.bind(this),flyoutShown:this.state.flyoutShown,hideFlyout:this.$UFITipJarButton4,onClickAddPayment:this.$UFITipJarButton5}));}.bind(this)});}.bind(this),'UFITipJarButton.react');}else this.setState({flyoutShown:true});}.bind(this);this.$UFITipJarButton4=function(){this.setState({flyoutShown:false});}.bind(this);this.$UFITipJarButton5=function(){if(!this.state.renderAddPaymentDialog){c('Bootloader').loadModules(["VideoTipJarAddPaymentDialogContainer.react"],function(n){this.setState({addPaymentDialogShown:true,renderAddPaymentDialog:function(){return (c('React').createElement(n,{onHideAddPaymentDialog:this.$UFITipJarButton6}));}.bind(this)});}.bind(this),'UFITipJarButton.react');}else this.setState({addPaymentDialogShown:true});}.bind(this);this.$UFITipJarButton6=function(){this.setState({addPaymentDialogShown:false});}.bind(this);this.state={flyoutShown:false,addPaymentDialogShown:false,renderFlyout:null,renderAddPaymentDialog:null};}l.prototype.render=function(){var m=i._("Send Contributions");return c('React').createElement(c('Link.react'),{className:"_qqp",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':m,'aria-label':m,onClick:this.$UFITipJarButton1},c('React').createElement('div',{className:"_qqq",ref:'tipJar'}),this.$UFITipJarButton2(),this.$UFITipJarButton3());};l.prototype.$UFITipJarButton2=function(){return this.state.renderFlyout&&this.state.renderFlyout();};l.prototype.$UFITipJarButton3=function(){if(this.state.addPaymentDialogShown)return this.state.renderAddPaymentDialog&&this.state.renderAddPaymentDialog();return null;};f.exports=l;}),null);
__d("XFeedNUXSaveSeenStateController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}});}),null);
__d("XUFICommentMarkdownPreviewController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/markdown_preview\/",{comment_body:{type:"String"}});}),null);
__d('UFIAddComment.react',['cx','fbt','ActorURI','Arbiter','AsyncRequest','Badge.react','BootloadedComponent.react','Bootloader','ClipboardPhotoUploader','Event','JSResource','Keys','Link.react','LitestandStoryInsertionStatus','MentionsInputUtils','React','ReactDOM','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachMediaSection.react','UFIConfig','UFIGifButton.react','UFIImageBlock.react','UFIInstanceState','UFIMarkdownButton.react','UFIStickerButton.react','UFITipJarButton.react','URI','XFeedNUXSaveSeenStateController','XUFICommentMarkdownPreviewController','getActiveElement','joinClasses','throttle'],(function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=b.URL||b.webkitURL||{},k=c('React').PropTypes,l=i._("Write a comment..."),m=i._("Write a reply..."),n="fcg fss UFICommentTip",o=19,p='/ajax/ufi/upload/',q='/ajax/ufi/sticker_preview/',r=1000,s='comment_content_change';function t(){return !!c('UFIConfig').canPublishLive;}var u={UPLOAD:'uploading',ENCODE:'encoding'},v=false,w=false,x=false,y=c('React').createClass({displayName:'UFIAddComment',propTypes:{contextArgs:k.object.isRequired,viewerActorID:k.string.isRequired,editingComment:k.object.isRequired,className:k.string,allowPhotoAttachments:k.bool,allowVideoAttachments:k.bool,allowStickerAttachments:k.bool,allowGifAttachments:k.bool,allowTipJar:k.bool,isEditing:k.bool,isFirstComponent:k.bool,isLastComponent:k.bool,isQAndA:k.bool,mentionsDataSource:k.object,replyCommentID:k.string,showSendOnEnterTip:k.bool,multiCompanyGroupsCount:k.number,subtitle:k.any,targetID:k.string,withoutSeparator:k.bool,markViewerHasInteracted:k.func,allowCommentMarkdown:k.bool,allowCommentPrivate:k.bool},contextTypes:{dispatch:k.func},getInitialState:function z(){var aa=this.props.editingComment,ba=aa.attachment||{type:null},ca=ba.type==='photo'?ba:null;return {attachedPhoto:aa.photo_comment||ca,attachedVideo:aa.video_comment||null,commentMarkdownPreviewContent:null,commentMarkdownEnabled:false,videoStatus:null,videoFileURL:null,videoProgress:0,attachedSticker:ba.type=='sticker'?ba:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,stickerNUXVisible:false,isFocused:this.props.isEditing,videosInCommentsNUXVisible:false,markdownNUXVisible:false};},_onKeyDown:function z(event){if(this.props.isEditing&&c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs));if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){c('Run').onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var aa=c('getActiveElement')();if(c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)aa.blur();},_onContentChange:function z(aa){c('Arbiter').inform(s,{fbid:this.props.replyCommentID,text:aa,instanceid:this.props.contextArgs.instanceid,ftentidentifier:this.props.contextArgs.ftentidentifier});if(t()){var ba=aa.trim().length>0;if(ba){this._attemptPublishStartEvent();}else this._attemptPublishStopEvent();}if(this.props.allowCommentMarkdown)this._sendMarkdownUpdate(aa);},_sendMarkdownUpdate:function z(aa){var ba=c('XUFICommentMarkdownPreviewController').getURIBuilder().setString('comment_body',aa).getURI();new (c('AsyncRequest'))(ba).setHandler(this._handleMarkdownUpdate).send();},_handleMarkdownUpdate:function z(aa){if(!aa)return;this.setState({commentMarkdownPreviewContent:aa.payload?aa.payload.markup:null});},_handleUnsavedChanges:function z(){var aa=b.PageTransitions;if(aa){var ba=c('URI').getNextURI(),ca=aa.getMostRecentURI();if(ba.getQueryData().hasOwnProperty('theater')||ca.getQueryData().hasOwnProperty('theater')||ba.getQueryData().hasOwnProperty('sdialog')||c('SnowflakePermalinkUtils').isPermalinkURI(ba)||c('SnowflakePermalinkUtils').isPermalinkURI(ca))return;var da=b.DialogNavigationStack;if(da&&da.isActiveURI(ba))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return i._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function z(){this.setState({markdownNUXVisible:false,stickerNUXVisible:false,videosInCommentsNUXVisible:false});setTimeout(function(){if(this.isMounted())this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function z(event){var aa=new (c('ClipboardPhotoUploader'))(p,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[aa.subscribe('upload_start',this._prepareForAttachedPhotoPreview),aa.subscribe('upload_error',this._onRemoveAttachedMediaPreviewClicked),aa.subscribe('upload_success',function(ba,ca){this._onPhotoUploadComplete(ca);}.bind(this))];aa.handlePaste(event);},_onEnterSubmit:function z(aa,event){var ba=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedSticker,ca=this.props.isEditing||ba;if(this.state.isLoadingPhoto||this._isLoadingVideo()){return false;}else if(!aa.encodedValue.trim()&&!ca)return false;aa.encodedValue=aa.encodedValue.trim();if(this.state.commentMarkdownEnabled){aa.isMarkdown=true;this.setState({commentMarkdownEnabled:false,commentMarkdownPreviewContent:null});}if(ba){aa.attachedPhoto=this.state.attachedPhoto;aa.attachedVideo=this.state.attachedVideo;aa.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedVideo:null,attachedSticker:null});}else{aa.attachedPhoto=null;aa.attachedVideo=null;aa.attachedSticker=null;}if(this.props.isEditing){this.context.dispatch(c('UFIAddCommentAction').submitEdit(this.props.contextArgs,this.props.editingComment,aa,event.target));}else this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,aa,event.target,this.props.replyCommentID));this._attemptPublishStopEvent();return true;},_isLoadingVideo:function z(){return this.state.videoStatus===u.UPLOAD||this.state.videoStatus===u.ENCODE&&this.state.videoProgress!==100;},_cancelCurrentSubscriptions:function z(){if(this._subscriptions)this._subscriptions.forEach(function(aa){aa.unsubscribe();});},_getFeedbackTarget:function z(aa){return aa.contextArgs.ftentidentifier;},_initTypingEventController:function z(){if(!this._typingEventController&&t())this._typingEventController=new (c('UFIAddCommentLiveTypingController'))(this._getFeedbackTarget(this.props),this.props.replyCommentID,this.props.viewerActorID);},_attemptPublishStartEvent:function z(){if(!t())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStartEvent();},_attemptPublishStopEvent:function z(){if(!t())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStopEvent();},componentWillMount:function z(){this._typingEventController=null;this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=c('LitestandStoryInsertionStatus').registerBlocker(function(){return this.state.isCommenting;}.bind(this));},_destroyLiveTypingController:function z(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function z(aa){var ba=this._getFeedbackTarget(this.props),ca=this._getFeedbackTarget(aa);if(ca!==ba||this.props.replyCommentID!==aa.replyCommentID||this.props.viewerActorID!==aa.viewerActorID)this._destroyLiveTypingController();},componentWillUnmount:function z(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)c('Arbiter').unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)c('Arbiter').unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._destroyLiveTypingController();},focus:function z(){var aa={isCommenting:true,isFocused:true},ba=this.props.contextArgs.loggedOutLinkConfig;if(ba&&ba.showAddComment)c('Bootloader').loadModules(["AsyncDialog"],function(da){da.bootstrap(ba.addCommentAjaxifyURI,null,'dialog');},'UFIAddComment.react');if(this.props.allowStickerAttachments&&c('UFIConfig').shouldShowStickerNUX)if(!v){v=true;var ca=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ca).send();aa.stickerNUXVisible=true;}if(this.props.allowVideoAttachments&&c('UFIConfig').shouldShowVideosInCommentsNux&&!c('UFIConfig').shouldShowStickerNUX)if(!w){w=true;ca=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','video_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ca).send();aa.videosInCommentsNUXVisible=true;}if(this.props.allowCommentMarkdown&&c('UFIConfig').shouldShowMarkdownCommentNUX&&!c('UFIConfig').shouldShowVideosInCommentsNux&&!c('UFIConfig').shouldShowStickerNUX)if(!x){x=true;ca=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','markdown_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ca).send();aa.markdownNUXVisible=true;}this.setState(aa);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();if(this.props.onFocus)this.props.onFocus();},_renderStickerNUX:function z(){if(this.state.stickerNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.sticker_button;}.bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},i._("You can now comment with a sticker!")));return null;},_renderVideoInCommentsNUX:function z(){if(this.state.videosInCommentsNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.media_section;}.bind(this),shown:this.state.videosInCommentsNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hidevideosInCommentsNUX},i._("You can now add videos to comments")));return null;},_renderMarkdownCommentsNUX:function z(){if(this.state.markdownNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.markdownButton;}.bind(this),shown:this.state.markdownNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideMarkdownCommentsNUX},i._("[FB-Only] Markdown in Comments! Click to enable.")));return null;},_setFileInput:function z(aa,ba){this.setState({fileInput:aa,fileUploader:ba});},render:function z(){var aa=this.props.contextArgs.loggedOutLinkConfig,ba=true;if(aa&&aa.showAddComment)ba=false;var ca=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&ba&&!this.props.contextArgs.hideActorPhoto,da=null;if(this.props.subtitle){da=c('React').createElement('span',{className:n},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){da=c('React').createElement('span',{className:n},i._("{cancel}",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs)));}.bind(this)},i._("Cancel")))]));}else if(this.props.isEditing){da=c('React').createElement('span',{className:n},i._("Press Esc to {cancel}.",[i.param('cancel',c('React').createElement(c('Link.react'),{onMouseDown:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel(this.props.contextArgs)));}.bind(this)},i._("cancel")))]));}else if(this.props.multiCompanyGroupsCount&&this.state.isFocused){da=c('React').createElement('div',{className:"fcg fsm _2pid"},c('React').createElement(c('Badge.react'),{key:'noncoworker',type:'work_non_coworker'}),c('React').createElement('span',{className:"_2pir _4zk5"},i._({"*":"People from {number} companies will see this.","268435456":"People from 1 company will see this."},[i.plural(this.props.multiCompanyGroupsCount,'number')])));}else if(this.props.showSendOnEnterTip)da=c('React').createElement('span',{className:n},i._("Press Enter to post."));var ea=null,fa=null,ga=null,ha=null,ia=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo,ja=null,ka=null;if(this.props.allowCommentMarkdown)ha=c('React').createElement(c('UFIMarkdownButton.react'),{active:this.state.commentMarkdownEnabled,ref:'markdownButton',onClick:function(){this.setState({commentMarkdownEnabled:!this.state.commentMarkdownEnabled});}.bind(this)});if(this.props.allowStickerAttachments&&!ia)fa=c('React').createElement(c('UFIStickerButton.react'),{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText,onStickerFlyoutShow:function(){c('Arbiter').inform('comment_content_change',{addingAttachment:true});if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowGifAttachments&&!ia)ga=c('React').createElement(c('UFIGifButton.react'),{ref:'gif_button',onGifSelected:this.onGifSelected,onGifFlyoutShow:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowTipJar)ka=c('React').createElement(c('UFITipJarButton.react'),null);if(this.props.allowPhotoAttachments||this.props.allowVideoAttachments){ja=this._onPaste;ea=c('React').createElement(c('UFIAttachMediaSection.react'),{ref:'media_section',getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,prepareForAttachedVideoPreview:this._prepareForAttachedVideoPreview,allowVideoAttachments:this.props.allowVideoAttachments,onPhotoUploadComplete:this._onPhotoUploadComplete,onVideoUploadComplete:this._onVideoUploadComplete,onVideoEncodeUpdate:this._onVideoEncodeUpdate,onVideoUploadUpdate:this._onVideoUploadUpdate,setFileInput:this._setFileInput,targetId:this.props.targetID,onClick:function(){c('Arbiter').inform('comment_content_change',{addingAttachment:true});if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this),attachment:ia,viewerActorID:this.props.viewerActorID});}var la=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.ADD_COMMENT_BOX),ma='addComment_'+this.props.contextArgs.ftentidentifier,na;if(!!this.props.replyCommentID){na=m;}else if(this.props.isQAndA){na=i._("Ask a question...");}else na=l;var oa=this.props.contextArgs.viewoptionstypeobjects,pa=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)da=null;var qa;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===u.UPLOAD||this.state.attachedSticker)qa=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIAttachedMediaPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedSticker:this.state.attachedSticker,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this._onRemoveAttachedMediaPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress});var ra=this.props.contextArgs.mentionsinput,sa=ra.inputComponent,ta=ra.viewComponent,ua=ra.viewProps,va=this.props.editingComment.body,wa=va?c('MentionsInputUtils').generateDataFromTextWithEntities(va):null,xa=c('UFIInstanceState').getKeyForInstance(this.props.contextArgs.instanceid,'inCommercialBreak'),ya=null;if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)ya=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFICommentMarkdownPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),markup:this.state.commentMarkdownPreviewContent});var za=c('React').createElement('div',{className:'UFICommentContainer'},c('React').createElement('div',{className:'UFIInputContainer'},c('React').createElement(sa,{disableInitTextarea:!ba,replyCommentID:this.props.replyCommentID,initialData:wa,placeholder:na,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:ta,viewProps:ua,viewOptionsTypeObjects:oa,viewOptionsTypeObjectsOrder:pa,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:c('UFIConfig').showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:this._onContentChange,onPaste:ja,ftEntIdentifier:this.props.contextArgs.ftentidentifier,instanceID:this.props.contextArgs.instanceid}),c('React').createElement('div',{className:"UFICommentAttachmentButtons"},ha,ea,ga,fa,ka)),ya,qa,da);if(ca)za=c('React').createElement(c('UFIImageBlock.react'),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?' '+"UFIStickersEnabledInput":'')+(this.props.allowCommentMarkdown?' '+"UFIMarkdownEnabledInput":'')+(this.props.allowGifAttachments?' '+"UFIGifEnabledInput":'')},c('React').createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},c('React').createElement(c('UFIActorIconContainer.react'),{actorID:this.props.viewerActorID})),za);return (c('React').createElement('div',{id:ma,className:c('joinClasses')("UFIRow"+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(xa?' '+"hidden_elem":''),this.props.className),onKeyDown:this._onKeyDown,'data-ft':la},za,this._renderStickerNUX(),this._renderVideoInCommentsNUX(),this._renderMarkdownCommentsNUX()));},componentDidUpdate:function z(aa,ba,ca){if(!ba.attachedPhoto&&this.state.attachedPhoto||!ba.attachedSticker&&this.state.attachedSticker||!ba.attachedVideo&&this.state.attachedVideo||!ba.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(aa.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedMediaPreviewClicked();}},componentDidMount:function z(){this._sendMarkdownUpdate=c('throttle')(this._sendMarkdownUpdate,r,this);if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=c('Arbiter').subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,function(aa){this.refs.mentionsinput.focus();}.bind(this));if(this.props.contextArgs.issnowlift)this._remixedImageToken=c('Arbiter').subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,function(aa,ba){var event={clipboardData:{items:[ba]}};this._onPaste(event);}.bind(this));}},insertMention:function z(aa){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(aa);},_getPhotoUploadData:function z(){var aa=this.props.viewerActorID,ba={profile_id:aa,target_id:this.props.targetID,source:o};ba[c('ActorURI').PARAMETER_ACTOR]=aa;return ba;},_onPhotoUploadComplete:function z(aa){if(!this.state.isLoadingPhoto)return;var ba=aa.getPayload();if(ba&&ba.fbid){this.setState({attachedPhoto:ba,isLoadingPhoto:false});}else this._onRemoveAttachedMediaPreviewClicked(null);},_onVideoEncodeUpdate:function z(aa,ba){if(!this.state.attachedVideo||this.state.videoStatus!==u.ENCODE)return;if(ba.obj.progress<this.state.videoProgress)return;ba.obj.fbid=ba.obj.videoID;this.setState({attachedVideo:ba.obj,videoProgress:ba.obj.progress,videoStatus:u.ENCODE});if(this._isEncodingFinished(ba.obj.stage))this._onEncodeComplete();},_onVideoUploadUpdate:function z(aa){this.setState({videoProgress:aa});},_isEncodingFinished:function z(aa){return aa==='finish';},_onEncodeComplete:function z(){this.state.fileInput.clear();},_onVideoUploadComplete:function z(aa){if(this.state.videoStatus!==u.UPLOAD)return;if(aa&&aa.video_id)this.setState({videoProgress:0,attachedVideo:aa,videoStatus:u.ENCODE});},_onRemoveAttachedMediaPreviewClicked:function z(event){c('Arbiter').inform('video_upload_cancel',{});if(this.state.fileInput)this.state.fileInput.clear();this.setState({attachedPhoto:null,attachedVideo:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:false,videoProgress:0});},_prepareForAttachedPhotoPreview:function z(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_prepareForAttachedVideoPreview:function z(){var aa,ba=this.state.fileInput.input.files[0];if(ba&&j.createObjectURL)aa=j.createObjectURL(ba);this.setState({attachedVideo:null,videoStatus:u.UPLOAD,videoFileURL:aa,videoProgress:0});},_onStickerUploadComplete:function z(aa){if(!this.state.isLoadingPhoto)return;var ba=aa.getPayload();if(ba&&ba.fbid){this.setState({attachedSticker:ba,isLoadingPhoto:false});}else{c('Bootloader').loadModules(["Dialog"],function(ca){var da=i._("Sticker Failed"),ea=i._("There was a problem with attaching the sticker.");new ca().setTitle(da).setBody(ea).setButtons(ca.OK).show();},'UFIAddComment.react');this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function z(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function z(aa,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()||c('UFIConfig').alwaysPreviewSticker){this._prepareForAttachedStickerPreview(aa);return;}this.sendSticker(aa,event);},_prepareForAttachedStickerPreview:function z(aa){this.setState({attachedSticker:null,isLoadingPhoto:true});new (c('AsyncRequest'))(q).setData({sticker_id:aa}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function z(aa,event){var ba={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:aa}};this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,ba,event.target,this.props.replyCommentID));},_insertEmoticonIntoCommentText:function z(aa){c('Bootloader').loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(ba,ca,da,ea){var fa=ba.symbols[aa];if(!fa)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(fa);return;}if(!this._selectionPosition)this._selectionPosition=new ea(c('ReactDOM').findDOMNode(this.refs.mentionsinput.refs.textarea));var ga=this.refs.mentionsinput.refs.getTextFieldDOM(),ha=da.getInstance(ga),ia=ha.getValue(),ja=ca.insertEmoticon(fa,ia,this._selectionPosition.getPos());ha.setValue(ja.result);this._selectionPosition.setPos(ja.start,ja.end);}.bind(this),'UFIAddComment.react');},_hideStickerNUX:function z(){this.setState({stickerNUXVisible:false});},_hidevideosInCommentsNUX:function z(){this.setState({videosInCommentsNUXVisible:false});},_hideMarkdownCommentsNUX:function z(){this.setState({markdownNUXVisible:false});},onGifSelected:function z(aa){var ba={encodedValue:'',visibleValue:'',externalImageUrl:aa.source.url};this.context.dispatch(c('UFIAddCommentAction').submitNew(this.props.contextArgs,ba,null,this.props.replyCommentID));}});f.exports=y;}),null);
__d('UFIAddCommentLink.react',['cx','fbt','React','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=c('joinClasses')("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o;if(this.props.isQAndA){o=i._("Ask a question...");}else o=i._("Write a comment...");return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},o)));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={'data-ft':l.string,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isQAndA:l.bool,onClick:l.func};f.exports=m;}),null);
__d('PublicConversationsUnicornTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PublicConversationsUnicornLoggerConfig',this.$PublicConversationsUnicornTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PublicConversationsUnicornLoggerConfig',this.$PublicConversationsUnicornTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PublicConversationsUnicornTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PublicConversationsUnicornTypedLogger1=babelHelpers['extends']({},this.$PublicConversationsUnicornTypedLogger1,j);return this;};h.prototype.setCommentFbid=function(j){this.$PublicConversationsUnicornTypedLogger1.comment_fbid=j;return this;};h.prototype.setVC=function(j){this.$PublicConversationsUnicornTypedLogger1.vc=j;return this;};var i={comment_fbid:true,vc:true};f.exports=h;}),null);
__d('UFICommentLikeCount.react',['cx','fbt','ActorURI','NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','UFIConfig','URI'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=function o(p,q,r){var s=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:p.fbid,comment_from:p.author,comment_likecount:p.likecount||0,comment_id:p.id,cache_buster:p.likeconfirmhash||0});if(q)s.addQueryData({viewas:q});return c('ActorURI').create(s,r);};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){var o=this.props.comment,p=o.likecount||0,q=c('NumberFormat').formatIntegerWithDelimiter(p,c('UFIConfig').numberDelimiter),r=i._({"*":"{number} Likes","268435456":"1 Like"},[i.plural(p,'number')]),s=c('ProfileBrowserTypes').LIKES,t={id:o.fbid},u=m(this.props.comment,this.props.contextArgs.viewas,this.props.actorForPost),v=c('React').createElement('span',{className:"UFICommentReactionIconContainer"},c('React').createElement('i',{className:"_3j7l _2p78 _9-y"})),w=c('React').createElement('span',null,q),x="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),y=c('ProfileBrowserLink').constructDialogURI(s,t).toString(),z=c('ProfileBrowserLink').constructPageURI(s,t).toString(),aa='dialog',ba=this.props.contextArgs.loggedOutLinkConfig;if(ba&&ba.showLikeLink){y=ba.likeAjaxifyURI;z='#';}return (c('React').createElement('a',{ajaxify:y,'aria-label':r,className:x,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':u.toString(),href:z,rel:aa,role:'button'},v,w));};function n(){j.apply(this,arguments);}n.propTypes={actorForPost:l.string,comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=n;}),null);
__d('addFocusEvents',['Deferred','Event','React','SubscriptionList'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').Component,i=void 0,j=function(k){return function(){var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){'use strict';if(!i){var o,p;i=new (c('SubscriptionList'))(function(){o=c('Event').listen(window,'blur',function(){i&&i.fireCallbacks(true);p&&p.remove();p=c('Event').listen(document.documentElement,'focusin',function(){i&&i.fireCallbacks(false);p&&p.remove();p=null;});});},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null;});}this.subscription=i.add(function(q){this.locked=q;}.bind(this));};n.prototype.componentWillUnmount=function(){'use strict';this.subscription&&this.subscription.remove();};n.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};n.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new (c('Deferred'))();this.deferred.done(function(o){o&&o(event);this.deferred=null;}.bind(this),function(){this.deferred=null;}.bind(this));};n.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};n.prototype.render=function(){'use strict';var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,['onKeyboardFocus','onMouseFocus']);return (c('React').createElement(k,babelHelpers['extends']({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)})));};function n(){'use strict';l.apply(this,arguments);}return n;}();}.bind(this);f.exports=j;}),null);
__d('UFIReactionsLinkImpl.react',['cx','fbt','BanzaiLogger','BootloadedComponent.react','Bootloader','Deferred','Event','JSResource','React','ReactDOM','ReactionNuxTypeEnum','SubscriptionsHandler','UFIConfig','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionTypes','UFICommentAction','UFIStoryAction','addFocusEvents','shallowCompare'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('UFIConfig').reactionsFunnelLogger,n=false,o=false,p=null,q=c('React').createElement('div',null),r=150,s=c('UFIReactionTypes').reactions,t=Object.keys(s),u=20,v=525,w=750,x=500,y='ontouchstart' in window,z=i._("Show More Reactions"),aa=new (c('Deferred'))(),ba=function fa(){if(!p){var ga=function ha(ia){p=ia;if(aa){aa.done(ca,ca);aa.resolve();}};if(c('UFIConfig').reactionsHasAnimatedIconsOnHover){c('Bootloader').loadModules(["UFIReactionsMenuWithAnimatedVectorIcons.react"],ga,'UFIReactionsLinkImpl.react');}else if(c('UFIConfig').reactionsHasStaticVectorDock){c('Bootloader').loadModules(["UFIReactionsMenuWithStaticVectorIcons.react"],ga,'UFIReactionsLinkImpl.react');}else c('Bootloader').loadModules(["UFIReactionsMenuImpl.react"],ga,'UFIReactionsLinkImpl.react');}},ca=function fa(){aa=null;},da=c('addFocusEvents')('a');j=babelHelpers.inherits(ea,c('React').Component);k=j&&j.prototype;function ea(fa,ga){'use strict';k.constructor.call(this,fa,ga);this.hideDialog=function(){this.setState({dialogShown:false,isScrubbing:false});}.bind(this);this.showDialog=function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown&&m)m.menuShow();n=true;this.setState({dialogShown:true,NUXShown:false});}.bind(this);this.onClick=function(event){var ha=this.props,ia=ha.reaction,ja=ha.suggestedReaction;if(!ia||ia===c('UFIReactionTypes').LIKE||!s[ia]){if(!ia&&this.props.nuxConfig){var ka=this.props.nuxConfig.nuxType;if(ka===c('ReactionNuxTypeEnum').LIKE_CLICK||ka===c('ReactionNuxTypeEnum').LIKE_CLICK_RENUX)this.maybeShowNUX();}var la=ja&&this.hasSuggestedReaction?ja:c('UFIReactionTypes').LIKE;ia=ia?c('UFIReactionTypes').NONE:la;this.onReactionChange(ia,event);this.$UFIReactionsLink1(ia,true);}else this.onReactionChange(0,event);this.setState({dialogShown:false,isMouseOver:false,isScrubbing:false});}.bind(this);this.onClickCapture=function(event){event.stopPropagation();this.setState({isLongPressing:false});}.bind(this);this.onContextMenu=function(event){if(this.state.isTouchDown)event.preventDefault();}.bind(this);this.onDragStart=function(event){event.preventDefault();};this.onMouseDown=function(event){clearTimeout(this.hoverTimeout);}.bind(this);this.onMouseEnter=function(event){clearTimeout(this.hoverTimeout);if(!this.state.dialogShown)this.hoverTimeout=setTimeout(this.showDialog,v);this.setState({isMouseOver:true});ba();if(!this.state.dialogShown&&m)this.logFunnelTimeout=setTimeout(function(){return m.likeButtonEnter(this.props.reaction);}.bind(this),r);}.bind(this);this.onMouseLeave=function(event){clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);if(this.state.dialogShown)this.hoverTimeout=setTimeout(this.hideDialog,w);this.setState({isMouseOver:false});}.bind(this);this.onReactionMenuMouseEnter=function(event){clearTimeout(this.hoverTimeout);}.bind(this);this.onTouchStart=function(event){if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true});}.bind(this),x);ba();}this.setState({isTouchDown:true,isLongPressing:false});}.bind(this);this.onTouchEnd=function(event){if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false});}.bind(this);this.onTouchMove=function(event){if(this.state.isScrubbing)return;var ha=event.touches[0],ia=ha.clientX,ja=ha.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=ia;this.dragStartY=ja;return;}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX>ia+u||this.dragStartX<ia-u||this.dragStartY>ja+u||this.dragStartY<ja-u))this.setState({isScrubbing:true});}.bind(this);this.onReactionChange=function(ha,event){this.$UFIReactionsLink1(ha);var ia=c('ReactDOM').findDOMNode(this.refs.trigger);if(m)event.target===ia?m.likeButtonClick(ha):m.reactionSelection(ha);var ja=void 0;if(this.props.comment){ja=c('UFICommentAction').changeReaction(this.props.contextArgs,this.props.comment,ha,ia);}else ja=c('UFIStoryAction').changeReaction(this.props.contextArgs,ha,ia);this.context.dispatch(ja);this.setState({dialogShown:false,isScrubbing:false});}.bind(this);this.onReactionMouseEnter=function(ha,event){if(this.reactionsHoverStartTimeMap[ha]===0)this.reactionsHoverStartTimeMap[ha]=Date.now();}.bind(this);this.onReactionMouseLeave=function(ha,event){if(this.reactionsHoverStartTimeMap[ha]){this.reactionsHoverTotalTimeMap[ha]+=Date.now()-this.reactionsHoverStartTimeMap[ha];this.reactionsHoverStartTimeMap[ha]=0;}}.bind(this);this.onKeyboardFocus=function(){this.allowKeyboardFocus=true;this.showDialog();}.bind(this);this.onScreenReaderTrigger=function(){o=true;this.allowKeyboardFocus=true;this.showDialog();}.bind(this);this.dragStartX=null;this.dragStartY=null;this.hasSuggestedReaction=c('UFIConfig').reactionsHasSuggestedReaction;this.subscriptionsHandler=new (c('SubscriptionsHandler'))();y;if(aa)aa.done(function(){this.forceUpdate();}.bind(this),function(){aa=null;});this.state={dialogShown:false,isLongPressing:false,isMouseOver:false,isScrubbing:false,isTouchDown:false,NUXShown:false};}ea.prototype.shouldComponentUpdate=function(fa,ga){'use strict';return c('shallowCompare')(this,fa,ga);};ea.prototype.componentWillUpdate=function(fa,ga){'use strict';if(this.state.dialogShown&&!ga.dialogShown)this.$UFIReactionsLink1(this.props.reaction);};ea.prototype.componentDidUpdate=function(fa,ga){'use strict';if(!ga.dialogShown&&this.state.dialogShown){if(y){var ha;this.subscriptionsHandler.addSubscriptions(c('Event').listen(document.documentElement,'touchstart',function(event){ha=event.touches[0];}),c('Event').listen(document.documentElement,'touchmove',function(event){ha=event.touches[0];}),c('Event').listen(document.documentElement,'touchend',function(event){if(ha&&!this.refs.root.contains(document.elementFromPoint(ha.clientX,ha.clientY)))this.setState({dialogShown:false,isScrubbing:false});}.bind(this)));}}else if(ga.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}};ea.prototype.componentDidMount=function(){'use strict';this.$UFIReactionsLink2();};ea.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();aa&&aa.reject();};ea.prototype.maybeShowNUX=function(){'use strict';if(!n){n=true;this.setState({NUXShown:true,dialogShown:false});c('BanzaiLogger').log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.contextArgs.ftentidentifier,'interface':'www'});}};ea.prototype.renderMenu=function(){'use strict';if(this.state.dialogShown)ba();if(!p)return null;var fa=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return (c('React').createElement(p,{allowKeyboardFocus:fa,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:o,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,suggestedReaction:this.props.suggestedReaction,supportedReactions:this.props.supportedReactions}));};ea.prototype.renderTrigger=function(){'use strict';var fa=this.props,ga=fa.reaction,ha=fa.suggestedReaction;if(ga&&!s[ga])ga=null;var ia=ga?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,ja=void 0,ka=void 0,la=void 0,ma=void 0;if(this.props.comment){if(!ga){ja=s[c('UFIReactionTypes').LIKE].display_name;}else ja=s[ga].display_name;la="UFILikeLink"+(' '+"UFIReactionLink")+(ga?' '+"UFILinkBright":'');ma=ga?s[ga].color:null;}else{if(!ga){ja=ha&&this.hasSuggestedReaction?s[ha].display_name:s[c('UFIReactionTypes').LIKE].display_name;}else ja=s[ga].display_name;if(ga&&ga!=c('UFIReactionTypes').LIKE||!ga&&ha&&this.hasSuggestedReaction&&ha!=c('UFIReactionTypes').LIKE)ka=c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_1ktw",grayscale:!ga&&!!ha,reaction:ga||ha,size:'13'});la="UFILikeLink"+(' '+"_4x9-")+(' '+"_4x9_")+(!ka?' '+"_48-k":'')+(ga?' '+"UFILinkBright":'');ma=ga?s[ga].color:null;}return (c('React').createElement(da,{'aria-pressed':!!ga,className:la,'data-testid':ia,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:p?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:y?this.onTouchEnd:null,onTouchMove:y?this.onTouchMove:null,onTouchStart:y?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:ma},tabIndex:p?-1:0},ka,ja));};ea.prototype.renderNUX=function(){'use strict';var fa=c('ReactDOM').findDOMNode(this.refs.root);if(!this.state.NUXShown||!fa)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:q,bootloadLoader:c('JSResource')('UFIReactionsNUX.react').__setRef('UFIReactionsLinkImpl.react'),context:fa,titleOverride:this.props.nuxConfig&&this.props.nuxConfig.titleOverride,textOverride:this.props.nuxConfig&&this.props.nuxConfig.textOverride,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey}));};ea.prototype.renderScreenReaderTrigger=function(){'use strict';if(p)return null;return (c('React').createElement('span',{role:'button',className:'accessible_elem',onClick:this.onScreenReaderTrigger,tabIndex:-1,'data-accessibilityid':'virtual_cursor_trigger'},z));};ea.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_khz"+(this.state.isScrubbing?' '+"_4bdq":''),ref:'root'},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX()));};ea.prototype.$UFIReactionsLink2=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};t.forEach(function(fa){this.reactionsHoverStartTimeMap[fa]=0;this.reactionsHoverTotalTimeMap[fa]=0;}.bind(this));};ea.prototype.$UFIReactionsLink1=function(fa,ga){'use strict';if(this.dialogShownTime!==0){var ha={feedback_id:this.props.contextArgs.ftentidentifier,final_reaction:fa,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:ga,time_spent:Date.now()-this.dialogShownTime};for(var ia in this.reactionsHoverTotalTimeMap){var ja='time_spent_'+s[ia].name.toLowerCase();ha[ja]=this.reactionsHoverTotalTimeMap[ia];}c('BanzaiLogger').log('UserReactionsLoggerConfig',ha);this.$UFIReactionsLink2();}};ea.contextTypes={dispatch:l.func};ea.propTypes={contextArgs:l.object,nuxConfig:l.object,reaction:l.number.isRequired,comment:l.object,supportedReactions:l.arrayOf(l.number).isRequired};f.exports=ea;}),null);
__d('UFICommentLikeLink.react',['fbt','React','ReactionNuxTypeEnum','TrackingNodes','UFICommentAction','UFIConfig','UFIReactionsLinkImpl.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l='ufi_comment_like_link',m='ufi_reply_like_link';i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;n.getCanRender=function(o){return !!(o&&(o.canviewerreact||o.viewercanlike||o.hasviewerliked));};n.prototype.render=function(){var o=this.props.comment,p=this.props.feedback,q=this.props.contextArgs;if(!this.constructor.getCanRender(o))return null;if(o.canviewerreact){return this.$UFICommentLikeLink1(o,p,q);}else if(o.viewercanlike||o.hasviewerliked)return this.$UFICommentLikeLink2(o,p,q);return null;};n.prototype.$UFICommentLikeLink1=function(o,p,q){var r=null;if(c('UFIConfig').reactionsHasCommentsNux)r={nuxKey:'reactions_comments',titleOverride:h._("New! React to a comment"),textOverride:h._("Hover over the Like link to see all reactions."),nuxType:c('ReactionNuxTypeEnum').LIKE_CLICK};return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{contextArgs:babelHelpers['extends']({},q,{ftentidentifier:o.id}),comment:o,nuxConfig:r,reaction:o.viewerreaction,supportedReactions:p.supportedreactions}));};n.prototype.$UFICommentLikeLink2=function(o,p,q){var r=q.loggedOutLinkConfig,s=c('TrackingNodes').getTrackingInfo(o.hasviewerliked?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),t=o.hasviewerliked?h._("Unlike this comment"):h._("Like this comment"),u=o.parentcommentid?m:l,v=!o.hasviewerliked||r?h._("Like"):h._("Unlike"),w=null,x=null;if(r&&r.showLikeLink){w='dialog';x=r.likeAjaxifyURI;}return (c('React').createElement('a',{className:'UFILikeLink','data-ft':s,'data-testid':u,href:'#',rel:w,ajaxify:x,onClick:function(event){return this.context.dispatch(c('UFICommentAction').toggleLike(q,o,event.target));}.bind(this),role:'button',title:t},v));};function n(){i.apply(this,arguments);}n.propTypes={comment:k.object.isRequired,contextArgs:k.object.isRequired,feedback:k.object.isRequired};n.contextTypes={dispatch:k.func};f.exports=n;}),null);
__d("XUFIReactionProfileBrowserController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});}),null);
__d("XUFIReactionProfileDialogController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('UFIReactionsProfileBrowserUtils',['ActorURI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getDialogURI:function i(j,k){return c('ActorURI').create(c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',j.entidentifier).setEnum('reaction_type',k).getURI(),j.actorforpost);},getPageURI:function i(j){return c('ActorURI').create(c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',j.entidentifier).getURI(),j.actorforpost);}};f.exports=h;}),null);
__d('sortReactionTypes',['UFIReactionTypes'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};c('UFIReactionTypes').ordering.forEach(function(j,k){h[j]=k;});function i(j,k){return Object.keys(j).map(function(l){return Number(l);}).sort(function(l,m){if(k&&l===c('UFIReactionTypes').LIKE)return -1;if(j[l]['default']===j[m]['default'])return h[l]-h[m];return j[m]['default']-j[l]['default'];});}f.exports=i;}),null);
__d('UFIReactionsBlingTokens.react',['cx','fbt','Bootloader','BanzaiLogger','Event','RTLKeys','React','ReactDOM','UFICommentAction','UFIConfig','UFIReactionIconImpl.react','UFIReactionTypes','UFIReactionsProfileBrowserUtils','UFIStoryAction','joinClasses','sortReactionTypes'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=null,n=300;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(q,r){'use strict';k.constructor.call(this,q,r);p.call(this);this.renderToken=this.renderToken.bind(this);this.state={active:null,pressed:null,selectedIndex:-1,reactionTypes:this.getReactionTypes(q.feedback.reactioncountmap,q.max)};}o.prototype.componentDidUpdate=function(){'use strict';if(this.state.selectedIndex>-1)c('ReactDOM').findDOMNode(this.refs[this.state.selectedIndex]).focus();};o.prototype.componentWillReceiveProps=function(q){'use strict';if(q.feedback.reactioncount!==this.props.feedback.reactioncount)this.setState({active:null});this.setState({reactionTypes:this.getReactionTypes(q.feedback.reactioncountmap,q.max)});};o.prototype.getReactionTypes=function(q,r){'use strict';var s=c('sortReactionTypes')(q,false).filter(function(t){return (c('UFIReactionTypes').reactions[t]&&q[t]['default']);});if(r)s=s.slice(0,r);return s;};o.prototype.onMouseEnter=function(q){'use strict';if(!m)c('Bootloader').loadModules(["UFIReactionsTooltipImpl.react"],function(r){m=r;this.forceUpdate();}.bind(this),'UFIReactionsBlingTokens.react');this.setState({active:q});};o.prototype.onTokenClick=function(q,r,event){var s,t=this,u;'use strict';var v=this.props,w=v.contextArgs,x=v.feedback,y=event.currentTarget,z=c('UFIReactionTypes').reactions[q]&&c('UFIReactionTypes').reactions[q].name;if(r){(function(){t.setState({pressed:q});var aa=t.props.feedback.viewerreaction;if(aa===q)q=c('UFIReactionTypes').NONE;var ba=void 0;if(t.props.comment){ba=c('UFICommentAction').changeReaction(w,t.props.comment,q,event.target);}else ba=c('UFIStoryAction').changeReaction(w,q,event.target);setTimeout(function(){this.context.dispatch(ba);this.setState({pressed:null});}.bind(t),n);})();}else (function(){var aa=c('UFIReactionsProfileBrowserUtils').getDialogURI(x,q);c('Bootloader').loadModules(["AsyncDialog"],function(ba){ba.bootstrap(aa.toString(),y,'dialog');},'UFIReactionsBlingTokens.react');event.preventDefault();})();c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'token',target_subtype:z});};o.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:c('joinClasses')("_3t53",this.props.className)},c('React').createElement('span',{'aria-label':i._("See who reacted to this"),className:"_3t54",onFocus:this.onFocus,onKeyDown:this.onKeyDown,ref:'tokens',role:'toolbar',tabIndex:this.state.selectedIndex>-1?-1:0},this.state.reactionTypes.map(this.renderToken,this)),this.props.children));};var p=function q(){this.onFocusIn=function(event){if(!this.refs.tokens.contains(event.target)){this.setState({selectedIndex:-1});if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}}}.bind(this);this.onFocus=function(event){if(event.target===this.refs.tokens){this.setState({selectedIndex:0});if(!this.focusInListener)this.focusInListener=c('Event').listen(document.documentElement,'focusin',this.onFocusIn);}}.bind(this);this.onKeyDown=function(event){switch(event.keyCode){case c('RTLKeys').RETURN:if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}break;case c('RTLKeys').TAB:this.setState({selectedIndex:0});break;case c('RTLKeys').getLeft():case c('RTLKeys').getRight():event.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(event.keyCode===c('RTLKeys').getLeft()?-1:1),this.state.reactionTypes.length-1))});break;}}.bind(this);this.renderToken=function(r,s){var t=this.props.feedback,u=i._("{reduced_count} {reaction_type}",[i.param('reduced_count',t.reactioncountmap[r].reduced),i.param('reaction_type',c('UFIReactionTypes').reactions[r].display_name)]),v=!this.props.comment&&c('UFIConfig').reactionsHasDirectReactTokens,w=t.supportedreactions&&t.supportedreactions.indexOf(r)>=0,x={'aria-label':u,className:"_27jf"+(' '+"_3emk")+(this.props.size==='13'?' '+"_26lk":'')+(v&&w?' '+"_1d4l":'')+(this.state.pressed===r?' '+"_1h_u":''),href:v?null:c('UFIReactionsProfileBrowserUtils').getPageURI(t),key:'reactionType-'+r,onClick:w?this.onTokenClick.bind(this,r,v):null,rel:'ignore',ref:s,role:'button',tabIndex:this.state.selectedIndex===s?0:-1},y=c('React').createElement(c('UFIReactionIconImpl.react'),{size:this.props.size,className:"_4-op",reaction:r}),z=c('React').createElement('span',{className:"_3chu"},t.reactioncountmap[r].reduced);if(v)return c('React').createElement('a',babelHelpers['extends']({'data-hover':'tooltip','data-tooltip-content':c('UFIReactionTypes').reactions[r].display_name+' ('+t.reactioncountmap[r].reduced+')'},x),y,z);if(m)return c('React').createElement(m,babelHelpers['extends']({active:this.state.active===r,feedback:t,reaction:r},x),y,z);return c('React').createElement('a',babelHelpers['extends']({onMouseEnter:this.onMouseEnter.bind(this,r)},x),y,z);}.bind(this);};o.contextTypes={dispatch:l.func};o.propTypes={className:l.string,comment:l.object,contextArgs:l.object,hoistLike:l.bool,max:l.number,size:c('UFIReactionIconImpl.react').propTypes.size};o.defaultProps={className:null,hoistLike:false,size:'16'};f.exports=o;}),null);
__d("XUFIReactionTooltipController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}});}),null);
__d("XUFIReactionsSocialSentenceTooltipController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/sentence\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},user_count:{type:"Int"}});}),null);
__d('UFICommentReactionCount.react',['cx','fbt','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','ActorURI','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.comment,o={entidentifier:n.id,reactioncount:n.reactioncount,reactioncountmap:n.reactioncountmap,actorforpost:this.props.actorForPost,supportedreactions:this.props.supportedReactions},p="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),q=c('UFIReactionsProfileBrowserUtils').getDialogURI(o),r=c('UFIReactionsProfileBrowserUtils').getPageURI(o),s=c('ActorURI').create(c('XUFIReactionTooltipController').getURIBuilder().setString('ft_ent_identifier',n.id).setInt('user_count',n.reactioncount).getURI(),this.props.actorForPost),t=this.props.contextArgs.loggedOutLinkConfig;if(t&&t.showLikeLink){q=t.likeAjaxifyURI;r='#';}var u=n.reactioncountreduced;if(!c('UFIConfig').reactionsHasCommentsBling){s=c('ActorURI').create(c('XUFIReactionsSocialSentenceTooltipController').getURIBuilder().setString('ft_ent_identifier',n.id).setInt('user_count',n.reactioncount).getURI(),this.props.actorForPost);if(n.likecount===n.reactioncount){u=i._({"*":"{number} Likes","268435456":"1 Like"},[i.plural(n.reactioncount,'number',n.reactioncountreduced)]);}else u=i._({"*":"{number} reactions","268435456":"1 reaction"},[i.plural(n.reactioncount,'number',n.reactioncountreduced)]);}var v=c('React').createElement('a',{ajaxify:q,className:p,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':s.toString(),href:r,rel:'dialog',role:'button'},u);if(c('UFIConfig').reactionsHasCommentsBling)return (c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"UFICommentReactionsBling _4ar- _ipn",feedback:o,contextArgs:this.props.contextArgs,comment:this.props.comment,max:3,size:'13'},v));return v;};function m(){j.apply(this,arguments);}m.propTypes={actorForPost:l.string,comment:l.object.isRequired,contextArgs:l.object.isRequired,supportedReactions:l.array};f.exports=m;}),null);
__d("XVideoBroadcastPinnedCommentsController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/pinnedcomments\/",{});}),null);
__d('UFILivePinnedCommentLink.react',['cx','fbt','AsyncRequest','BanzaiODS','React','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','UFIVideoPlayerRegistry','XVideoBroadcastPinnedCommentsController','ifRequired'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onLinkClick=function(){var r=c('UFILivePinnedCommentStore').getPinnedCommentID(this.props.contextArgs.ftentidentifier);if(this.props.isPinned){c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(this.props.contextArgs));}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(this.props.contextArgs,this.props.commentID));var s=this.props.contextArgs.isBroadcasterUFI?c('ifRequired')('LiveVideoBroadcastBroadcastStore',function(u){return (u.getCurrentBroadcastTime());}):c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTime(this.props.contextArgs.instanceid);if(s===null){c('BanzaiODS').bumpEntityKey('streaming_comments','pin_with_no_timestamp');return;}var t=c('XVideoBroadcastPinnedCommentsController').getURIBuilder().getURI();new (c('AsyncRequest'))().setURI(t).setData({video_id:this.props.contextArgs.fluentContentToken,video_time_offset:s,comment_fbid:this.props.isPinned?null:this.props.commentFBID}).setMethod('POST').setErrorHandler(function(u){if(r){c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(this.props.contextArgs,r));}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(this.props.contextArgs));}.bind(this)).send();}.bind(this),n;}l.prototype.render=function(){var m=i._("Unpin comment"),n=i._("Pin comment");return (c('React').createElement('a',{className:"uiLink",href:'#',onClick:this.onLinkClick},this.props.isPinned?m:n));};f.exports=l;}),null);
__d("XVideoBroadcastClearPinCommentEventAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/pinnedcomments\/clear\/",{});}),null);
__d('UFILiveVODUnpinCommentLink.react',['cx','fbt','AsyncRequest','Bootloader','React','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','XVideoBroadcastClearPinCommentEventAsyncController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.$UFILiveVODUnpinCommentLink1=function(){c('Bootloader').loadModules(["SimpleXUIDialog"],function(r){r.showConfirm(i._("If you unpin this comment, you won't be able to pin it again."),i._("Unpin Comment"),function(s){if(!s)return;new (c('AsyncRequest'))().setURI(c('XVideoBroadcastClearPinCommentEventAsyncController').getURIBuilder().getURI()).setData({pin_event_id:this.props.pinEventID}).setMethod('POST').setHandler(function(t){if(this.props.commentID===c('UFILivePinnedCommentStore').getPinnedCommentID(this.props.contextArgs.ftentidentifier))c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(this.props.contextArgs));}.bind(this)).send();}.bind(this));}.bind(this),'UFILiveVODUnpinCommentLink.react');}.bind(this),n;}l.prototype.render=function(){return (c('React').createElement('a',{className:"uiLink",href:'#',onClick:this.$UFILiveVODUnpinCommentLink1},i._("Unpin comment")));};f.exports=l;}),null);
__d('UFIPrivateReplyIndicator.react',['fbt','PagesPrivateReplyConstants','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('PagesPrivateReplyConstants').Status;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.willRender=function(m){return m===k.ALREADY_REPLIED;};l.prototype.render=function(){if(this.props.replyStatus===k.ALREADY_REPLIED)return (c('React').createElement('span',null,h._("Page responded privately")));return null;};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true},hide_attachments:{type:"Bool",defaultValue:false}});}),null);
__d('UFIPrivateReplyLink.react',['cx','fbt','ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('PagesPrivateReplyConstants').Status,m=c('PagesPrivateReplyConstants').Type,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$UFIPrivateReplyLink1=function(){var u=c('ActorURI').create(c('XPagesMessagingPrivateReplyDialogController').getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (c('React').createElement(c('Link.react'),{className:"_50u0",href:u,rel:'dialog'},this.$UFIPrivateReplyLink4()));}.bind(this),this.$UFIPrivateReplyLink3=function(){var u=void 0;switch(this.props.context.status){case l.EXPIRED:u=i._({"comments":"You can't send a message response to comments that are more than 6 months old.","reviews":"You can't send a message response to reviews that are more than 6 months old.","posts":"You can't send a message response to posts that are more than 6 months old."},[i['enum'](this.$UFIPrivateReplyLink5(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case l.NOT_USER_CREATED:u=i._("Pages can't send private messages to other Pages.");break;case l.CANNOT_MESSAGE:u=i._("This person can't receive a message reply from your Page.");break;}return (c('React').createElement('span',{className:"_50u0 _50u4",'data-hover':u?'tooltip':null,'data-tooltip-content':u},this.$UFIPrivateReplyLink4()));}.bind(this),this.$UFIPrivateReplyLink2=function(){return (c('React').createElement(c('Link.react'),{className:"_50u0",href:this.props.context.permalink||'#'},this.props.seeResponseLabel?i._("See response"):this.$UFIPrivateReplyLink4()));}.bind(this),this.$UFIPrivateReplyLink4=function(){return i._("Message");},this.$UFIPrivateReplyLink5=function(){switch(this.props.context.activityType){case m.COMMENT_PAGE_POST:case m.COMMENT_WALL_POST:case m.COMMENT_REVIEW:return 'comments';case m.REVIEW:return 'reviews';default:return 'posts';}}.bind(this),q;}o.willRender=function(p,q){if(!p)return false;if(p.hasReplyPermission&&q===p.pageID)return true;return false;};o.prototype.render=function(){var p=this.props.context;if(p.hasReplyPermission&&this.props.actorID===p.pageID){if(p.status===l.REPLYABLE){return this.$UFIPrivateReplyLink1();}else if(p.status===l.ALREADY_REPLIED)return this.$UFIPrivateReplyLink2();return this.$UFIPrivateReplyLink3();}return null;};o.propTypes={actorID:n.string.isRequired,activityID:n.string.isRequired,context:n.shape({activityType:n.string.isRequired,status:n.string.isRequired,hasReplyPermission:n.bool.isRequired,pageID:n.string.isRequired,permalink:n.string}).isRequired,seeResponseLabel:n.bool.isRequired};f.exports=o;}),null);
__d('UFISpamCount',['UFISpamCountImpl'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};}),null);
__d('UFICommentActions.react',['cx','fbt','FluxContainer','Middot.react','PublicConversationsUnicornTypedLogger','React','ReactFragment','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentLikeLink.react','UFICommentMetadata.react','UFICommentReactionCount.react','UFIConfig','UFIConstants','UFILivePinnedCommentLink.react','UFILivePinnedCommentStore','UFILiveVODUnpinCommentLink.react','UFIPrivateReplyIndicator.react','UFIPrivateReplyLink.react','UFISpamCount','UFIStoryAction'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('UFIConstants').UFIStatus,n="fsm fwn fcg UFICommentActions",o="UFIDeletedMessageIcon",p="UFIDeletedMessage";j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;q.getStores=function(){return [c('UFILivePinnedCommentStore')];};q.calculateState=function(r,s){var t=s.comment;if(t.islocal)return {pinActionLinkState:'None'};var u=c('UFILivePinnedCommentStore').getPinnedCommentID(t.ftentidentifier);if(u===t.id){return {pinActionLinkState:'MayUnpin'};}else return {pinActionLinkState:'MayPin'};};function q(r){k.constructor.call(this,r);this.renderMessageReply=function(s,t){if(s.messagereply){if(c('UFIPrivateReplyLink.react').willRender(s.messagereply,t.actorforpost)){return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:t.actorforpost,activityID:s.id,context:s.messagereply,seeResponseLabel:true}));}else if(c('UFIPrivateReplyIndicator.react').willRender(s.messagereply.status))return (c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:s.messagereply.status}));}else if(s.chattobuy)return (c('React').createElement('a',{href:s.chattobuy,role:'button',rel:'async-dialog'},i._("Message")));return null;};this.state=q.calculateState(null,r);}q.prototype.render=function(){var r=this.props,s=r.comment,t=r.permalink,u=r.feedback,v=r.parentCanComment,w=r.markedAsSpamHere,x=s.status===m.SPAM_DISPLAY,y=r.showReplyLink,z=r.hideAsSpamForPageAdmin,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=!s.islocal&&s.status!==m.LIVE_DELETED;if(ja){if(x&&!w){if(r.viewerCanMarkNotSpam)aa=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').markAsNotSpam(r.contextArgs,s,event));}.bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},i._("Unhide"));if(z&&u.isthreaded&&s.cancomment&&y)fa=this.renderCommentReply(s);}else{ba=c('UFICommentLikeLink.react').getCanRender(s)?c('React').createElement(c('UFICommentLikeLink.react'),{comment:s,contextArgs:r.contextArgs,feedback:u}):null;if(u.isthreaded&&s.cancomment&&y||!!s.parentcommentid&&u.cancomment&&v)fa=this.renderCommentReply(s);if(s.canviewerreact){da=s.reactioncount>0?c('React').createElement(c('UFICommentReactionCount.react'),{comment:s,actorForPost:u.actorforpost,supportedReactions:u.supportedreactions,contextArgs:r.contextArgs}):null;}else da=s.likecount>0?c('React').createElement(c('UFICommentLikeCount.react'),{comment:s,actorForPost:u.actorforpost,contextArgs:r.contextArgs}):null;if(s.spamcount&&c('UFISpamCount').enabled)ea=c('React').createElement(c('UFISpamCount'),{count:s.spamcount});ga=this.renderMessageReply(s,u);}if(s.attachment&&s.attachment.type==='share'&&!s.attachment.disableRemove&&s.canremove)ha=c('React').createElement('a',{href:'#',onClick:function(event){return this.context.dispatch(c('UFICommentAction').removePreview(r.contextArgs,s,event.target));}.bind(this),role:'button'},i._("Remove Preview"));if(s.canshare&&s.commentshareuri)ca=c('React').createElement('a',{className:'share_action_link',href:s.commentshareuri,role:'button',rel:'dialog',title:i._("Share this comment")},i._("Share"));}if(c('UFIConfig').publicConversationsUnicornWhitelist)ia=c('React').createElement('a',{className:'share_action_link',href:'#',role:'button',title:"[FB Only] Mark this comment as a great comment for futher review.",onClick:function za(event){return new (c('PublicConversationsUnicornTypedLogger'))().setCommentFbid(s.fbid).log();}},'Unicorn');var ka=r.contextArgs.islivestreaming?null:c('React').createElement(c('UFICommentMetadata.react'),{comment:s,onRetrySubmit:function(){return this.context.dispatch(c('UFIAddCommentAction').retrySubmit(r.contextArgs,s));}.bind(this),permalink:t,shortenTimestamp:r.contextArgs.shortenTimestamp,showPermalink:r.showPermalink,contextArgs:r.contextArgs}),la=null;if(r.contextArgs.enablePinLiveComments)if(r.contextArgs.islivestreaming&&this.state.pinActionLinkState!=='None'){la=c('React').createElement(c('UFILivePinnedCommentLink.react'),{commentID:s.id,commentFBID:s.fbid,contextArgs:r.contextArgs,isPinned:this.state.pinActionLinkState==='MayUnpin'});}else if(r.contextArgs.isLiveVOD&&this.state.pinActionLinkState==='MayUnpin'){var ma=c('UFILivePinnedCommentStore').getPinEventID(r.contextArgs.ftentidentifier);if(ma!==null)la=c('React').createElement(c('UFILiveVODUnpinCommentLink.react'),{commentID:s.id,contextArgs:r.contextArgs,pinEventID:ma});}var na={};if(u.customcommentactionlinks)for(var oa in u.customcommentactionlinks){var pa=u.customcommentactionlinks[oa];if(pa.showInMenu)continue;var qa=function za(event){return c('UFICentralUpdates').inform(pa.type,{comment:s,feedback:u});};na[pa.type]=c('React').createElement('a',{href:'#',onClick:qa,role:'button'},pa.title);}var ra=void 0;if(this.props.orderingMode===c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING){ra=babelHelpers['extends']({likeToggle:ba,unicornButton:ia,spamToggle:aa,likeCount:da,spamCount:ea,livePinCommentLink:la,metadata:ka},na);}else if(u.isqanda){ra=babelHelpers['extends']({likeCount:da,spamCount:ea,likeToggle:ba,unicornButton:ia,commentReply:fa,shareComment:ca,messageReply:ga,spamToggle:aa},na,{livePinCommentLink:la,metadata:ka,removePreview:ha});}else if(r.contextArgs.entstream){ra=babelHelpers['extends']({livePinCommentLink:la,metadata:ka,likeToggle:ba,unicornButton:ia,likeCount:da,commentReply:fa,messageReply:ga,shareComment:ca,spamCount:ea,spamToggle:aa,removePreview:ha},na);}else if(u.isthreaded){ra=babelHelpers['extends']({likeToggle:ba,unicornButton:ia,commentReply:fa,messageReply:ga,spamToggle:aa,removePreview:ha,shareComment:ca,likeCount:da,spamCount:ea},na,{livePinCommentLink:la,metadata:ka});}else ra=babelHelpers['extends']({livePinCommentLink:la,metadata:ka,likeToggle:ba,unicornButton:ia,shareComment:ca,likeCount:da,spamCount:ea,commentReply:fa,messageReply:ga,spamToggle:aa,removePreview:ha},na);if(s.status===m.LIVE_DELETED){var sa=i._("Comment deleted"),ta=c('React').createElement('span',{className:p},c('React').createElement('i',{'aria-label':sa,className:o,'data-hover':'tooltip','data-tooltip-content':sa,role:'img'}));ra.deletionWarning=ta;}var ua=true,va={};for(var wa in ra){var xa=ra[wa];if(xa){var ya=c('React').createElement(c('Middot.react'),{key:'middot-'+wa});va[wa]=ua?xa:c('ReactFragment').create({middot:ya,action:xa});ua=false;}}return c('React').createElement('div',{className:n},c('ReactFragment').create(va));};q.prototype.renderCommentReply=function(r){return c('React').createElement('a',{className:"UFIReplyLink",href:'#',onClick:function(){var s=this.props,t=s.contextArgs,u=s.feedback;if(u.isthreaded&&r.cancomment){this.context.dispatch(c('UFIStoryAction').showReplies(t,r.id,r));}else if(r.parentcommentid)this.context.dispatch(c('UFIStoryAction').showReplies(t,r.parentcommentid,r));}.bind(this),role:'button'},i._("Reply"));};q.contextTypes={dispatch:l.func};f.exports=c('FluxContainer').create(q,{withProps:true});}),null);
__d('UFISocialContext.react',['fbt','HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=27;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.getOthersLink=function(s,t,u){var v=c('ProfileBrowserTypes').MUTUAL_FRIENDS,w={uid:t.id},x=new (c('URI'))('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:t.id});if(u)x.addQueryData({exclude_id:u.id});var y=c('ProfileBrowserLink').constructDialogURI(v,w).toString();return (c('React').createElement('a',{ajaxify:y,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':x.toString(),href:c('ProfileBrowserLink').constructPageURI(v,w).toString(),key:'others',rel:'dialog'},s));},o;}m.prototype.render=function(){var n=this.props.topMutualFriend,o=this.props.otherMutualCount,p=this.props.commentAuthor,q=c('HovercardLink').constructEndpoint(n).toString(),r=c('React').createElement('a',{href:n.uri,'data-hovercard':q,key:'top'},n.name),s=p.name.length+n.name.length,t=void 0;if(o===0){t=h._("Friends with {name}",[h.param('name',r)]);}else if(s<l){var u=void 0;if(o==1){u=h._("1 other");}else u=h._({"*":"{count} others"},[h.param('count',o,[0])]);t=h._("Friends with {name} and {others}",[h.param('name',r),h.param('others',this.getOthersLink(u,p,n))]);}else{var v=h._({"*":"{count} mutual friends"},[h.param('count',o+1,[0])]);t=this.getOthersLink(v,p);}return c('React').createElement('span',{className:'UFICommentSocialContext'},t);};m.propTypes={commentAuthor:k.object.isRequired,otherMutualCount:k.number.isRequired,topMutualFriend:k.object.isRequired};f.exports=m;}),null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.getConstituentTitle=function(q){var r=this.props.constituentTitle;if(r&&r.titleModule){var s=r.titleModule;return (c('React').createElement(s,{representativeName:r.representativeName,representativeId:r.representativeId,authorId:q.id,ftId:r.ftId,commentId:r.commentId,showHovercard:true,isOwner:r.isOwner,key:'constituentTitle'}));}else return null;}.bind(this),m;}k.prototype.render=function(){var l=this.props,m=l.author,n=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_NAME);return c('React').createElement(c('UFIActor.react'),{author:m,disableAuthorLink:l.disableAuthorLink,showHovercard:l.showHovercard,isAdminViewer:l.isAdminViewer,key:'author',focusOnMount:l.focusOnMount,'data-ft':n,isAuthorWeakReference:l.isAuthorWeakReference,isAuthorNonCoworker:l.isAuthorNonCoworker,groupOrEventID:l.groupOrEventID,useFirstName:l.useFirstName,isPublic:this.props.isPublic},l.isFeatured?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,this.getConstituentTitle(m),l.socialContext?c('React').createElement(c('UFISocialContext.react'),{topMutualFriend:l.authorProfiles[l.socialContext.topmutualid],otherMutualCount:l.socialContext.othermutualcount,commentAuthor:m}):null);};k.propTypes={author:j.object.isRequired,authorProfiles:j.object.isRequired,disableAuthorLink:j.bool,showHovercard:j.bool,isAdminViewer:j.bool,isAuthorWeakReference:j.bool,isAuthorNonCoworker:j.bool,focusOnMount:j.bool,groupOrEventID:j.string,isFeatured:j.bool,socialContext:j.object,useFirstName:j.bool,isPublic:j.bool,constituentTitle:j.object};f.exports=k;}),null);
__d('IntlLang',['UnicodeBidi'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},i=new RegExp('['+h.HE+']');function j(l){var m=c('UnicodeBidi').firstStrongChar(l);if(m===null)return null;if(i.exec(m))return 'he';return null;}var k={getLang:j};f.exports=k;}),null);
__d('UFICommentBody.react',['cx','Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils','UFIConfig','UFIConstants'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.commentText,o=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),p=c('UnicodeBidi').isDirectionLTR(n),q=!p,r=p&&c('Locale').isRTL()?'ltr':q&&!c('Locale').isRTL()?'rtl':null,s=c('IntlLang').getLang(n),t=c('UFICommentUtils').getCommentBodyInterpolator(m.groupOrEventID,m.ufiInstanceID,m.commentFBID,m.isLiveStreaming),u=c('React').createElement(c('TruncatedTextWithEntities.react'),{key:'comment-body',className:"UFICommentBody",interpolator:t,ranges:m.commentRanges,text:n,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:m.maxLength,maxLines:m.maxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,'data-ft':o,dir:r,lang:s,markViewerHasInteracted:this.props.markViewerHasInteracted,allowSeeMoreLinebreakOnLongWords:true,shouldExpand:this.props.shouldExpand});if(m.socialContext){u=c('React').createElement('div',{key:'body'},u);}else{var v=(p&&c('Locale').isRTL()?"_5wjy":'')+(p&&c('Locale').isRTL()?' '+"_5wjz":'')+(q&&!c('Locale').isRTL()?' '+"_5wj-":'')+(q&&!c('Locale').isRTL()?' '+"_5wj_":'');u=v?c('React').createElement('div',{key:'body',className:v},u):[' ',u];}return c('React').createElement('span',null,u);};function l(){i.apply(this,arguments);}l.propTypes={commentText:k.string.isRequired,commentRanges:k.array,groupOrEventID:k.string,maxLength:k.number,maxLines:k.number,socialContext:k.object,markViewerHasInteracted:k.func,ufiInstanceID:k.string,commentFBID:k.oneOfType(k.string,k.number),isLiveStreaming:k.bool};f.exports=l;}),null);
__d('UFICommentMenu.react',['ix','Bootloader','Image.react','React','XUICloseButton.react','XUIEditButton.react','keyMirror','fbglyph'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes,n=void 0,o=void 0,p=void 0,q=void 0,r=c('keyMirror')({EDIT:true,CLOSE:true,CHEVRON:true});i=babelHelpers.inherits(s,c('React').Component);j=i&&i.prototype;function s(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=j.constructor).call.apply(u,[this].concat(x)),this.state={bootloading:false,bootloaded:false,needsExpand:false},this.onClickGuard=function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});c('Bootloader').loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(z,aa,ba){n=z,o=aa;p=ba;q=ba.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this),'UFICommentMenu.react');}else if(this.props.onClick)this.props.onClick(event);}.bind(this),v;}s.prototype.shouldComponentUpdate=function(u,v,w){if(this.state.needsExpand&&!v.needsExpand)return false;return true;};s.prototype.render=function(){var u=null;if(this.props.menuType===r.EDIT){u=c('XUIEditButton.react');}else if(this.props.menuType===r.CLOSE){u=c('XUICloseButton.react');}else u=t;if(this.props.menuData&&this.state.bootloaded){var v=this.props.menuData.map(function(x){return (c('React').createElement(q,{'data-testid':x.testid,key:x.value,value:x.value},x.label));}),w=c('React').createElement(p,{onItemClick:this.props.onAction},v);return (c('React').createElement(o,babelHelpers['extends']({},this.props,{alignh:'right',layerBehaviors:[n],menu:w,ref:'menu'}),c('React').createElement(u,babelHelpers['extends']({},this.props,{href:'#',onClick:this.onClickGuard}))));}return c('React').createElement(u,babelHelpers['extends']({},this.props,{href:'#',onClick:this.onClickGuard}));};s.prototype.componentDidUpdate=function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}};s.propTypes={menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func};k=babelHelpers.inherits(t,c('React').Component);l=k&&k.prototype;t.prototype.render=function(){return (c('React').createElement('a',this.props,c('React').createElement(c('Image.react'),{'data-hover':'tooltip','data-tooltip-content':this.props.tooltip,'aria-label':this.props.tooltip,src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-down_16_fig-light-20.png")})));};function t(){k.apply(this,arguments);}s.MenuType=r;f.exports=s;}),null);
__d('UFICommentTranslation.react',['cx','ContentTranslationStrings','Link.react','React','TranslationTrigger','TruncatedTextWithEntities.react','UFIConfig','UFIConstants','XUISpinner.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);var m=this.props.translationData;this.state={shouldExpand:this.props.shouldExpand||!!m&&m.trigger===c('TranslationTrigger').SEE_TRANSLATION};}k.prototype.render=function(){if(!this.props.showTranslation)return (c('React').createElement(c('Link.react'),{className:"UFITranslateLink",onClick:function(){return this.$UFICommentTranslation1();}.bind(this)},c('ContentTranslationStrings').SEE_TRANSLATION));var l=this.props.translationData;if(!l)return (c('React').createElement('div',{className:"UFITranslateLink"},c('React').createElement(c('XUISpinner.react'),{background:'light',size:'small'})));var m=l.translatedText;if(!m||!m.text)return (c('React').createElement('div',{className:"UFITranslationErrorText"},c('ContentTranslationStrings').NO_TRANSLATION_AVAILABLE));var n=this.props.isShowingOriginal||l.trigger===c('TranslationTrigger').LOGGED_OUT_AUTO_TRANSLATION,o=n?null:c('React').createElement('div',{className:"UFITranslateAttribution"},c('ContentTranslationStrings').getTranslatedFrom(l.sourceDialectName)),p=n?c('React').createElement('div',{className:"UFITranslateAttribution"},c('ContentTranslationStrings').AUTOMATICALLY_TRANSLATED):c('React').createElement(c('Link.react'),{className:"UFITranslateLink",onClick:function(){return this.$UFICommentTranslation2();}.bind(this)},c('ContentTranslationStrings').SEE_ORIGINAL_LINK);return (c('React').createElement('div',null,o,c('React').createElement('div',{className:"UFITranslatedText"},c('React').createElement(c('TruncatedTextWithEntities.react'),{className:"UFICommentBody",ranges:m.ranges,text:m.text,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:c('UFIConstants').commentTruncationLength,maxLines:c('UFIConstants').commentTruncationMaxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,dir:m.dir,shouldExpand:this.state.shouldExpand,markViewerHasInteracted:function(){return this.setState({shouldExpand:!this.state.shouldExpand});}.bind(this)}),p)));};k.prototype.$UFICommentTranslation1=function(){this.props.onSeeTranslation&&this.props.onSeeTranslation();};k.prototype.$UFICommentTranslation2=function(){this.props.onSeeOriginal&&this.props.onSeeOriginal();};k.defaultProps={shouldExpand:false};f.exports=k;}),null);
__d('UFICommentVPVDLogging',['csx','Banzai','Parent','UFIConfig','UFIOrderingModeStore','UFIStopWatch'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('UFIConfig').commentVPVD;function j(k){var l=k.comment,m=k.contextArgs,n=k.node,o=k.stopWatch;if(o.state()===c('UFIStopWatch').COUNTING)return {state:'still visible - not logged',instanceid:m.instanceid,fbid:l.fbid,duration_ms:o.milliseconds()};var p=o.milliseconds();if(p>=0&&p<i.min_duration_to_log)return {state:'small duration - not logged',instanceid:m.instanceid,fbid:l.fbid,duration_ms:p};var q=c('Parent').byClass(n,"public/feedobject/root"),r=null,s=null;if(q){r=JSON.parse(q.getAttribute('data-ft'));s=q.getAttribute('data-referrer');}var t=c('UFIOrderingModeStore').getState().get(m.instanceid),u={comment_fbid:l.fbid,comment_id:l.id,container_module:m.location,duration_ms:p,is_on_sponsored_story:!!m.isSponsored,is_page_comment:!!m.isPage,is_reply:!!l.parentcommentid,mf_story_key:r?r.mf_story_key:null,order_mode:t,qid:r?r.qid:null,referrer_source:s};o.reset();c('Banzai').post('comment_vpvd',u);return babelHelpers['extends']({state:'logged',instanceid:m.instanceid,fbid:l.fbid,duration_ms:p},u);}f.exports={log:j};}),null);
__d('UFICommentVPVDState',['invariant','Arbiter','Parent','UFICommentVisibilityStore','UFICommentVPVDLogging','UFIConfig','UFIRootRegistry','UFIStopWatch','UFIVisibility','UserActivity','ViewportTrackingHelper','getActiveElement'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('UFIConfig').commentVPVD,j={INFOCUS:'INFOCUS',BLURRED_NEW:'BLURRED_NEW',BLURRED_INACTIVE:'BLURRED_INACTIVE',BLURRED_SNOWLIFT_OTHER:'BLURRED_SNOWLIFT_OTHER',BLURRED_UNDER_LAYER:'BLURRED_UNDER_LAYER',BLURRED_NO_NODE:'BLURRED_NO_NODE'},k='changed',l=new (c('Arbiter'))(),m=null,n=false,o=false,p={};function q(w){if(!i.debug_console)return;console.table&&console.table([{isFocusInLayer:n,isSnowliftOpen:o,userIsActive:c('UserActivity').isActive(i.idle_timeout)}]);console.table&&console.table(Object.keys(p).map(function(x){var y=p[x];return {instanceID:y.contextArgs.instanceid,fbid:y.comment.fbid,state:y.state,visibility:y.visibility,counting:y.stopWatch.state()};}));}function r(w){var x=Object.keys(w);if(!x.length)return;x.forEach(function(y){return t(w[y]);});p=babelHelpers['extends']({},p,w);l.inform(k);}function s(w,x){var y;r((y={},y[w]=x,y));}function t(w){if(w.visibility==c('UFIVisibility').VISIBLE&&w.state==j.INFOCUS){w.stopWatch.start();}else w.stopWatch.pause();}function u(w){if(!c('UserActivity').isActive(i.idle_timeout))return j.BLURRED_INACTIVE;if(n&&!o){if(!w.node)return j.BLURRED_NO_NODE;if(!m)return j.BLURRED_UNDER_LAYER;!w.node?h(0):void 0;!m?h(0):void 0;var x=c('ViewportTrackingHelper').isDescendantOf(w.node,m);return x?j.INFOCUS:j.BLURRED_UNDER_LAYER;}if(o)if(c('UFIRootRegistry').isSnowliftNode(w.contextArgs.rootid)){return j.INFOCUS;}else return j.BLURRED_SNOWLIFT_OTHER;return j.INFOCUS;}var v={subscribe:function w(x){return l.subscribe(k,x);},unsubscribe:function w(x){l.unsubscribe(x);},getState:function w(){return p;},getKey:function w(x,y){return y.instanceid+'/'+x.fbid;},initComment:function w(x,y,z){var aa=v.getKey(x,y),ba=p[aa];if(!ba&&!z){return;}else if(!ba){var ca={comment:x,contextArgs:y,node:z,state:j.BLURRED_NEW,stopWatch:new (c('UFIStopWatch'))(),visibility:c('UFICommentVisibilityStore').getVisibility(c('UFICommentVisibilityStore').getState(),y,x)};ca.state=u(ca);s(aa,ca);}else if(!z){ba.stopWatch.pause();s(aa,babelHelpers['extends']({},ba,{state:j.BLURRED_NO_NODE}));}else s(aa,babelHelpers['extends']({},ba,{node:z,state:u(ba)}));},updateAllStates:function w(x){r(Object.keys(p).reduce(function(y,z){y[z]=babelHelpers['extends']({},p[z],{state:u(p[z])});return y;},{}));q(x);},cleanupUFIInstance:function w(x){var y=[];Object.keys(p).filter(function(z){return p[z].contextArgs.instanceid==x;}).forEach(function(z){p[z].stopWatch.pause();var aa=c('UFICommentVPVDLogging').log(p[z]);if(i.debug_console)y.push(aa);delete p[z];});if(i.debug_console)console.table&&console.table(y);},onCommentVisibilityChanged:function w(){var x=c('UFICommentVisibilityStore').getState();r(Object.keys(p).reduce(function(y,z){var aa=p[z],ba=aa.comment,ca=aa.contextArgs,da=aa.visibility,ea=c('UFICommentVisibilityStore').getVisibility(x,ca,ba),fa=da!=ea;if(!fa)return y;y[z]=babelHelpers['extends']({},p[z],{visibility:ea});return y;},{}));q('UFICommentVisibilityStore.changed');},onClickDocument:function w(){var x=c('getActiveElement')();if(!x){m=null;n=false;}else{m=c('Parent').byClass(x,'uiContextualLayerParent');n=!!m;}},onSnowliftOpen:function w(){o=true;},onSnowliftClose:function w(){o=false;},debug:function w(){q('debug');}};f.exports=v;}),null);
__d('UserActivityEmitter',['invariant','EventEmitter','UserActivity','clearTimeout','setTimeout'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i='change',j={};k.factory=function(l){if(!j[l])j[l]=new k(l);return j[l];};function k(l){this.$UserActivityEmitter5=250;this.$UserActivityEmitter6=function(){if(this.$UserActivityEmitter4=='INACTIVE'){this.$UserActivityEmitter4='ACTIVE';this.$UserActivityEmitter2.emit(i,'ACTIVE');}if(this.$UserActivityEmitter3)c('clearTimeout')(this.$UserActivityEmitter3);this.$UserActivityEmitter3=c('setTimeout')(this.$UserActivityEmitter7,this.$UserActivityEmitter5);}.bind(this);this.$UserActivityEmitter7=function(){this.$UserActivityEmitter4='INACTIVE';this.$UserActivityEmitter2.emit(i,'INACTIVE');c('clearTimeout')(this.$UserActivityEmitter3);this.$UserActivityEmitter3=null;}.bind(this);!(l>c('UserActivity').EVENT_INTERVAL_MS)?h(0):void 0;this.$UserActivityEmitter5=l;this.$UserActivityEmitter2=new (c('EventEmitter'))();this.$UserActivityEmitter4=c('UserActivity').isActive(l)?'ACTIVE':'INACTIVE';this.$UserActivityEmitter1=c('UserActivity').subscribe(this.$UserActivityEmitter6);if(this.$UserActivityEmitter4=='ACTIVE')this.$UserActivityEmitter6();}k.prototype.subscribe=function(l){return this.$UserActivityEmitter2.addListener(i,l);};k.prototype.getState=function(){return this.$UserActivityEmitter4;};f.exports=k;}),null);
__d('UFICommentVPVD',['Arbiter','Event','SubscriptionsHandler','UFIActionTypes','UFICommentVisibilityStore','UFICommentVPVDLogging','UFICommentVPVDState','UFIConfig','UFISharedDispatcher','UserActivityEmitter'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIConfig').commentVPVD,i=false,j=null,k=new (c('SubscriptionsHandler'))(),l=null,m=null;function n(){if(j)return;j=setTimeout(function(){j=null;var p=c('UFICommentVPVDState').getState(),q=[];Object.keys(p).forEach(function(r){var s=c('UFICommentVPVDLogging').log(p[r]);if(h.debug_console)q.push(s);});if(h.debug_console)console.table&&console.table(q);},10);}var o={init:function p(){if(i||!c('UFICommentVPVDState'))return;i=true;m=c('UFISharedDispatcher').register(function(q){if(q.type==c('UFIActionTypes').INSTANCE.REMOVE)c('UFICommentVPVDState').cleanupUFIInstance(q.instanceID);});l=c('UserActivityEmitter').factory(h.idle_timeout);k=new (c('SubscriptionsHandler'))();k.addSubscriptions(c('UFICommentVisibilityStore').addListener(function(){var q=c('UFICommentVPVDState').getState();c('UFICommentVPVDState').onCommentVisibilityChanged();if(q!==c('UFICommentVPVDState').getState())n();}),{remove:function q(){if(m){c('UFISharedDispatcher').unregister(m);m=null;}}},c('Event').listen(document.documentElement,'click',function(){c('UFICommentVPVDState').onClickDocument();c('UFICommentVPVDState').updateAllStates('document onClick');n();}),l.subscribe(function(q){c('UFICommentVPVDState').updateAllStates('user-active = '+q);if(q!='ACTIVE')n();}),c('Arbiter').subscribe('reflow',function(){c('UFICommentVPVDState').updateAllStates('reflow');n();}),c('Arbiter').subscribe('PhotoSnowlift.OPEN',function(){c('UFICommentVPVDState').onSnowliftOpen();c('UFICommentVPVDState').updateAllStates('PhotoSnowlift.OPEN');n();}),c('Arbiter').subscribe('PhotoSnowlift.CLOSE',function(){c('UFICommentVPVDState').onSnowliftClose();c('UFICommentVPVDState').updateAllStates('PhotoSnowlift.CLOSE');n();}));},enableVPVDLogging:function p(q){if(!q.location||!h.locations)return false;return (h.everywhere||h.locations.includes(q.location));}};f.exports=o;}),null);
__d('UFICommentVPVDTracker.react',['cx','React','ReactDOM','SubscriptionsHandler','UFICommentAction','UFICommentVisibilityStore','UFICommentVPVD','UFICommentVPVDState','UFIConfig','UFISharedDispatcher','UFIVisibility','ViewportTrackingHelper','onCommentIsVisible'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').Children,l=c('React').PropTypes,m=c('UFIConfig').commentVPVD;function n(p){return c('UFICommentVisibilityStore').getVisibility(c('UFICommentVisibilityStore').getState(),p.contextArgs)===c('UFIVisibility').VISIBLE;}i=babelHelpers.inherits(o,c('React').Component);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.state={isVisible:false};this.isCommentVisible=function(q){if(!n(this.props))return false;var r={height:q.bottom-q.top,width:0};return c('ViewportTrackingHelper').isVisibleInDimension(r,c('ReactDOM').findDOMNode(this),m.min_visible_size);}.bind(this);this.onCommentVisibilityChanged=function(q){this.setState({isVisible:q});c('UFISharedDispatcher').dispatch(c('UFICommentAction').changeVisibility(this.props.contextArgs,this.props.comment,q?c('UFIVisibility').VISIBLE:c('UFIVisibility').HIDDEN));}.bind(this);if(c('UFICommentVPVD').enableVPVDLogging(p.contextArgs))c('UFICommentVPVD').init();this.$UFICommentVPVDTracker1=new (c('SubscriptionsHandler'))();}o.prototype.componentDidMount=function(){if(c('UFICommentVPVD').enableVPVDLogging(this.props.contextArgs))this.$UFICommentVPVDTracker1.addSubscriptions(c('onCommentIsVisible')(this.isCommentVisible,this.onCommentVisibilityChanged));};o.prototype.componentWillUnmount=function(){this.$UFICommentVPVDTracker1.release();};o.prototype.render=function(){var p=this.props,q=this.state,r=k.only(p.children);if(!c('UFICommentVPVD').enableVPVDLogging(p.contextArgs))return r;var s=m.debug_html;return c('React').createElement('div',{'data-debugstate':s?q.isVisible?'fully visible':'not fully visible':null,className:"_3b-9"+(s?' '+"_3b-a":'')+(s&&q.isVisible?' '+"_3b-b":'')+(s&&!q.isVisible?' '+"_3b-c":''),ref:function t(u){return c('UFICommentVPVDState').initComment(p.comment,p.contextArgs,u);}},r);};o.propTypes={comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=o;}),null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={timer:null},this.maybeScheduleVPVLogging=function(){if(this.state.timer!==null)return;var q=this.props.comment.id,r=this.props.contextArgs.instanceid;if(c('UFICommentVPVs').hasLoggedVPV(r,q))return;this.setState({timer:c('setTimeout')(function(){c('UFICommentVPVs').logVPV(r,q);this.setState({timer:null});}.bind(this),c('UFIConfig').vpvLoggingTimeout)});}.bind(this),this.cancelScheduledVPVLogging=function(){if(this.state.timer===null)return;c('clearTimeout')(this.state.timer);this.setState({timer:null});}.bind(this),m;}k.prototype.render=function(){var l=this.props.comment.id,m=this.props.contextArgs.instanceid,n=this.props.children;if(!c('UFICommentVPVs').hasLoggedVPV(m,l))n=c('React').createElement(c('OnVisible.react'),{onVisible:this.maybeScheduleVPVLogging,onHidden:this.cancelScheduledVPVLogging},n);return n;};k.prototype.shouldComponentUpdate=function(l,m){return m.timer===this.state.timer;};k.prototype.componentWillReceiveProps=function(){this.cancelScheduledVPVLogging();};k.prototype.componentWillUnmount=function(){this.cancelScheduledVPVLogging();};k.propTypes={comment:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k;}),null);
__d('TimeOffset',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={timeToTimestamp:function i(j){if(j<=0)return '0:00';var k=Math.floor(j/3600),l=k?k+':':'';l+=((k?'0':'')+Math.floor(j%3600/60)).slice(-2)+':';return l+('0'+j%60).slice(-2);}};f.exports=h;}),null);
__d('UFILiveCommentTimestamp.react',['cx','fbt','invariant','React','TimeOffset','Tooltip.react','Middot.react','UFIConstants','UFIVideoPlayerRegistry','VideoTimestampsClicksWWWTypedLogger'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o,p=this.props,q=p.comment,r=p.contextArgs,s=!q.parentcommentid,t=null;if(s)(function(){var v=typeof q.videoTimeOffset==='number'?q.videoTimeOffset:0;t=c('React').createElement('a',{className:"_39g5",onClick:function w(event){event.preventDefault();var x=new (c('VideoTimestampsClicksWWWTypedLogger'))().setVideoTimestamp(v).setIsContentTimestamp(true);if(q.islocal){x.setLocalCommentFeedbackID(q.ftentidentifier);}else x.setCommentID(q.fbid);x.log();c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(r.instanceid,v);}},c('TimeOffset').timeToTimestamp(v));})();var u=null;if(q.postedLiveState===c('UFIConstants').UFICommentPostedLiveState.LIVE){u=c('React').createElement(c('Tooltip.react'),{tooltip:i._("Comment posted while the video was live")},c('React').createElement(c('Middot.react'),{className:"_5rr7"}));}else{!(q.postedLiveState===c('UFIConstants').UFICommentPostedLiveState.ON_DEMAND)?j(0):void 0;u=c('React').createElement(c('Tooltip.react'),{tooltip:i._("Comment posted after the live video ended")},c('React').createElement(c('Middot.react'),{className:"_5rra"}));}return (c('React').createElement('span',null,u,t));};function n(){k.apply(this,arguments);}n.propTypes={comment:m.shape({fbid:m.string,islocal:m.bool,postedLiveState:m.oneOf([c('UFIConstants').UFICommentPostedLiveState.LIVE,c('UFIConstants').UFICommentPostedLiveState.ON_DEMAND]).isRequired,videoTimeOffset:m.number,parentcommentid:m.string}).isRequired,contextArgs:m.shape({instanceid:m.string.isRequired}).isRequired};f.exports=n;}),null);
__d('UFIComment.react',['ix','cx','fbt','invariant','AsyncRequest','Bootloader','BootloadedComponent.react','DOMContainer.react','HovercardLink','HTML','Image.react','JSResource','LiveWWWFeedbackTypedLogger','React','ReactDOM','TrackingNodes','TranslationTrigger','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentTranslation.react','UFICommentUtils','UFICommentVPVDTracker.react','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UFILiveCommentTimestamp.react','UFISharedDispatcher','UserHovercardLocation','XFeedNUXSaveSeenStateController','XUICloseButton.react','emptyFunction','fbglyph','joinClasses','keyMirror'],(function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('React').PropTypes,o=c('UFIConstants').UFICommentOrderingMode,p=c('UFIConstants').UFIStatus,q=c('keyMirror')({edit:true,hide:true,remove:true,embed:true,showConstituentTitle:true,hideConstituentTitle:true}),r='ufi_comment_close_button',s='ufi_highlighted_comment',t='ufi_comment_menu_delete',u='ufi_comment_menu_edit',v='ufi_comment_menu_hide',w='ufi_comment_menu_embed',x='ufi_comment_menu_show_district',y='ufi_comment_menu_hide_district',z={testid:t,value:q.remove,label:j._("Delete Comment...")},aa={testid:v,value:q.hide,label:j._("Hide Comment")},ba={testid:w,value:q.embed,label:j._("Embed")},ca={testid:t,value:q.remove,label:j._("Delete...")},da={testid:x,value:q.showConstituentTitle,label:j._("Show District")},ea={testid:y,value:q.hideConstituentTitle,label:j._("Hide District")},fa=false,ga=null,ha=function la(ma){var na=ma.status;return na===p.FAILED_ADD||na===p.FAILED_EDIT;};function ia(la){return la.commenterIsFOF!==undefined&&la.userIsMinor!==undefined&&la.reportLink!==undefined;}l=babelHelpers.inherits(ja,c('React').Component);m=l&&l.prototype;function ja(la){m.constructor.call(this,la);ka.call(this);var ma=la.comment;this.state={isHighlighting:ma.highlightcomment,wasHighlighted:ma.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false,hideConstituentTitleNUXVisible:true,showBody:false};}ja.prototype.$UFIComment8=function(){return [z,aa];};ja.prototype.$UFIComment9=function(){return [{testid:u,value:q.edit,label:j._("Edit...")},ca];};ja.prototype.$UFIComment10=function(){this.setState({showBody:!c('UFIConfig').shouldTranslationsReplaceContent});if(!this.props.comment.translationdata)this.context.dispatch(c('UFICommentAction').translate(this.props.contextArgs,this.props.comment,c('TranslationTrigger').SEE_TRANSLATION));};ja.prototype.$UFIComment11=function(){var la=this.props.comment,ma=null,na=null,oa=null,pa=c('UFICommentMenu.react').MenuType.CLOSE,qa=la.canembed&&c('UFIConfig').showCommentEmbedOption,ra=la.canEditConstituentTitle,sa=la.constituentTitle;if(la.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&la.canedit){oa=qa?j._("Edit, delete or embed this"):j._("Edit or delete this");pa=c('UFICommentMenu.react').MenuType.EDIT;if(ra){if(sa){na=[ea];}else na=[da];na=na.concat(this.$UFIComment9());}else na=this.$UFIComment9();}else if(this.props.showRemoveReportMenu){oa=qa?j._("Remove, report or embed this"):j._("Remove or report this");na=this.$UFIComment8();}else if(this.props.feedback.customcommentactionlinks){oa=qa?j._("Remove this"):j._("Remove or embed this");na=[z];pa=c('UFICommentMenu.react').MenuType.EDIT;}else{oa=qa?j._("Remove or embed this"):j._("Remove this");if(!qa){ma=this.$UFIComment4;}else na=[ca];}}else if(this.props.feedback.customcommentactionlinks){oa=qa?j._("Hide or embed this"):j._("Hide this");na=[aa];pa=c('UFICommentMenu.react').MenuType.EDIT;}else if(la.canreport){oa=qa?j._("Hide or embed this"):j._("Hide this");if(!qa){ma=this.$UFIComment1;}else na=[aa];}if(qa){!(na.length>0)?k(0):void 0;na.push(ba);pa=c('UFICommentMenu.react').MenuType.CHEVRON;}if(this.props.feedback.customcommentactionlinks)for(var ta in this.props.feedback.customcommentactionlinks){var ua=this.props.feedback.customcommentactionlinks[ta];if(!ua.showInMenu)continue;na.push({testid:ua.type,value:ua.type,label:ua.title});}var va=null;if(ra&&!sa&&c('UFIConfig').shouldShowHideConstituentTitleNUX)if(!fa){va=this.$UFIComment12();c('UFIConfig').shouldShowHideConstituentTitleNUX=false;}var wa="UFICommentCloseButton"+(ma===null&&na===null?' '+"hdn":'')+(va!==null?' '+"UFICommentCloseButtonNux":''),xa=null,ya=null;if(this.props.contextArgs.viewas){xa='/ajax/profile/link_disabled_in_viewas.php';ya='dialog';ma=null;}return (c('React').createElement('span',null,c('React').createElement(c('UFICommentMenu.react'),{ajaxify:xa,'aria-label':oa,className:wa,'data-testid':r,onClick:ma,rel:ya,tooltip:oa,menuData:na,menuType:pa,onAction:this.$UFIComment7,ref:'comment_menu'}),va));};ja.prototype.$UFIComment13=function(){return (c('React').createElement(c('XUICloseButton.react'),{className:'UFICommentCloseButtonFake',tabIndex:'-1'}));};ja.prototype.$UFIComment12=function(){return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.comment_menu;}.bind(this),shown:this.state.hideConstituentTitleNUXVisible,position:'above',alignment:'right',onCloseButtonClick:this.$UFIComment14},j._("Your district is hidden on all comments. Edit any comment to your representatives to show it again.")));};ja.prototype.componentDidMount=function(){var la,ma=this;if(this.state.isHighlighting)(function(){var na=c('ReactDOM').findDOMNode(ma),oa=parseInt(ma.props.comment.scrolltopoffset||0,10);c('Bootloader').loadModules(["UFIScrollHighlight"],function(pa){setTimeout(pa.actOn.bind(null,na,oa),0);},'UFIComment.react');ma.setState({isHighlighting:false});})();if(this.props.comment.fbid)c('UFISharedDispatcher').dispatch(c('UFICommentAction').mounted(this.props.contextArgs,this.props.comment));};ja.prototype.componentWillUnmount=function(){if(this.props.comment.fbid)c('UFISharedDispatcher').dispatch(c('UFICommentAction').unmounted(this.props.contextArgs,this.props.comment));};ja.prototype.shouldComponentUpdate=function(la,ma){var na=this.props,oa=this.state;return (la.comment!==na.comment||la.showReplyLink!==na.showReplyLink||la.isFirst!==na.isFirst||la.isLast!==na.isLast||la.isFirstCommentComponent!==na.isFirstCommentComponent||la.isLastCommentComponent!==na.isLastCommentComponent||la.isFirstComponent!==na.isFirstComponent||la.isLastComponent!==na.isLastComponent||la.isFeatured!==na.isFeatured||la.hasPartialBorder!==na.hasPartialBorder||la.showTranslation!==na.showTranslation||ma.wasHighlighted!==oa.wasHighlighted||ma.isHighlighting!==oa.isHighlighting||ma.markedAsSpamHere!==oa.markedAsSpamHere||ma.isInlinePageDeleted!==oa.isInlinePageDeleted||ma.isInlineBanned!==oa.isInlineBanned||ma.hideConstituentTitleNUXVisible!==oa.hideConstituentTitleNUXVisible||ma.showBody!==oa.showBody);};ja.prototype.render=function(){var la=this.props,ma=la.contextArgs,na=la.comment,oa=la.feedback,pa=na.status===p.DELETED,qa=na.status===p.LIVE_DELETED,ra=na.status===p.SPAM_DISPLAY;if(pa)return null;var sa=this.state.markedAsSpamHere,ta=this.state.isInlinePageDeleted,ua=this.props.hideAsSpamForPageAdmin,va=this.state.isInlineBanned;if(na.islive&&!this.state.loggedLiveUpdate){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setCommentID(na.id).log();this.setState({loggedLiveUpdate:true});}var wa=ia(na),xa=!na.status&&(na.isunseen||na.islocal);if(!na.status&&oa.lastseentime){var ya=na.originalTimestamp||na.timestamp.time;xa=xa||ya>oa.lastseentime;}var za=ma.markedcomments;if(za&&za[na.legacyid])xa=true;if(this.props.orderingMode===o.LIVE_STREAMING||this.props.isLivePinnedComment)xa=false;var ab="UFIRow"+(this.props.isFirst?' '+"_48ph":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.isLivePinnedComment?' '+"UFILivePinnedComment":''),bb=j._("Comment"),cb=j._("Comment reply"),db=na.parentcommentid?cb:bb;if(wa)if(ga){var eb=null,fb=null,gb=null,hb=null;if(ua){gb=va?this.$UFIComment6:this.$UFIComment5;if(ta){eb=j._("You've deleted this comment so no one can see it.");}else if(sa){eb=j._("Now this is only visible to the person who wrote it and their friends.");hb=this.$UFIComment3;fb=this.$UFIComment2;}}else if(sa){eb=j._("This comment has been hidden.");hb=this.$UFIComment3;fb=this.$UFIComment2;}if(eb)return (c('React').createElement('div',{className:ab,role:'article','aria-label':db},c('React').createElement(ga,{notice:eb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:fb,onBanAction:gb,onDeleteAction:hb,isInlineBanned:va,isInlinePageDeleted:ta,hideAsSpamForPageAdmin:ua,pageID:this.props.feedback.ownerid})));}else c('Bootloader').loadModules(["UFICommentRemovalControls.react"],function(lb){ga=lb;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this),'UFIComment.react');var ib=c('joinClasses')(ab,"UFIComment"+(ha(na)?' '+"UFICommentFailed":'')+(qa||ra?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(' '+"_4oep")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(xa?' '+"UFIUnseenItem":'')),jb=this.renderComment(),kb=ma.mayLogVPVs&&this.props.orderingMode===o.FILTERED;if(!na.islocal){if(kb)jb=c('React').createElement(c('UFICommentVPVTracker.react'),{comment:na,contextArgs:ma},jb);jb=c('React').createElement(c('UFICommentVPVDTracker.react'),{comment:na,contextArgs:this.props.contextArgs},jb);}return (c('React').createElement('div',{className:ib,role:'article','aria-label':db,'data-testid':this.state.wasHighlighted?s:null,'data-ft':this.props['data-ft']},jb));};ja.prototype.renderComment=function(){var la=this.props,ma=la.comment,na=la.permalink,oa=la.feedback,pa=ma.body?ma.body.text:'',qa=c('UFICommentUtils').shallowCopyRanges(ma.body&&ma.body.ranges),ra=la.authorProfiles[ma.author],sa=ma.status===p.SPAM_DISPLAY,ta=ma.status===p.LIVE_DELETED,ua=!(sa||ta),va=oa.canremoveall||ma.hiddenbyviewer;pa=c('UFICommentUtils').getCommentTextWithTruncatedURIs(qa,pa);var wa=null,xa=null;if(!la.isLocallyComposed&&!this.state.wasHighlighted){xa=c('UFIConstants').commentTruncationLength;wa=c('UFIConstants').commentTruncationMaxLines;}var ya=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SMALL_ACTOR_PHOTO),za=false;if(this.props.featuredCommentIDs&&this.props.featuredCommentIDs.indexOf(this.props.comment.fbid)>-1)za=true;var ab=null;if(ma.body&&ma.body.markdown_enabled&&ma.body.markup){if(c('HTML').isHTML(ma.body.markup)){ab=c('React').createElement('span',{dangerouslySetInnerHTML:ma.body.markup});}else ab=c('React').createElement(c('DOMContainer.react'),null,ma.body.markup);}else ab=c('React').createElement(c('UFICommentBody.react'),{socialContext:ma.socialcontext,commentText:pa,commentRanges:qa,groupOrEventID:oa.grouporeventid,maxLength:xa,maxLines:wa,markViewerHasInteracted:this.props.markViewerHasInteracted,shouldExpand:za,ufiInstanceID:this.props.contextArgs.instanceid,commentFBID:ma.fbid,isLiveStreaming:la.contextArgs.islivestreaming});var bb=ma.translationdata,cb=!bb||this.state.showBody||bb.trigger===c('TranslationTrigger').LOGGED_OUT_AUTO_TRANSLATION,db=this.props.showTranslation&&!bb||!!bb&&(!c('UFIConfig').shouldTranslationsReplaceContent||!cb||bb.trigger===c('TranslationTrigger').LOGGED_OUT_AUTO_TRANSLATION),eb=c('React').createElement('span',null,cb?ab:null,ma.istranslatable||!!bb?c('React').createElement(c('UFICommentTranslation.react'),{translationData:bb,showTranslation:db,isShowingOriginal:cb,shouldExpand:za,onSeeTranslation:function(){return this.$UFIComment10();}.bind(this),onSeeOriginal:function(){return this.setState({showBody:true});}.bind(this)}):null),fb=la.contextArgs.viewas?null:c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(ra,oa.grouporeventid,c('UserHovercardLocation').UFI,ma.isauthorweakreference,{on_public_ufi:oa.ispublic}).toString(),gb=la.contextArgs.disableCommentAuthorLink,hb=c('React').createElement(c('UFICommentAuthorName.react'),{author:ra,authorProfiles:la.authorProfiles,disableAuthorLink:gb,showHovercard:!!fb,isAuthorWeakReference:ma.isauthorweakreference,isAuthorNonCoworker:ma.isauthornoncoworker,isAdminViewer:la.feedback.isadminviewer,focusOnMount:la.focusOnMount,groupOrEventID:oa.grouporeventid,isFeatured:la.isFeatured,socialContext:ma.socialcontext,isPublic:oa.ispublic,constituentTitle:ma.constituentTitle}),ib=null;if(la.contextArgs.isLiveVOD)ib=c('React').createElement(c('UFILiveCommentTimestamp.react'),{comment:ma,contextArgs:la.contextArgs});var jb=null;if(ma.photo_comment_status)jb=c('React').createElement('div',{className:"_50f8"},ma.photo_comment_status);var kb=null;if(ma.sticker_attachment_status)kb=c('React').createElement('div',{className:"_50f8"},ma.sticker_attachment_status);var lb=c('React').createElement(c('UFICommentAttachment.react'),{comment:la.comment}),mb=c('React').createElement(c('UFIActorIconContainer.react'),{actorID:ma.author});if(ra.uri||ra.isBusinessPersona)mb=c('React').createElement('a',{'data-ft':ya,'data-hovercard':fb,href:c('UFICommentUtils').annotateProfileURIIfPublic(oa.ispublic,ra.uri)},mb);var nb=null;if(this.props.isLivePinnedComment){var ob=j._("Pinned Comment");nb=c('React').createElement('span',{className:"UFILivePinnedCommentLabel"},c('React').createElement(c('Image.react'),{className:'UFILivePinnedCommentGlyph',src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pushpin_12_fig-blue.png")}),ob);}return (c('React').createElement('div',null,nb,c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium'},mb,c('React').createElement('div',{className:'UFICommentContentBlock'},c('React').createElement('div',{className:'UFICommentContent'},hb,ib,eb,lb),jb,kb,c('React').createElement(c('UFICommentActions.react'),{comment:ma,feedback:oa,parentCanComment:la.parentCanComment,permalink:na,viewerCanMarkNotSpam:va,showPermalink:la.showPermalink,showReplyLink:la.showReplyLink,contextArgs:la.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:la.hideAsSpamForPageAdmin,orderingMode:la.orderingMode}),ua?this.$UFIComment11():null),ua?this.$UFIComment13():null)));};ja.propTypes={authorProfiles:n.object.isRequired,comment:n.object.isRequired,contextArgs:n.object.isRequired,feedback:n.object.isRequired,'data-ft':n.string,featuredCommentIDs:n.array,focusOnMount:n.bool,hasPartialBorder:n.bool,hideAsSpamForPageAdmin:n.bool,isFeatured:n.bool,isFirst:n.bool,isFirstCommentComponent:n.bool,isFirstComponent:n.bool,isLast:n.bool,isLastCommentComponent:n.bool,isLastComponent:n.bool,isLivePinnedComment:n.bool,isLocallyComposed:n.bool,parentCanComment:n.bool,permalink:n.string,showPermalink:n.bool,showRemoveReportMenu:n.bool,showReplyLink:n.bool,viewerIsAuthor:n.bool,orderingMode:n.string,markViewerHasInteracted:n.func,showTranslation:n.bool};ja.contextTypes={dispatch:n.func};var ka=function la(){this.$UFIComment1=function(event){this.context.dispatch(c('UFICommentAction').markAsSpam(this.props.contextArgs,this.props.comment,event));this.setState({markedAsSpamHere:true});}.bind(this);this.$UFIComment2=function(event){this.context.dispatch(c('UFICommentAction').markAsNotSpam(this.props.contextArgs,this.props.comment,event));this.setState({markedAsSpamHere:false});}.bind(this);this.$UFIComment3=function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.contextArgs,this.props.comment,event.target,function(){return this.setState({isInlinePageDeleted:true});}.bind(this)));}.bind(this);this.$UFIComment4=function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.contextArgs,this.props.comment,event.target,c('emptyFunction')));}.bind(this);this.$UFIComment5=function(event){this.context.dispatch(c('UFICommentAction').inlineBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});}.bind(this);this.$UFIComment6=function(event){this.context.dispatch(c('UFICommentAction').undoInlineBan(this.props.contextArgs,this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});}.bind(this);this.$UFIComment7=function(event,ma){var na=ma.item,oa=na.getValue();setTimeout(function(){var pa=this.props,qa=pa.comment,ra=pa.contextArgs,sa=pa.feedback;if(oa===q.remove){this.$UFIComment4(event);}else if(oa===q.edit){this.context.dispatch(c('UFICommentAction').edit(ra,qa));}else if(oa===q.hide){this.$UFIComment1(event);}else if(oa===q.embed){this.context.dispatch(c('UFICommentAction').embed(ra,qa));}else if(oa===q.showConstituentTitle){this.context.dispatch(c('UFICommentAction').showConstituentTitle(ra,qa));}else if(oa===q.hideConstituentTitle){this.context.dispatch(c('UFICommentAction').hideConstituentTitle(ra,qa));}else c('UFICentralUpdates').inform(oa,{comment:qa,feedback:sa});}.bind(this),0);}.bind(this);this.$UFIComment14=function(){fa=true;this.setState({hideConstituentTitleNUXVisible:false});var ma=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','hide_constituent_title_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ma).send();}.bind(this);};f.exports=ja;}),null);
__d('linkifyEntityRange',['Link.react','React'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=(j.entity||{}).url;if(!k)return c('React').createElement('span',null,i);return (c('React').createElement(c('Link.react'),{href:k,target:'_blank'},i));}f.exports=h;}),null);
__d('UFICommentDisabledNotice.react',['cx','React','TextWithEntities.react','linkifyEntityRange'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props.feedback,n=m.commentdisablednotice,o=c('React').createElement('div',{className:'UFINotice'},c('React').createElement(c('TextWithEntities.react'),{interpolator:c('linkifyEntityRange'),ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return (c('React').createElement('div',{className:"UFIRow _4204 _2o9m _4oep"},o));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={feedback:k.object.isRequired};f.exports=l;}),null);
__d('UFICommentFilters',['UFIConstants'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getAuthors:function i(j){return j.reduce(function(k,l){if(l.author)k=k.concat(l.author);if(l.socialcontext)k=k.concat(l.socialcontext.topmutualid);if(l.replyauthors&&l.replyauthors.length)k=k.concat(l.replyauthors);return k;},[]);},isDeleted:function i(j){return j.status===c('UFIConstants').UFIStatus.DELETED;},isSpam:function i(j){return j.status===c('UFIConstants').UFIStatus.SPAM;},collectSpamBuckets:function i(j,k){var l=j.reduce(function(m,n){if(h.isSpam(n)){if(m.spamBucket){m.spamBucket.spamCommentIDs.push(n.id);m.collected.push(null);}else{m.spamBucket={status:c('UFIConstants').UFIStatus.SPAM,id:n.id,spamCommentIDs:[n.id]};m.collected.push(m.spamBucket);}}else if(k[n.author]){m.spamBucket=null;m.collected.push(n);}return m;},{spamBucket:null,collected:[]});return l.collected;}};f.exports=h;}),null);
__d('UFICommentHeader.react',['cx','fbt','React'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return (c('React').createElement('h6',babelHelpers['extends']({},this.props,{className:"accessible_elem"}),i._("Comments")));};function l(){j.apply(this,arguments);}f.exports=l;}),null);
__d('UFICommentListVisibilityTracker.react',['cx','Arbiter','DOMQuery','OnVisible.react','React','ReactDOM','SubscriptionsHandler','UFICommentVPVD','UFIConfig','UFIInstanceAction','UFISharedDispatcher','UFIVisibility'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').Children,l=c('React').Component,m=c('React').PropTypes,n=c('UFIConfig').commentVPVD;i=babelHelpers.inherits(o,l);j=i&&i.prototype;function o(p){j.constructor.call(this,p);this.state={isVisible:false};this.onVisible=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:true});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').VISIBLE));}.bind(this);this.onHidden=function(){if(this.$UFICommentListVisibilityTracker2())this.setState({isVisible:false});c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeCommentListVisibility(this.props.contextArgs,c('UFIVisibility').HIDDEN));}.bind(this);this.$UFICommentListVisibilityTracker1=new (c('SubscriptionsHandler'))();}o.prototype.componentDidMount=function(){if(this.$UFICommentListVisibilityTracker2()&&this.props.contextArgs.location==='conversation_nub')this.$UFICommentListVisibilityTracker1.addSubscriptions(c('Arbiter').subscribe('ConversationNubUtils/recheckTabVisibility',function(p,q){var r=q||{},s=r.tab,t=s&&s.getRootDOM(),u=this.refs.onVisibleRoot,v=u&&c('ReactDOM').findDOMNode(u);if(t&&u&&v&&c('DOMQuery').contains(t,v))u.check();}.bind(this)));};o.prototype.componentWillUnmount=function(){this.$UFICommentListVisibilityTracker1.release();};o.prototype.shouldComponentUpdate=function(p,q){if(!n.debug_html&&this.state.isVisible!==q.isVisible)return false;return true;};o.prototype.$UFICommentListVisibilityTracker2=function(){return !!c('UFIConfig').enableCommentListVisibilityTracking||c('UFICommentVPVD').enableVPVDLogging(this.props.contextArgs);};o.prototype.render=function(){var p=k.only(this.props.children);if(!this.$UFICommentListVisibilityTracker2())return p;var q=n.debug_html;return c('React').createElement('div',{'data-debugstate':q?this.state.isVisible?'partially visible':'hidden':null,className:"_3b-9"+(q?' '+"_3b-a":'')+(q&&this.state.isVisible?' '+"_3b-b":'')+(q&&!this.state.isVisible?' '+"_3b-c":'')},c('React').createElement(c('OnVisible.react'),{ref:'onVisibleRoot',onVisible:this.onVisible,onHidden:this.onHidden,considerZeroedElemsAsHidden:true},p));};o.propTypes={contextArgs:m.shape({instanceid:m.string.isRequired,location:m.string}).isRequired};f.exports=o;}),null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Children,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;l.prototype.render=function(){var m=this.props,n=m.children,o=m.scrollcomments,p=m.scrollwidth;if(o&&p)return (c('React').createElement(c('ScrollableArea.react'),{width:p},j.only(n)));return j.only(n);};function l(){h.apply(this,arguments);}l.propTypes={scrollcomments:k.bool.isRequired,scrollwidth:k.number.isRequired};f.exports=l;}),null);
__d('CommentsTimeSpentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CommentsTimeSpentLoggerConfig',this.$CommentsTimeSpentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CommentsTimeSpentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CommentsTimeSpentTypedLogger1=babelHelpers['extends']({},this.$CommentsTimeSpentTypedLogger1,j);return this;};h.prototype.setEndTime=function(j){this.$CommentsTimeSpentTypedLogger1.end_time=j;return this;};h.prototype.setOrderingMode=function(j){this.$CommentsTimeSpentTypedLogger1.ordering_mode=j;return this;};h.prototype.setPostFbid=function(j){this.$CommentsTimeSpentTypedLogger1.post_fbid=j;return this;};h.prototype.setStartTime=function(j){this.$CommentsTimeSpentTypedLogger1.start_time=j;return this;};h.prototype.setTimeSpentID=function(j){this.$CommentsTimeSpentTypedLogger1.time_spent_id=j;return this;};h.prototype.setViewerHasInteracted=function(j){this.$CommentsTimeSpentTypedLogger1.viewer_has_interacted=j;return this;};var i={end_time:true,ordering_mode:true,post_fbid:true,start_time:true,time_spent_id:true,viewer_has_interacted:true};f.exports=h;}),null);
__d('CommentsTimeSpentTracker.react',['invariant','Banzai','CommentsTimeSpentTypedLogger','Event','OnVisible.react','React','SubscriptionsHandler','UFIOrderingModeStore','UserActivity','pageID','setTimeout'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new (c('SubscriptionsHandler'))(),propTypes:{contextArgs:i.object.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function k(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function k(){return (c('React').createElement(c('OnVisible.react'),{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function k(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function k(){var l=c('UFIOrderingModeStore').getState().get(this.props.contextArgs.instanceid);if(this.firstVisibleTime&&this.isMounted()){var m=this._getTimeInSeconds();if(m>this.firstVisibleTime)new (c('CommentsTimeSpentTypedLogger'))().setViewerHasInteracted(this.props.viewerHasInteracted).setOrderingMode(l).setPostFbid(this.props.targetFBID).setStartTime(this.firstVisibleTime).setEndTime(m).setTimeSpentID(c('pageID')).log();this.firstVisibleTime=0;}},componentWillReceiveProps:function k(){this.finishInterval();},componentDidMount:function k(){this.listeners.addSubscriptions(c('Banzai').subscribe(c('Banzai').SHUTDOWN,this.finishInterval),c('Event').listen(window,'blur',this.finishInterval),c('Event').listen(window,'focus',this._checkVisibility));},componentWillUnmount:function k(){this.finishInterval();this.listeners.release();},componentDidUpdate:function k(){this._checkVisibility();},_getTimeInSeconds:function k(){return Math.floor(Date.now()/1000);},_checkVisibility:function k(){if(this.isMounted()){!(this.refs.onVisibleElement!==null)?h(0):void 0;this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function k(){if(this.firstVisibleTime===0)return;if(c('UserActivity').isActive(this.props.timeToConsiderViewerInactiveMillis)){c('setTimeout')(function(){this._checkForIdleViewer();}.bind(this),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();c('UserActivity').subscribeOnce(function(){if(this.isMounted())this._checkVisibility();}.bind(this));}}});f.exports=j;}),null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','setTimeout'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();function j(l){var m=false;return function(){if(!m){l();m=true;}};}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={seen:false};this.$UFISeenTracker1=j(this.logSeen.bind(this));}k.prototype.render=function(){if(this.state.seen)return this.props.children;return (c('React').createElement(c('OnVisible.react'),{onVisible:this.$UFISeenTracker1},this.props.children));};k.prototype.logSeen=function(){c('setTimeout')(function(){return this.setState({seen:true});}.bind(this),100);c('BanzaiODS').bumpEntityKey('unsampled_feedback','rendered_ufi_client');};f.exports=k;}),null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFISeenTracker.react','UFIConfig'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.contextArgs,o=l.feedback,p=l.hasComments,q=l.isPermalink,r=l.viewerHasInteractedWithComments;if(!m)return null;var s=c('React').createElement('div',null,m);if(p&&c('UFIConfig').logCommentsTimespent){var t=r||q;s=c('React').createElement(c('CommentsTimeSpentTracker.react'),{contextArgs:n,viewerHasInteracted:t,targetFBID:o.commentstargetfbid},s);}if(c('UFIConfig').logWhetherUFISeen)s=c('React').createElement(c('UFISeenTracker.react'),null,s);return s;};function k(){h.apply(this,arguments);}k.propTypes={contextArgs:j.object.isRequired,feedback:j.object.isRequired,hasComments:j.bool.isRequired,isPermalink:j.bool.isRequired,viewerHasInteractedWithComments:j.bool.isRequired};f.exports=k;}),null);
__d('UFIComponents',['React','UFICommentFilters'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=function k(l){if(!l)return false;if(l.props.comment&&c('UFICommentFilters').isDeleted(l.props.comment))return false;return true;},i=function k(l,m,n){var o=void 0,p=n?l.length-1:0,q=n?-1:l.length,r=n?-1:1;for(o=p;o!=q;o+=r)if(h(l[o])){m(l,o);return l;}return l;},j={applyToUFIComponents:function k(l,m,n){l=i(l,function(o,p){o[p]=c('React').cloneElement(o[p],m);},false);l=i(l,function(o,p){o[p]=c('React').cloneElement(o[p],n);},true);return l;}};f.exports=j;}),null);
__d('UFIContainer.react',['cx','React'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')},this.props.children));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={isParentLiveDeleted:k.bool,isReplyList:k.bool};f.exports=l;}),null);
__d("XUFICommentTooltipController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});}),null);
__d('UFICommentCount.react',['cx','fbt','ActorURI','NumberFormat','React','UFIConfig','XUFICommentTooltipController'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$UFICommentCount1=function(){var n=this.props.commentCount,o=n==1;if(typeof n==='number'){var p=c('UFIConfig').numberDelimiter;n=c('NumberFormat').formatIntegerWithDelimiter(n,p);}return i._({"Comment":"{count} comment","Comments":"{count} comments"},[i.param('count',n),i['enum'](o?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);};m.prototype.render=function(){var n=this.props.feedback,o=n.entidentifier,p=n.actorforpost,q=this.$UFICommentCount1(),r="fcg",s=null;if(o&&p)s=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',o).getURI(),p);if(s){return (c('React').createElement('span',{'aria-live':'polite',className:r,'data-hover':'tooltip','data-tooltip-uri':s},q));}else return c('React').createElement('span',{className:r},q);};function m(){j.apply(this,arguments);}m.propTypes={commentCount:l.oneOfType([l.number,l.string]).isRequired,feedback:l.object.isRequired};f.exports=m;}),null);
__d('UFILikeSentenceText.react',['cx','ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;function l(n,o,p,q){if(q.count!=null){var r=c('ProfileBrowserTypes').LIKES,s={id:n.targetfbid,actorid:n.actorid},t=[],u;for(var v=0;v<o.length;v++)if(!o[v].count){u=o[v];var w=u.entity;t.push(w.id);}var x=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:n.targetfbid,comment_from:n.actorforpost,seen_user_fbids:t.length?t:true});x=c('ActorURI').create(x,n.actorforpost);var y,z;if(n.displayreactions){y=c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();y=c('ActorURI').create(y,n.actorforpost);z=c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',n.entidentifier).getURI();z=c('ActorURI').create(z,n.actorforpost);}else{y=c('ProfileBrowserLink').constructDialogURI(r,s).toString();z=c('ProfileBrowserLink').constructPageURI(r,s).toString();}return (c('React').createElement('a',{'data-testid':'n_other_people_link',className:"_375l",rel:'dialog',ajaxify:y,href:z,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':x.toString(),role:'button'},p));}else{var aa={source_feedback_owner_id:n.ownerid,source_feedback_identifier:n.entidentifier};return c('HovercardLinkInterpolator')(p,q,null,null,'ufi',aa);}}i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){'use strict';var n=this.props.feedback,o=this.props.likeSentenceData,p,q=o.aggregatedranges||o.aggregated_ranges;p=l;p=p.bind(null,n,o.ranges);return (c('React').createElement(c('TextWithEntities.react'),{interpolator:p,ranges:o.ranges,aggregatedRanges:q,text:o.text}));};function m(){'use strict';i.apply(this,arguments);}m.propTypes={contextArgs:k.object.isRequired,feedback:k.object.isRequired,likeSentenceData:k.object.isRequired};f.exports=m;}),null);
__d('UFIReactionsFacepile.react',['ix','cx','ActorURI','Bootloader','Image.react','React','TooltipLink.react','UFIConfig','UFIConstants','UFIReactionIconImpl.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController','fbglyph'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=11,m=7,n=32,o='16';j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q,r){'use strict';k.constructor.call(this,q,r);this.onSentenceClick=this.onSentenceClick.bind(this);}p.prototype.componentWillMount=function(){'use strict';var q=this.props.context.source,r=c('UFIConstants').UFIFeedbackSourceType.PHOTOS_SNOWLIFT;if(q===r){this.$UFIReactionsFacepile2=m;}else this.$UFIReactionsFacepile2=l;};p.prototype.$UFIReactionsFacepile3=function(q){'use strict';var r=q.actorforpost,s=q.entidentifier,t=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(t.getURIBuilder().setString('ft_ent_identifier',s).getURI(),r)};};p.prototype.onSentenceClick=function(event){'use strict';var q=this.props.feedback,r=c('UFIReactionsProfileBrowserUtils').getDialogURI(q).toString();c('Bootloader').loadModules(["AsyncDialog"],function(s){s.bootstrap(r,event.currentTarget,'dialog');},'UFIReactionsFacepile.react');event.preventDefault();};p.prototype.renderFacepile=function(){'use strict';var q=this.props.feedback,r=q.reactioncount,s=q.reactors;if(s===null)return null;var t=s;if(r>this.$UFIReactionsFacepile2)t=s.slice(0,this.$UFIReactionsFacepile2-1);return t.map(function(u){return (c('React').createElement(c('TooltipLink.react'),{href:c('UFIReactionsProfileBrowserUtils').getPageURI(q),key:u.profilepicsrc,onClick:this.onSentenceClick,position:'above',rel:'ignore',tooltip:u.name},c('React').createElement('div',null,c('React').createElement('div',{className:"_44l5"},c('React').createElement(c('Image.react'),{height:n,src:u.profilepicsrc,width:n}),c('React').createElement('div',{className:"_44l6"},c('React').createElement(c('UFIReactionIconImpl.react'),{reaction:u.reaction,size:o}))))));}.bind(this));};p.prototype.renderMoreLink=function(){'use strict';var q=this.props.feedback,r=q.reactioncount,s=q.reactors,t=q.viewerreaction;if(s===null||r<=this.$UFIReactionsFacepile2)return null;var u=s[this.$UFIReactionsFacepile2-1],v=void 0;if(c('UFIConfig').reactionsHasTooltipBreakdown){v=r>1;}else v=t?r>3:r>2;var w=null;if(v)w=this.$UFIReactionsFacepile3(q);return (c('React').createElement('a',{className:"_44l5 _19sm",href:c('UFIReactionsProfileBrowserUtils').getPageURI(q),onClick:this.onSentenceClick,rel:'ignore'},c('React').createElement('span',babelHelpers['extends']({},w,{className:"_44l7"}),c('React').createElement('div',{className:"_3vbb"},c('React').createElement(c('Image.react'),{height:n,src:u.profilepicsrc,width:n})),c('React').createElement('div',{className:"_44l8"},c('React').createElement(c('Image.react'),{height:o,src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/3-dots-h_20_fig-white.png"),width:o})))));};p.prototype.render=function(){'use strict';return (c('React').createElement('li',{className:"_44l9"},this.renderFacepile(),this.renderMoreLink()));};f.exports=p;}),null);
__d('UFIReactionsSocialSentence.react',['cx','fbt','ActorURI','Bootloader','BanzaiLogger','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsFacepile.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onSentenceClick=function(event){var r=this.props.feedback,s=c('UFIReactionsProfileBrowserUtils').getDialogURI(r).toString();c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'social_sentence'});c('Bootloader').loadModules(["AsyncDialog"],function(t){t.bootstrap(s,event.currentTarget,'dialog');},'UFIReactionsSocialSentence.react');event.preventDefault();}.bind(this),n;}l.prototype.$UFIReactionsSocialSentence1=function(m){'use strict';var n=m.actorforpost,o=m.entidentifier,p=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(p.getURIBuilder().setString('ft_ent_identifier',o).getURI(),n)};};l.prototype.render=function(){'use strict';var m=this.props.feedback,n=this.props.contextArgs,o=m.likesentences,p=m.reactors,q=m.reactioncount,r=m.reactioncountreduced,s=m.reactionsentences,t=m.showblingbarfeedback,u=m.viewerreaction,v=u?q>3:q>2;if(c('UFIConfig').reactionsHasTooltipBreakdown)v=q>1;var w=null;if(v)w=this.$UFIReactionsSocialSentence1(m);var x=null;if(s&&s.current){x=s.current.text;}else if(o&&o.current){x=o.current.text;}else x=r;var y=m!==null&&t&&n.isPermalink,z=null;if(x)z=c('React').createElement('span',{className:"_4arz"},c('React').createElement('span',w,x));var aa=null,ba=null;if(q){if(y&&!z)ba=i._("people reacted to this");aa=c('React').createElement('span',{'aria-hidden':!!z,className:"_1g5v"},c('React').createElement('span',w,r,' ',ba));}var ca=c('React').createElement('a',{className:"_2x4v",href:c('UFIReactionsProfileBrowserUtils').getPageURI(m),onClick:this.onSentenceClick,rel:'ignore'},aa,z),da=null,ea=null;if(y&&p){da=c('React').createElement(c('UFIReactionsFacepile.react'),{feedback:m,context:n});}else ea=c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"_4ar- _ipn",contextArgs:n,feedback:m,max:3},ca);return (c('React').createElement('div',null,da,c('React').createElement('div',{className:"_ipp"},y?ca:ea)));};f.exports=l;}),null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/browser\/",{id:{type:"Int",required:true}});}),null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/dialog\/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}});}),null);
__d('UFILikeSentence.react',['cx','invariant','fbt','ActorURI','Bootloader','LeftRight.react','React','UFICommentCount.react','UFILikeSentenceText.react','UFIReactionsSocialSentence.react','URI','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','isEmpty','joinClasses'],(function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes,n=null;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={bootloadedSelectorModule:false,hasSelectorModule:!!n},this.$UFILikeSentence1=function(u){if(u.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){!!u.contextArgs.entstream?i(0):void 0;c('Bootloader').loadModules(["UFIOrderingModeSelectorContainer.react"],function(v){n=v;this.setState({hasSelectorModule:true});}.bind(this),'UFILikeSentence.react');this.setState({bootloadedSelectorModule:true});}}.bind(this),this.$UFILikeSentence2=function(){var u=this.props.feedback,v=u.likesentences,w=v||{},x=w.current;return x||{};}.bind(this),this.$UFILikeSentence3=function(){var u=this.props,v=u.feedback,w=u.contextArgs;if(!this.constructor.rendersSocialSentence(u))return null;if(w.hasReactions)return (c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:v,contextArgs:w}));var x=this.$UFILikeSentence2();if(x&&x.text)return (c('React').createElement('div',{className:"UFILikeSentenceText"},c('React').createElement(c('UFILikeSentenceText.react'),{contextArgs:w,feedback:v,likeSentenceData:x})));return null;}.bind(this),this.$UFILikeSentence4=function(){var u=this.props.displayCommentCount;if(u&&u!=='0')return (c('React').createElement(c('UFICommentCount.react'),{commentCount:u,feedback:this.props.feedback}));return null;}.bind(this),q;}o.rendersSocialSentence=function(p){'use strict';var q=p.feedback,r=q.likesentences,s=q.reactionsentences;return r&&!c('isEmpty')(r.current)||s&&s.current&&s.current.text;};o.prototype.componentWillMount=function(){'use strict';this.$UFILikeSentence1(this.props);};o.prototype.componentWillReceiveProps=function(p){'use strict';this.$UFILikeSentence1(p);};o.prototype.renderOrderingModeSelector=function(){'use strict';if(!this.props.showOrderingModeSelector||!this.state.hasSelectorModule||!n)return null;return (c('React').createElement(n,{key:'orderingmodeselector',contextArgs:this.props.contextArgs,feedback:this.props.feedback}));};o.prototype.renderSeenState=function(){'use strict';var p=this.props.feedback;if(!p.seencount||p.seencount===0||this.props.contextArgs.entstream)return null;var q=null;if(p.seenbyall){q=j._("Seen by everyone");}else q=p.seencount==1?j._("Seen by 1"):j._("Seen by {count}",[j.param('count',p.seencount)]);var r=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:p.entidentifier}),s=c('ActorURI').create(c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost),t=c('ActorURI').create(c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',p.entidentifier).getURI(),p.actorforpost);return (c('React').createElement('a',{key:'seenstate',rel:'dialog',ajaxify:s,href:t,'data-hovercard':r.toString(),className:"UFISeenCount"+(' '+"UFISeenCountRight")},c('React').createElement('span',{className:'UFISeenCountIcon'}),q));};o.prototype.render=function(){'use strict';var p=this.$UFILikeSentence3(this.props),q=[this.renderSeenState(),this.renderOrderingModeSelector()].filter(function(u){return u!==null;}),r=null;if(q.length===1){r=q[0];}else if(q.length>1)r=c('React').createElement('div',{className:"_oql"},q);if(r){if(!p)p=c('React').createElement('div',null);}else{var s=this.$UFILikeSentence4();if(s)r=s;}var t=null;if(p){t=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},p,r);}else t=r;return (c('React').createElement('div',{className:c('joinClasses')("UFIRow"+(this.props.feedback.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":''))},t));};o.propTypes={contextArgs:m.object.isRequired,feedback:m.object.isRequired,isFirstComponent:m.bool,isLastComponent:m.bool,onOrderingModeChange:m.func,showOrderingModeSelector:m.bool};o.contextTypes={dispatch:m.func};f.exports=o;}),null);
__d('UFILiveTypingIndicatorContainer.react',['BootloadOnRender.react','FluxContainer','JSResource','LazyComponent.react','React','UFIConfig','UFILiveTypingStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={everHadTyping:false,hasTyping:false,friendTyping:false};}k.getStores=function(){return [c('UFILiveTypingStore')];};k.calculateState=function(){var l=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],m=arguments[1];if(!c('UFIConfig').typingIndicator.showInline)return {everHadTyping:false,hasTyping:false,friendTyping:false};var n=!!c('UFILiveTypingStore').getState()[m.feedbackTargetID];return {everHadTyping:l.everHadTyping||n,hasTyping:n,friendTyping:c('UFILiveTypingStore').isFriendTyping(m.feedbackTargetID)};};k.prototype.shouldComponentUpdate=function(l,m){return l.feedbackTargetID!=this.props.feedbackTargetID||m.everHadTyping!=this.state.everHadTyping||m.hasTyping!=this.state.hasTyping;};k.prototype.render=function(){if(this.state.everHadTyping)return (c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFILiveTypingIndicator.react').__setRef('UFILiveTypingIndicatorContainer.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,this.state))}));return null;};f.exports=c('FluxContainer').create(k,{pure:true,withProps:true});}),null);
__d('UFIPager.react',['cx','LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','joinClasses'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onPagerClick=function(r){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();r.nativeEvent.prevent();}.bind(this),n;}l.prototype.render=function(){'use strict';var m=this.onPagerClick,n=c('joinClasses')("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o=null;if(this.props.isLoading)o=c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'});var p=c('React').createElement('a',{className:'UFIPagerLink',onClick:m,href:'#',role:'button'},this.props.pagerLabel,o),q="fcg"+(' '+"UFIPagerCount"),r=c('React').createElement('span',{className:q},this.props.countSentence),s;if(this.props.contextArgs.entstream||!this.props.isReply){s=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},p,r);}else s=c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('a',{className:'UFIPagerIcon',onClick:m,href:'#',role:'button'}),p,r);return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},s));};l.propTypes={contextArgs:k.object.isRequired,pagerLabel:k.string.isRequired,'data-ft':k.string,countSentence:k.string,isFirstCommentComponent:k.bool,isFirstComponent:k.bool,isLastCommentComponent:k.bool,isLastComponent:k.bool,isLoading:k.bool,isReply:k.bool,isUnseen:k.bool,onPagerClick:k.func};f.exports=l;}),null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat','UFIConfig'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(k){return c('NumberFormat').formatIntegerWithDelimiter(k.count,c('UFIConfig').numberDelimiter);}var j={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',VIEW_PREVIOUS_EXPLICIT:'view_previous_explicit',_getReplyLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 reply");case j.VIEW_ONE_MORE:return h._("View 1 more reply");case j.VIEW_ALL:return h._({"*":"View all {count} replies"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more replies","268435456":"View {count} more reply"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count,'number')]);case j.VIEW_MORE:return h._("View more replies");case j.VIEW_PREVIOUS:return h._("View previous replies");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous replies","268435456":"View {count} previous reply"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count,'number')]);default:return null;}},_getCommentLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 comment");case j.VIEW_ONE_MORE:return h._("View 1 more comment");case j.VIEW_ALL:return h._({"*":"View all {count} comments"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more comments","268435456":"View {count} more comment"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count,'number')]);case j.VIEW_MORE:return h._("View more comments");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous comments","268435456":"View {count} previous comment"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count,'number')]);case j.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function k(l,m){var n=c('intlList')(m.commenters),o=m.othersCount,p=c('NumberFormat').formatIntegerWithDelimiter(o,c('UFIConfig').numberDelimiter);switch(l){case j.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',n)]);case j.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',n)]);case j.VIEW_ALL:switch(o){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',i(m),[0,m.count]),h.param('names',n)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',i(m),[0,m.count]),h.param('names',n)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',i(m),[0,m.count]),h.param('names',n),h.param('othersCount',p,[0,o])]);}case j.VIEW_MORE_EXPLICIT:case j.VIEW_MORE:switch(o){case 0:return h._("View more comments from {names}",[h.param('names',n)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}case j.VIEW_PREVIOUS:case j.VIEW_PREVIOUS_EXPLICIT:switch(o){case 0:return h._("View previous comments from {names}",[h.param('names',n)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',n)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',n),h.param('othersCount',p,[0,o])]);}default:return null;}},_getQuestionLabel:function k(l,m){switch(l){case j.VIEW_ONE:return h._("View 1 question");case j.VIEW_ONE_MORE:return h._("View 1 more question");case j.VIEW_ALL:return h._({"*":"View all {count} questions"},[h.param('count',i(m),[0,m.count])]);case j.VIEW_MORE_EXPLICIT:return h._({"*":{"*":"View {count} more questions","268435456":"View {count} more question"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count,'number')]);case j.VIEW_MORE:return h._("View more questions");case j.VIEW_PREVIOUS:return h._("View previous questions");case j.VIEW_PREVIOUS_EXPLICIT:return h._({"*":{"*":"View {count} previous questions","268435456":"View {count} previous question"}},[h.param('count',i(m),[0,m.count]),h.plural(m.count,'number')]);default:return null;}},getLabel:function k(l,m,n,o){if(m){return j._getReplyLabel(l,o);}else if(n){return j._getQuestionLabel(l,o);}else{if(o.commenters)return this._getCommentLabelWithCommentSentence(l,o);return j._getCommentLabel(l,o);}}};f.exports=j;}),null);
__d('UFIPagerGenerator',['fbt','NumberFormat','React','TrackingNodes','UFICommentOrdering','UFIConfig','UFIConstants','UFIPager.react','UFIPagerLabel','UFIRange'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('UFIConstants').UFIPaging,j={isBottomPager:function k(l,m){return c('UFICommentOrdering').inverted(m)&&!l;},needsStartOfRangePager:function k(l){return l>0;},renderPagers:function k(l){var m,n,o,p=l.commentCount,q=l.contextArgs,r=l.currentLength,s=l.currentOffset,t=l.deletedCount,u=l.feedback,v=l.forceExplicitPagers,w=l.onPageCallback,x=l.orderingMode,y=l.range,z=l.targetID,aa=p-t,ba=r-t,ca=z!==q.ftentidentifier,da=this.isBottomPager(ca,x),ea={topPager:null,bottomPager:null},fa=y.isLoadingPrev(),ga=y.isLoadingNext(),ha={count:0},ia=u.commentsentenceinfo;if(ia){ha.commenters=ia.explicit_commenter_names;ha.othersCount=ia.other_commenter_count;}var ja=s+r==p;if(p<q.pagesize&&ja||ba===0){var ka,m=function(){var na=Math.min(p,q.pagesize);ka=function sa(){return w(da?i.BOTTOM:i.TOP,new (c('UFIRange'))(p-na,na));};var oa=void 0;if(ba===0){if(aa==1){oa=c('UFIPagerLabel').VIEW_ONE;}else{ha.count=aa;oa=c('UFIPagerLabel').VIEW_ALL;}}else if(aa-ba==1){oa=c('UFIPagerLabel').VIEW_ONE_MORE;}else{oa=c('UFIPagerLabel').VIEW_MORE_EXPLICIT;ha.count=aa-ba;}var pa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.VIEW_ALL_COMMENTS),qa=c('UFIPagerLabel').getLabel(oa,ca,u.isqanda,ha),ra=c('React').createElement(c('UFIPager.react'),{key:'allPager'+z,ref:da?'topLevelBottomPager':null,contextArgs:q,isUnseen:u.hasunseencollapsed,isLoading:da?ga:fa,isReply:ca,pagerLabel:qa,onPagerClick:ka,'data-ft':pa});if(da){ea.bottomPager=ra;}else ea.topPager=ra;return {v:ea};}();if(typeof m==="object")return m.v;}var la=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_MORE,ca,u.isqanda,ha),ma=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_PREVIOUS,ca,u.isqanda,ha);if(this.needsStartOfRangePager(s))(function(){var na=Math.max(s-q.pagesize,0),oa=s+r-na,pa=null,qa=s;if(v&&qa>0){var ra=da?c('UFIPagerLabel').VIEW_MORE_EXPLICIT:c('UFIPagerLabel').VIEW_PREVIOUS_EXPLICIT;pa=c('UFIPagerLabel').getLabel(ra,ca,u.isqanda,babelHelpers['extends']({},ha,{count:qa}));}var sa=void 0;if(!pa&&(!ca||ba>1)){var ta=c('NumberFormat').formatIntegerWithDelimiter(ba,c('UFIConfig').numberDelimiter),ua=c('NumberFormat').formatIntegerWithDelimiter(aa,c('UFIConfig').numberDelimiter);sa=h._("{countshown} of {totalcount}",[h.param('countshown',ta),h.param('totalcount',ua)]);}var va=function wa(){return w(da?i.BOTTOM:i.TOP,new (c('UFIRange'))(na,oa));};if(da){ea.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager'+z,ref:!ca?'topLevelBottomPager':null,contextArgs:q,isLoading:fa,isReply:ca,pagerLabel:pa||la,onPagerClick:va,countSentence:sa});}else ea.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+z,contextArgs:q,isLoading:fa,isReply:ca,pagerLabel:pa||ma,onPagerClick:va,countSentence:sa});})();if(s+r<p)(function(){var na=Math.min(r+q.pagesize,p-s),oa=function sa(){return w(da?i.TOP:i.BOTTOM,new (c('UFIRange'))(s,na));},pa=null,qa=aa-(ba+s);if(v&&qa>0){var ra=da?c('UFIPagerLabel').VIEW_PREVIOUS_EXPLICIT:c('UFIPagerLabel').VIEW_MORE_EXPLICIT;pa=c('UFIPagerLabel').getLabel(ra,ca,u.isqanda,babelHelpers['extends']({},ha,{count:qa}));}if(da){ea.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+z,contextArgs:q,isLoading:ga,isReply:ca,pagerLabel:pa||ma,onPagerClick:oa});}else ea.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager',ref:!ca?'topLevelBottomPager':null,contextArgs:q,isLoading:ga,isReply:ca,pagerLabel:pa||la,onPagerClick:oa});})();return ea;}};f.exports=j;}),null);
__d('UFIReplySocialSentence.react',['cx','fbt','Badge.react','Image.react','LiveTimer','React','Timestamp.react','UFIConfig','UFIConstants','UFIImageBlock.react','Middot.react','NumberFormat','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=43200;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){'use strict';var o=this.props.isLoading?"UFIReplySocialSentenceLoading":'',p=c('joinClasses')("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),q,r,s=c('NumberFormat').formatIntegerWithDelimiter(this.props.replies,c('UFIConfig').numberDelimiter);if(this.props.isExpanded){q=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i.param('count',s,[0,this.props.replies])]):i._("Hide 1 Reply");}else{q=this.props.replies>1?i._({"*":"{count} Replies"},[i.param('count',s,[0,this.props.replies])]):i._("1 Reply");if(this.props.timestamp){var t=c('LiveTimer').getApproximateServerTime()/1000-this.props.timestamp.time;if(t<m||this.props.orderingMode==c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY)r=c('React').createElement('span',{className:"fcg"},c('React').createElement(c('Middot.react'),{key:'middot-timestamp'}),c('React').createElement(c('Timestamp.react'),{shorten:this.props.contextArgs.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var u=this.props.author,v=u&&!this.props.isExpanded,w=null,x;if(v){w=c('React').createElement(c('Image.react'),{alt:'',src:u.thumbSrc,className:"img UFIActorImage _54ru"});var y=null;if(this.props.showVerified)y=c('React').createElement(c('Badge.react'),{size:'xsmall',type:'verified'});if(u.i18nGender){x=[i._({"*":"{author}{verified_badge} replied"},[i.param('author',u.name,[1,u.i18nGender]),i.param('verified_badge',y)])];}else x=[i._("{author}{verified_badge} replied",[i.param('author',u.name),i.param('verified_badge',y)])];x.push(c('React').createElement(c('Middot.react'),{key:'middot-author'}),q);}else x=q;return (c('React').createElement('div',{className:p,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('div',{className:(v?"UFIReplyActorPhotoWrapper":'')+(v?' '+"UFIReplyActor":'')},c('React').createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(v?' '+"UFIIconWithActor":'')}),w),c('React').createElement('span',{className:o},c('React').createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},x),r)))));};function n(){'use strict';j.apply(this,arguments);}n.propTypes={author:l.object,contextArgs:l.object.isRequired,'data-ft':l.string,isExpanded:l.bool,isFirstComponent:l.bool,isLastComponent:l.bool,isLoading:l.bool,onClick:l.func,orderingMode:l.string,replies:l.number,showVerified:l.bool,timestamp:l.object};f.exports=n;}),null);
__d('UFITranslateAllLink.react',['ContentTranslationStrings','Link.react','React','UFIInstanceAction','UFISharedDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.render=function(){return (c('React').createElement(c('Link.react'),{onClick:function(){return this.$UFITranslateAllLink1();}.bind(this)},c('ContentTranslationStrings').TRANSLATE_ALL_TEXT));};j.prototype.$UFITranslateAllLink1=function(){c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').translateAll(this.props.contextArgs));};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("XUFIShareTooltipController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});}),null);
__d('UFIShareRow.react',['cx','fbt','ActorURI','Layout.react','NumberFormat','React','UFICommentCount.react','UFIConfig','UFITranslateAllLink.react','XUFIShareTooltipController','URI','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.$UFIShareRow1=function(){var u=this.props,v=u.feedback,w=u.shownCommentCount;if(w&&w!=0)return (c('React').createElement(c('UFICommentCount.react'),{feedback:v,commentCount:w}));return null;}.bind(this),q;}o.prototype.$UFIShareRow2=function(){'use strict';return this.props.showTranslateAll?c('React').createElement(c('UFITranslateAllLink.react'),{contextArgs:this.props.contextArgs}):null;};o.prototype.render=function(){'use strict';var p=this.props.feedback.sharefbid||this.props.feedback.targetfbid,q=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:p}),r=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:p}),s=this.props.contextArgs.loggedOutLinkConfig;if(s&&s.showShareLink)q=s.shareAjaxifyURI;var t;if(this.props.feedback.sharecount>1){var u=c('NumberFormat').formatIntegerWithDelimiter(this.props.feedback.sharecount,c('UFIConfig').numberDelimiter);t=i._({"*":"{count} shares"},[i.param('count',u,[0,this.props.feedback.sharecount])]);}else t=i._("1 share");var v=c('joinClasses')("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),w=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost),x=c('React').createElement('a',{className:'UFIShareLink',rel:'dialog','data-hover':'tooltip','data-tooltip-uri':w,ajaxify:q.toString(),href:r.toString()},t),y=this.$UFIShareRow1(),z=this.$UFIShareRow2();if(y){x=c('React').createElement(c('Layout.react'),null,c('React').createElement(m,null,x),c('React').createElement(l,null,y));}else if(z)x=c('React').createElement(c('Layout.react'),null,c('React').createElement(m,null,x),c('React').createElement(l,null,z));return (c('React').createElement('div',{className:v},x));};o.propTypes={contextArgs:n.object.isRequired,feedback:n.object.isRequired,isFirstComponent:n.bool,isLastComponent:n.bool,shownCommentCount:n.oneOfType([n.number,n.string]),showTranslateAll:n.bool};f.exports=o;}),null);
__d('UFISpamPlaceholder.react',['fbt','React','XUISpinner.react'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';if(this.props.isLoading)return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('span',{className:'UFISpamCommentWrapper'},c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'}))));return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':h._("Show comments marked as spam")},c('React').createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':h._({"*":"{count} hidden"},[h.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},c('React').createElement('i',{className:'placeholderIcon'})))));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={numHidden:k.number.isRequired,isLoading:k.bool,onClick:k.func};f.exports=l;}),null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('UFISpamStore')];};j.calculateState=function(k,l){var m=l.contextArgs,n=l.viewas,o=l.comment,p=l.parentCommentID;return {isLoading:!!c('UFISpamStore').getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function q(){return c('UFISharedDispatcher').dispatch(c('UFIStoryAction').spamFetched(m,n,o.spamCommentIDs,p));}};};j.prototype.shouldComponentUpdate=function(k,l){return k.contextArgs!=this.props.contextArgs||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden;};j.prototype.render=function(){return c('React').createElement(c('UFISpamPlaceholder.react'),this.state);};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{pure:true,withProps:true});}),null);
__d('StaticUFI.react',['csx','cx','invariant','Arbiter','BlueBar','BootloadOnRender.react','CommentPrelude','DOM','Event','FbFeedCommentUFIScroller','FBFeedLocations','JSResource','LazyComponent.react','LogHistory','Parent','React','ReactDOM','SearchableEntry','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentDisabledNotice.react','UFICommentFilters','UFICommentHeader.react','UFICommentListVisibilityTracker.react','UFICommentOrdering','UFIComments','UFICommentScrollableArea.react','UFICommentUtils','UFIComponentLogger.react','UFIComponents','UFIConfig','UFIConstants','UFIContainer.react','UFIInstanceState','UFIInteractionStore','UFILikeSentence.react','UFILivePinnedCommentStore','UFILiveTypingIndicatorContainer.react','UFIOrderingModeStore','UFIPagerGenerator','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','URI','XUISpinner.react','emptyFunction','getElementPosition','getElementRect','getUnboundedScrollPosition','shallowEqual','throttle'],(function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('UFIConstants').UFIFeedbackSourceType,l=c('UFIConstants').UFIPayloadSourceType,m=c('UFIConstants').UFIStatus,n=c('React').PropTypes,o=c('React').createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},c('React').createElement(c('XUISpinner.react'),{size:'large'})),p=c('React').createElement('div',{className:"_xtv",role:'presentation'},c('React').createElement('i',null)),q=c('React').createClass({displayName:'StaticUFI',contextTypes:{dispatch:n.func},getInitialState:function r(){var s=this.props.focusReply;return {focusReply:s,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false};},getDefaultProps:function r(){return {commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,loadingSpamIDs:{},loadingTranslationsMap:{}};},componentDidMount:function r(){c('Arbiter').inform('UFI/displayDone-'+this.props.contextArgs.instanceid);if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var s=c('throttle')(this.loadMoreComments,20);this._scrollEventListener=c('Event').listen(window,'scroll',s);this._resizeEventListener=c('Event').listen(window,'resize',s);}this._resolveFocus();},componentWillReceiveProps:function r(s){if(this.props.focusReply!==s.focusReply)this.setState({focusReply:s.focusReply});},componentWillUnmount:function r(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},shouldComponentUpdate:function r(s,t){var u=this.props,v=this.state;return (!c('shallowEqual')(v,t)||!c('shallowEqual')(v.loadingSpamIDs,t.loadingSpamIDs)||!c('shallowEqual')(u,s)||!c('shallowEqual')(u.feedback,s.feedback)||!c('shallowEqual')(u.repliesMap,s.repliesMap)||!c('shallowEqual')(u.commentCounts,s.commentCounts)||!c('shallowEqual')(u.deletedCounts,s.deletedCounts)||!c('shallowEqual')(u.availableComments,s.availableComments)||!c('shallowEqual')(u.ranges,s.ranges)||!c('shallowEqual')(u.authorProfiles,s.authorProfiles)||!c('shallowEqual')(u.commentPermalinks,s.commentPermalinks)||!c('shallowEqual')(u.canAddCommentMap,s.canAddCommentMap)||!c('shallowEqual')(u.canReplyMap,s.canReplyMap)||!c('shallowEqual')(u.isActiveLoading,s.isActiveLoading)||!c('shallowEqual')(u.repliesExpandedMap,s.repliesExpandedMap)||!c('shallowEqual')(u.loadingTranslationsMap,s.loadingTranslationsMap));},componentWillUpdate:function r(s,t){this._maintainOffset=this._maintainOffset||!this._isUserDrivenPayloadSource(this.props.payloadSource)&&this.props.source===k.NEWS_FEED&&c('BlueBar').hasFixedBlueBar();if(this._maintainOffset&&!this._oldBoundingClientRect)this._oldBoundingClientRect=c('getElementRect')(c('ReactDOM').findDOMNode(this));},componentDidUpdate:function r(s,t){this._resolveFocus(s);if(this._maintainOffset&&this._oldBoundingClientRect){var u=this._getOffsetOfRender(this._oldBoundingClientRect);if(u!==null)c('Arbiter').inform('ufi/didUpdate',{offsetY:u});this._maintainOffset=false;this._oldBoundingClientRect=null;}},_isUserDrivenPayloadSource:function r(s){return (s===l.UNKNOWN||s===l.INITIAL_SERVER||s===l.USER_ACTION||s===l.COLLAPSE_ACTION);},_getOffsetOfRender:function r(s){var t=c('getElementPosition')(c('BlueBar').getMaybeFixedRoot());if(s.bottom<t.height){var u=s.bottom-s.top;return c('ReactDOM').findDOMNode(this).offsetHeight-u;}return null;},_getCommentCountForSentence:function r(){var s=this.props,t=s.contextArgs,u=s.commentCounts,v=s.deletedCounts,w=s.feedback,x=w.commentcountreduced,y=t.ftentidentifier,z=null;if(this._hasComments())if(x&&isNaN(x)){z=x;}else z=u[y]-v[y];return z;},_resolveFocus:function r(s){if(this.props.loadingComments)return;if(this.props.commentsToggling){c('CommentPrelude').expand(c('ReactDOM').findDOMNode(this),false,'ufi.react');this.onComment();c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'commentsToggling',false);}if(this.state.focusReply){var t=this.state.focusReply,u=t.replyID,v=t.initiatorComment;if(!(u in this.refs))return;var w=this.refs[u]&&this.refs[u].refs&&this.refs[u].refs.mentionsinput;if(!w)return;w.focus();this.setState({focusReply:null});if(!v)return;var x=w.hasEnteredText(),y=v.author===this.props.feedback.actorforpost,z=!!v.parentcommentid;if(!x&&!y&&z)w.insertMention(this._createMentionEntry(v.author));}},_createMentionEntry:function r(s){var t=this.props.authorProfiles[s],u=t.type;return new (c('SearchableEntry'))({uniqueID:t.id,title:t.name,type:u==='friend'?'user':u});},_isAds:function r(){return this.props.source===k.ADS;},_isLiveVideo:function r(){return this.props.source===k.LIVE_VIDEO;},_isSnowlift:function r(){var s=this.props.contextArgs,t=s.feedcontext&&JSON.parse(s.feedcontext);return !!(t&&t.is_snowlift);},_showsLikeSentenceOrderingModeSelector:function r(){var s=this.props,t=s.hideOrderingModeSelector,u=s.feedback,v=s.commentCounts,w=s.contextArgs;return (!t&&u.orderingmodes&&v[w.ftentidentifier]>=c('UFIConstants').minCommentsForOrderingModeSelector);},_showsLikeSentenceCommentCount:function r(){if(!c('UFIConfig').allowCommentCountInSocialSentenceRow)return false;if(!this._hasComments()||this._isBlacklistedFromHavingLikeSentenceRow()||this._showsLikeSentenceOrderingModeSelector()||this._showsLikeSentenceSeenBy()||this._isSnowlift())return false;var s=this._getCommentCountForSentence();if(!s||s==='0')return false;if(this._hasValidSocialSentenceText()){return true;}else if(this._hasShareRow()){return false;}else return (this.props.hasPagedToplevel||!this._isShowingAllTopLevelComments());},_isShowingAllTopLevelComments:function r(){var s=this.props,t=s.contextArgs,u=s.ranges,v=t.ftentidentifier,w=u[v].getLength();return this._isShowingAllComments(v,w);},_isShowingAllComments:function r(s,t){var u=this.props.commentCounts;return u[s]==t;},_showsLikeSentenceSeenBy:function r(){var s=this.props,t=s.contextArgs,u=s.feedback;return u.seencount>0&&!t.entstream;},_hasValidSocialSentenceText:function r(){return c('UFILikeSentence.react').rendersSocialSentence(this.props);},_isBlacklistedFromHavingLikeSentenceRow:function r(){var s=this.props,t=s.contextArgs,u=s.feedback;return (this._isAds()||this._isLiveVideo()||t.search||this.hasReactions(u,t));},_hasLikeSentenceRow:function r(){if(this._isBlacklistedFromHavingLikeSentenceRow())return false;return (this._hasValidSocialSentenceText()||this._showsLikeSentenceSeenBy()||this._showsLikeSentenceOrderingModeSelector()||this._showsLikeSentenceCommentCount());},_hasShares:function r(){var s=this.props,t=s.contextArgs,u=s.feedback;if(this._isAds())return false;return (t.showshares&&u.sharecount&&!this.hasReactions(u,t));},_hasShareRow:function r(){return (this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function r(){if(this._isAds())return false;var s=this.props.availableComments;return !!(s&&s.length);},_hasAddCommentView:function r(){var s=this.props,t=s.canAddCommentMap,u=s.contextArgs,v=s.feedback;return (v.cancomment&&u.showaddcomment&&v.actorforpost&&t[u.ftentidentifier]);},_hasAddCommentLink:function r(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.props.hasPagedToplevel);},_hasAddCommentDisabledNotice:function r(){var s=this.props.feedback;return s.arecommentsdisabled===true&&s.cancomment===false;},_showsShareRowCommentCount:function r(){if(!this._hasShareRow())return false;var s=this.props.contextArgs.isPermalink,t=null;if(!this._showsLikeSentenceCommentCount()&&(s||c('UFIConfig').allowCommentCountInSocialSentenceRow))t=this._getCommentCountForSentence();return t&&t!='0';},_renderShareRow:function r(){if(!this._hasShareRow())return null;var s=this.props,t=s.contextArgs,u=s.feedback,v=this._showsShareRowCommentCount()?this._getCommentCountForSentence():null,w=c('UFICommentUtils').shouldShowTranslateAll(this.props.availableComments,this.props.repliesMap,this.props.repliesExpandedMap,this.props.loadingTranslationsMap);return (c('React').createElement(c('UFIShareRow.react'),{contextArgs:t,feedback:u,shownCommentCount:v,showTranslateAll:w}));},_renderLikeSentence:function r(){var s=this.props,t=s.feedback,u=s.contextArgs,v=this._showsLikeSentenceCommentCount()?this._getCommentCountForSentence():null,w=this._hasLikeSentenceRow();if(w)return (c('React').createElement(c('UFILikeSentence.react'),{contextArgs:u,feedback:t,showOrderingModeSelector:this._showsLikeSentenceOrderingModeSelector(),key:'ufi_like_sentence',displayCommentCount:v}));return null;},render:function r(){var s=this.props,t=s.feedback,u=s.contextArgs,v=this._hasAddCommentDisabledNotice(),w=this._hasShares(),x=this._renderLikeSentence(),y=!!x,z=v?c('React').createElement(c('UFICommentDisabledNotice.react'),{feedback:s.feedback}):null,aa=this._renderShareRow();if(s.loadingComments)return (c('React').createElement(c('UFIContainer.react'),null,x,aa,o));var ba=this._hasComments(),ca=s.ranges[u.ftentidentifier],da=s.loggingOffset-ca.getOffset(),ea=ba?this.renderCommentArray(s.availableComments,da,false,null):null,fa=null,ga=null,ha=t.cancomment,ia=y||w||ba||ha,ja=null,ka=c('UFILivePinnedCommentStore').getPinnedCommentID(u.ftentidentifier);if(ka&&u.enableViewPinnedComments){var la=c('UFIComments').getComment(ka);ja=this.renderComment(la,0,false,false,false,false,true,!!this.props.loadingTranslationsMap[la.id]);}var ma=ia?c('React').createElement(c('UFICommentHeader.react'),null):null;if(this._hasAddCommentView()||u.loggedOutLinkConfig&&u.loggedOutLinkConfig.showAddComment){var na=this._shouldShowCommentInput(u,ba);if(na){fa=c('React').createElement(c('UFILiveTypingIndicatorContainer.react'),{contextArgs:u,feedbackTargetID:t.targetfbid});var oa=c('UFIOrderingModeStore').isLiveStreaming(u.instanceid);ga=c('React').createElement(c('UFIAddComment.react'),{viewerActorID:t.actorforpost,replyCommentID:null,targetID:t.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:t.mentionsdatasource,showSendOnEnterTip:t.showsendonentertip,multiCompanyGroupsCount:t.multicompanygroupscount,allowVideoAttachments:t.allowvideoattachments&&!oa,allowPhotoAttachments:t.allowphotoattachments&&!oa,allowStickerAttachments:t.allowstickerattachments&&!oa,allowGifAttachments:t.allowgifattachments&&!oa,allowTipJar:t.istipjarenabled&&oa,contextArgs:u,subtitle:t.subtitle,isQAndA:t.isqanda,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?c('emptyFunction'):function(){return this.setState({viewerHasClickedCommentComposer:true});}.bind(this),allowCommentMarkdown:t.iscommentmarkdowneligible});}}var pa=this.renderPagers(u.ftentidentifier,false,s.ranges[u.ftentidentifier].getOffset(),s.ranges[u.ftentidentifier].getLength()),qa=pa.topPager,ra=pa.bottomPager,sa=this._hasCommentOrderInverted()?fa:null,ta=this._hasCommentOrderInverted()?null:fa,ua=c('UFIComponents').applyToUFIComponents([sa,qa].concat(ea,[ra,ta]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),va=ua.slice(0,2);sa=va[0];qa=va[1];var wa=ua.slice(-2);ra=wa[0];ta=wa[1];ea=ua.slice(2,-2);var xa=this._hasCommentOrderInverted()?ga:null,ya=this._hasCommentOrderInverted()?null:ga,za=this._hasAddCommentLink()?c('React').createElement(c('UFIAddCommentLink.react'),{onClick:this.onComment,isQAndA:t.isqanda}):null,ab=true,bb=null;if(u.showCommentNuxForGroupMallAds)bb=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFICommentNuxForGroupMallAds.react').__setRef('StaticUFI.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{commentNuxContent:u.groupMallAdsCommentNuxContent})});ua=c('UFIComponents').applyToUFIComponents([x,aa,xa,qa].concat(ea,[ra,ya,za]),{isFirstComponent:ab},{isLastComponent:true});var cb=ua.slice(0,4);x=cb[0];aa=cb[1];xa=cb[2];qa=cb[3];var db=ua.slice(-3);ra=db[0];ya=db[1];za=db[2];ea=ua.slice(4,-3);var eb=!!c('UFIInteractionStore').getState()[u.instanceid];return (c('React').createElement(c('UFIContainer.react'),null,u.shownub&&ia?p:null,x,aa,ma,bb,xa,c('React').createElement(c('UFICommentListVisibilityTracker.react'),{contextArgs:u},c('React').createElement(c('UFICommentScrollableArea.react'),{scrollcomments:!!u.scrollcomments,scrollwidth:u.scrollwidth||0},c('React').createElement(c('UFIComponentLogger.react'),{contextArgs:u,feedback:t,hasComments:ba,isPermalink:u.isPermalink,viewerHasInteractedWithComments:eb||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},sa,qa,u.isBroadcasterUFI?null:ja,ea,u.isBroadcasterUFI?ja:null,ra,ta))),ya,za,z));},_shouldShowCommentInput:function r(s){var t=c('UFIInstanceState').getKeyForInstance(s.instanceid,'isediting');if(t)return false;if(this._hasComments())return true;var u=c('UFIInstanceState').getKeyForInstance(s.instanceid,'addCommentInput'),v=u&&u.expanded;if(v)return true;if(s.feedcontext)var w=JSON.parse(s.feedcontext).location_type;return w!==c('FBFeedLocations').REVIEWS_FEED;},renderCommentArray:function r(s,t,u,v){var w=this.props,x=w.contextArgs,y=this.props.feedback;if(!s.length)return [];var z=c('UFIInstanceState').getKeyForInstance(x.instanceid,'editcommentid'),aa=c('UFICommentFilters').collectSpamBuckets(s,w.authorProfiles);return aa.reduce(function(ba,ca,da){if(!ca)return ba;if(c('UFICommentFilters').isSpam(ca)){ba.push(c('React').createElement(c('UFISpamPlaceholderContainer.react'),{key:'spam'+ca.id,contextArgs:x,viewas:x.viewas,comment:ca,parentCommentID:v}));}else{if(ca.id==z){ba.push(this.renderEditCommentBox(ca));}else{var ea=Math.max(t-da,0),fa=da===0,ga=da===aa.length,ha=!u&&!y.arecommentsdisabled,ia=u&&!fa;ba.push(this.renderComment(ca,ea,fa,ga,ha,ia,false,!!this.props.loadingTranslationsMap[ca.id]));}if(!u&&!c('UFICommentFilters').isDeleted(ca)&&!c('UFIOrderingModeStore').isLiveStreaming(x.instanceid)){var ja=this.renderReplyContainer(ca);if(ja)ba.push(ja);}}return ba;}.bind(this),[]);},renderReplyContainer:function r(s){var t=this.props,u=t.commentCounts[s.id],v=t.repliesExpandedMap[s.id],w=!v&&s.interestingReplyId,x=t.ranges[s.id],y=void 0,z=void 0;if(v||s.interestingReplyId){y=t.repliesMap[s.id];z=x.getOffset();if(w){var aa=y.filter(function(va){return va.id===s.interestingReplyId;});if(aa.length!==1){c('LogHistory').getInstance('ufi').error('comment '+s.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');y=null;}else{y=aa;z=s.interestingReplyOffset;}}}var ba=void 0;if(y){var ca=x.getOffset(),da=x.getLength();if(w){ca=z;da=1;}var ea=this.renderPagers(s.id,true,ca,da),fa=ea.topPager,ga=ea.bottomPager,ha=t.loggingOffset-z;ba=this.renderCommentArray(y,ha,true,s.id);}var ia=Math.max(u-s.spamreplycount,0),ja=void 0;if(!c('UFIOrderingModeStore').isLiveStreaming(this.props.contextArgs.instanceid)&&ia&&(v&&y&&y.length>t.replySocialSentenceMaxReplies||!v&&!y)){var ka=x.isLoadingPrev()||x.isLoadingNext(),la=v&&!fa&&ka,ma=null;if(s.replyauthors&&s.replyauthors.length)ma=t.authorProfiles[s.replyauthors[0]];ja=c('React').createElement(c('UFIReplySocialSentence.react'),{contextArgs:t.contextArgs,author:ma,replies:v?y.length:ia,timestamp:s.recentreplytimestamp,onClick:function(){return this.context.dispatch(c('UFIStoryAction').toggleReplies(t.contextArgs,s.id));}.bind(this),isLoading:la,isExpanded:v,showVerified:t.feedback.showfeaturedreplies,orderingMode:t.orderingMode});}var na=void 0;if(v)if(s.cancomment&&t.canAddCommentMap[s.id]){var oa=false;if(ba)for(var pa=ba.length-1;pa>=0;pa--)if(ba[pa]){oa=ba[pa].props.isAuthorReply;break;}na=this.renderReplyComposer(s,!oa);}var qa=void 0;if(ja||fa||ba||ga||na){var ra=c('UFIComponents').applyToUFIComponents([ja,fa].concat(ba,[ga,na]),{isFirstComponent:true},{isLastComponent:true}),sa=ra.slice(0,2);ja=sa[0];fa=sa[1];var ta=ra.slice(-2);ga=ta[0];na=ta[1];ba=ra.slice(2,-2);var ua=s.status===m.LIVE_DELETED;qa=c('React').createElement(c('UFIContainer.react'),{key:'replies'+s.id,isParentLiveDeleted:ua,isReplyList:true},ja,fa,ba,ga,na);}return qa;},renderReplyComposer:function r(s,t){var u=this.props,v=u.contextArgs,w=u.feedback,x=c('UFIInstanceState').getKeyForInstance(v.instanceid,'isediting')&&!s.id;if(x)return null;var y=c('UFIOrderingModeStore').isLiveStreaming(v.instanceid);return (c('React').createElement(c('UFIAddComment.react'),{viewerActorID:w.actorforpost,replyCommentID:s.id,targetID:w.ownerid,initialData:null,ref:'replycomposer-'+s.id,withoutSeparator:t,editingComment:{},isEditing:false,mentionsDataSource:w.mentionsdatasource,showSendOnEnterTip:false,allowVideoAttachments:w.allowvideoattachments&&!y,allowPhotoAttachments:w.allowphotoattachments&&!y,allowStickerAttachments:w.allowstickerattachments&&!y,allowGifAttachments:w.allowgifattachments&&!y,allowCommentMarkdown:w.iscommentmarkdowneligible,contextArgs:v,subtitle:w.subtitle,isQAndA:w.isqanda}));},renderEditCommentBox:function r(s){var t=this.props,u=t.contextArgs,v=t.feedback,w={instanceid:u.instanceid,ftentidentifier:u.ftentidentifier,mentionsinput:u.mentionsinput};return (c('React').createElement(c('UFIAddComment.react'),{key:'editing_comment'+s.id,viewerActorID:v.actorforpost,targetID:v.ownerid,mentionsDataSource:v.mentionsdatasource,contextArgs:w,isEditing:true,editingComment:s,allowVideoAttachments:v.allowvideoattachments,allowPhotoAttachments:v.allowphotoattachments,allowStickerAttachments:v.allowstickerattachments,allowGifAttachments:v.allowgifattachments,isQAndA:v.isqanda}));},renderComment:function r(s,t,u,v,w,x,y,z){var aa=this.props,ba=aa.feedback,ca=ba.actorforpost===s.author,da=c('UFIInstanceState').getKeyForInstance(aa.contextArgs.instanceid,'locallycomposed'),ea=s.islocal||da&&da[s.id],fa=ba.showremovemenu||ba.viewerid===s.author,ga=ba.canremoveall&&ba.isownerpage&&!ca,ha=aa.source!=k.INTERN,ia=!!s.parentcommentid,ja=true;if(ia&&s.parentcommentid in this.props.canReplyMap&&this.props.canReplyMap[s.parentcommentid]!==null)ja=this.props.canReplyMap[s.parentcommentid];var ka=!!s.isfeatured,la=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.COMMENT,t),ma=new (c('URI'))(aa.commentPermalinks[s.id]).addQueryData({comment_tracking:la}).toString();return (c('React').createElement(c('UFIComment.react'),{key:'comment'+s.id,isFirst:u,isLast:v,showReplyLink:w,hasPartialBorder:x,comment:s,authorProfiles:aa.authorProfiles,viewerIsAuthor:ca,feedback:ba,'data-ft':la,contextArgs:aa.contextArgs,hideAsSpamForPageAdmin:ga,isLocallyComposed:ea,isFeatured:ka,parentCanComment:ja,permalink:ma,showPermalink:ha,showRemoveReportMenu:fa,focusOnMount:s.id===aa.commentIDToFocusOnMount,orderingMode:aa.orderingMode,featuredCommentIDs:aa.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?c('emptyFunction'):function(){return this.setState({viewerHasClickedSeeMore:true});}.bind(this),isLivePinnedComment:y,showTranslation:z||!!s.translationdata}));},renderPagers:function r(s,t,u,v){var w=this.props;if(this._isShowingAllComments(s,v)||this._isAds()||!t&&w.hideToplevelPager)return {topPager:null,bottomPager:null};var x=!!(!t&&c('UFIConfig').allowExplicitPagerCount&&(this._showsLikeSentenceCommentCount()||this._showsShareRowCommentCount()));!Number.isInteger(w.commentCounts[s])?j(0):void 0;!Number.isInteger(w.deletedCounts[s])?j(0):void 0;!Number.isInteger(v)?j(0):void 0;return c('UFIPagerGenerator').renderPagers({commentCount:w.commentCounts[s],contextArgs:w.contextArgs,currentLength:v,currentOffset:u,deletedCount:w.deletedCounts[s],feedback:w.feedback,forceExplicitPagers:x,onPageCallback:function(y,z){this.context.dispatch(c('UFIStoryAction').pageInComments(w.contextArgs,s,y,z));}.bind(this),orderingMode:w.orderingMode,range:w.ranges[s],targetID:s});},loadMoreComments:function r(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var s=c('ReactDOM').findDOMNode(this.refs.topLevelBottomPager),t=c('getUnboundedScrollPosition')(window).y,u=t+document.documentElement.clientHeight+c('UFIConstants').infiniteScrollRangeForQANDAPermalinks;if(s.offsetHeight&&s.offsetTop<u)this.refs.topLevelBottomPager.props.onPagerClick();}},onComment:function r(){var s=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();s=c('ReactDOM').findDOMNode(this.refs.toplevelcomposer);}else{var t=c('ReactDOM').findDOMNode(this),u=c('Parent').byTag(t,'form');s=this._findComposerNode(u);if(!s){var v=c('Parent').bySelector(t,"._3g6d");s=this._findComposerNode(v);}s&&s.focus();}c('FbFeedCommentUFIScroller').reveal(s);},_findComposerNode:function r(s){return c('DOM').scry(s,'[name="add_comment_text_text"]').concat(c('DOM').scry(s,'[name="add_comment_text"]')).find(function(t){return !c('Parent').byClass(t,'UFIReplyList');});},_hasCommentOrderInverted:function r(){return c('UFICommentOrdering').inverted(this.props.orderingMode);},hasReactions:function r(s,t){return (s.displayreactions&&t.hasReactions&&(t.feedbackMode==='none'||t.feedbackMode==='toggle'));}});f.exports=q;}),null);
__d('UFIBlingItem.react',['cx','fbt','React','NumberFormat','UFIConfig','joinClasses'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=c('joinClasses')(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),o=c('NumberFormat').formatIntegerWithDelimiter(this.props.count,c('UFIConfig').numberDelimiter),p=o;switch(this.props.itemKey){case 'like':p=i._({"Like":"{count} Like","Likes":"{count} Likes"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':p=i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':p=i._({"Reaction":"{count} reaction","Reactions":"{count} reactions"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':p=i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}return (c('React').createElement('span',{className:"_2u_j"},p));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={contextArgs:l.object.isRequired,count:l.number.isRequired,countreduced:l.string,className:l.string,iconClassName:l.string,itemKey:l.string};f.exports=m;}),null);
__d('UFIBlingBox.react',['cx','fbt','NumberFormat','React','UFIBlingItem.react','UFIConfig','UFIReactionTypes'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=[],o='',p=this.props,q=p.likes,r=p.likesreduced,s=p.reactionCount,t=p.reactionCountMap,u=p.reactionCountReduced;if(q||s){var v=t&&t[c('UFIReactionTypes').LIKE]['default']!==s;n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:v?s:q,countreduced:v?u:r,iconClassName:'UFIBlingBoxLikeIcon',itemKey:v?'reaction':'like',key:'like'}));o+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i.param('count',this.props.likes,[0])]);o+=' ';}if(this.props.comments){var w=this.props.commentsreduced;if(this.props.contextArgs.islivestreaming)w=c('NumberFormat').formatIntegerWithDelimiter(this.props.comments,c('UFIConfig').numberDelimiter);n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:w,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));o+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i.param('count',this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));o+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i.param('count',this.props.reshares,[0])]);}var x;if(this.props.readOnly){x=c('React').createElement('span',{'aria-label':o},n);}else{var y=this.props.contextArgs.commentajaxify;x=c('React').createElement('a',{ajaxify:y,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:y?'dialog':'ignore'},n);}return x;};function m(){'use strict';j.apply(this,arguments);}m.propTypes={contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reactionCount:l.number,reactionCountMap:l.object,reactionCountReduced:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool};f.exports=m;}),null);
__d('UFIReactionsBlingSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','NumberFormat','PagesPrivateReplyConstants','ProfileBrowserLink','ProfileBrowserTypes','React','Tooltip.react','UFIPrivateReplyIndicator.react','UFIReactionsSocialSentence.react','UFIConfig','URI','XUFICommentTooltipController','XUFIGroupSeenByProfileDialogController','XUFIGroupSeenByProfileBrowserController','XUFIShareTooltipController','XUIText.react'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=k.constructor).call.apply(m,[this].concat(p)),this.onCommentsClick=function(event){var r=this.props.contextArgs.commentajaxify;if(r){if(this.props.contextArgs.showtheaterforcomment){this.launchSnowlift(r,event.currentTarget);}else this.launchDialog(r,event.currentTarget);}else if(this.props.onCommentClick)this.props.onCommentClick(event);this.logCountAction('comments','click');event.preventDefault();}.bind(this),this.onSeensClick=function(event){var r=this.props.feedback,s=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',r.entidentifier).getURI();s=c('ActorURI').create(s,r.actorforpost);this.launchDialog(s.toString(),event.currentTarget);this.logCountAction('seens','click');event.preventDefault();}.bind(this),this.onSharesClick=function(event){var r=this.props.feedback,s=r.sharefbid||r.targetfbid,t=c('ActorURI').create(new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:s}),r.actorforpost);this.launchDialog(t.toString(),event.currentTarget);this.logCountAction('shares','click');event.preventDefault();}.bind(this),this.onViewsClick=function(event){this.logCountAction('views','click');}.bind(this),this.onViewsHover=function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction('views','hover');}.bind(this),this.launchSnowlift=function(r,s){c('Bootloader').loadModules(["PhotoSnowlift"],function(t){t.bootstrap(r,s);},'UFIReactionsBlingSocialSentence.react');},this.launchDialog=function(r,s){c('Bootloader').loadModules(["AsyncDialog"],function(t){t.bootstrap(r,s,'dialog');},'UFIReactionsBlingSocialSentence.react');},this.logCountAction=function(r,s){c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:s,target_type:'count',target_subtype:r});}.bind(this),this.renderComments=function(){var r=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!r)return null;var s=isNaN(this.props.feedback.commentcountreduced)&&!r?this.props.feedback.commentcountreduced:c('NumberFormat').formatIntegerWithDelimiter(this.props.commentCount,c('UFIConfig').numberDelimiter),t=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':t,href:this.props.href,onClick:this.onCommentsClick,role:'button'},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',s),i['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})])));}.bind(this),this.renderSeens=function(){if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var r=this.props.feedback,s=r.seencount,t=void 0;if(r.seenbyall){t=i._("Seen by everyone");}else if(s===1){t=i._("Seen by 1");}else t=i._("Seen by {count}",[i.param('count',s)]);var u=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:r.entidentifier}),v=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',r.entidentifier).getURI();v=c('ActorURI').create(v,r.actorforpost);return (c('React').createElement('span',{ref:'seen_by_text'},c('React').createElement('a',{href:v,'data-hovercard':u.toString(),className:"_ipm",onClick:this.onSeensClick},t)));}.bind(this),this.renderShares=function(){if(!this.props.feedback.sharecount)return null;var r=this.props.feedback.sharefbid||this.props.feedback.targetfbid,s=c('ActorURI').create(new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:r}),this.props.feedback.actorforpost),t=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':t,href:s,onClick:this.onSharesClick,role:'button'},i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.feedback.sharecountreduced),i['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})])));}.bind(this),this.renderViews=function(){var r=this.props.contextArgs.viewCount,s=null;if(this.canSeeConsolidatedTooltip())s=this.renderViewsTooltip();if(!r)return null;return (c('React').createElement(c('Tooltip.react'),{tooltip:s,'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-position':'above','aria-live':'polite',className:"_ipm",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} view","Views":"{count} Views"},[i.param('count',this.props.contextArgs.viewCountReduced),i['enum'](r==='1'?'View':'Views',{View:'View',Views:'Views'})])));}.bind(this),this.canSeeConsolidatedTooltip=function(){var r=this.props.contextArgs.postViewCount,s=this.props.contextArgs.totalPosts,t=this.props.contextArgs.otherPostsViewCount;return !!s&&s>1&&!!r&&!!t;}.bind(this),this.renderViewsTooltip=function(){var r=this.props.contextArgs.totalPosts,s=this.props.contextArgs.postViewCount,t=this.props.contextArgs.otherPostsViewCount,u=r-1;return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},i._("Video posted {number of posts} times",[i.param('number of posts',r)])),c('React').createElement('br',null),i._({"view":"{post views} view from this post","views":"{post views} views from this post"},[i.param('post views',s),i['enum'](s==='1'?'view':'views',{view:'view',views:'views'})]),c('React').createElement('br',null),i._({"view":{"post":"{total views} view from {posts count} other post","posts":"{total views} view from {posts count} other posts"},"views":{"post":"{total views} views from {posts count} other post","posts":"{total views} views from {posts count} other posts"}},[i.param('total views',t),i['enum'](t==='1'?'view':'views',{view:'view',views:'views'}),i.param('posts count',u),i['enum'](u===1?'post':'posts',{post:'post',posts:'posts'})])));}.bind(this),this.renderPrivateReply=function(){var r=this.props.feedback.messagereplycontext;if(!r||r.status!==c('PagesPrivateReplyConstants').Status.ALREADY_REPLIED)return null;return (c('React').createElement('span',{className:"_ipm"},c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:r.status})));}.bind(this),n;}l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_ipn"},c('React').createElement('div',{className:"_ipo"},c('React').createElement('div',{className:"_36_q"},this.renderComments()),c('React').createElement('div',{className:"_36_q"},this.renderShares()),c('React').createElement('div',{className:"_36_q"},this.renderSeens()),c('React').createElement('div',{className:"_36_q"},this.renderViews()),c('React').createElement('div',{className:"_36_q"},this.renderPrivateReply())),c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:this.props.feedback,contextArgs:this.props.contextArgs})));};f.exports=l;}),null);
__d('UFIBling.react',['CommentPrelude','React','TrackingNodes','UFIBlingBox.react','UFIInstanceState','UFIReactionsBlingSocialSentence.react','UFIToplevelPagedCommentList','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);}j.prototype.render=function(){var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=l.permalink;if(k.showtheaterforcomment&&k.commentredirecturi){n=k.commentredirecturi;k=Object.freeze(babelHelpers['extends']({},k,{commentajaxify:k.commentredirecturi}));}var o=new (c('URI'))(n).addQueryData({comment_tracking:m}).toString(),p=c('UFIToplevelPagedCommentList').getCommentList(k.ftentidentifier,l.defaultcommentorderingmode).getDisplayedCommentCount(),q=(k.feedbackMode==='none'||k.feedbackMode==='toggle')&&k.hasReactions&&l.displayreactions,r=function(event){event.preventDefault();if(q&&k.feedbackMode==='expanded'){this.$UFIBling1();}else{c('CommentPrelude').onBlingboxClick(event.currentTarget);if(!k.disableinlinetoggle)this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}.bind(this);if(q){return (c('React').createElement(c('UFIReactionsBlingSocialSentence.react'),{commentCount:p,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,feedback:l,href:o,onCommentClick:r}));}else{var s=void 0,t=void 0,u=void 0;if(k.hasReactions){s=l.reactioncount;t=l.reactioncountmap;u=l.reactioncountreduced;}return (c('React').createElement(c('UFIBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:r,permalink:o,reactionCount:s,reactionCountMap:t,reactionCountReduced:u,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly}));}};j.prototype.$UFIBling1=function(){c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'commentsToggling',true);};f.exports=j;}),null);
__d('UFICommentActionLink.react',['React','UFICommentLink.react','UFIInstanceState'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props.contextArgs,m=l.commentajaxify,n=l.commentredirecturi,o=l.instanceid,p=l.showtheaterforcomment,q=l.loggedOutLinkConfig;if(!m&&q&&q.showCommentLink)m=q.commentAjaxifyURI;if(m){return (c('React').createElement(c('UFICommentLink.react'),{ajaxify:m,rel:p?'theater':'dialog'}));}else if(n)return (c('React').createElement(c('UFICommentLink.react'),{href:n,rel:p?'theater':''}));return (c('React').createElement(c('UFICommentLink.react'),{onClick:function r(event){event.preventDefault();c('UFIInstanceState').updateState(o,'commentsToggling',true);c('UFIInstanceState').updateStateFields(o,'addCommentInput',{expanded:true});}}));};function k(){h.apply(this,arguments);}k.propTypes={contextArgs:j.object.isRequired};f.exports=k;}),null);
__d('UFILikeLink.react',['cx','fbt','Bootloader','React','ReactDOM','TrackingNodes','UFILikeWebDriverIDs'],(function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=null;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(){var o,p;'use strict';for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={nuxShown:false},this.onClick=function(t){if(this.props.href)return;t.preventDefault();this.props.onClick(t);if(this.props.showLikeNuxForGroupMallAds){var u=!this.props.likeAction;if(!u){c('ReactDOM').findDOMNode(this.$UFILikeLink1).focus();this.setState({nuxShown:true});c('Bootloader').loadModules(["UFIGroupMallAdsLikeNux.react"],function(v){m=v;},'UFILikeLink.react');}else this.setState({nuxShown:false});}}.bind(this),this.renderLayers=function(){if(!this.state.nuxShown||!m)return null;return (c('React').createElement(m,{nuxShown:this.state.nuxShown,nuxContent:this.props.likeNuxContent,contextRef:this.$UFILikeLink1}));}.bind(this),p;}n.prototype.render=function(){'use strict';var o=!this.props.likeAction,p=o?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,q=!o||!this.props.forcelegacyrendering?i._("Like"):i._("Unlike"),r=c('TrackingNodes').getTrackingInfo(o?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),s=o?i._("Unlike this"):i._("Like this");return (c('React').createElement('span',null,c('React').createElement('a',{className:"_48-k"+(' '+"UFILikeLink")+(o?' '+"UFILinkBright":''),ref:function(t){return this.$UFILikeLink1=t;}.bind(this),'data-testid':p,href:this.props.href||'#',role:'button','aria-label':s,'aria-live':'polite','aria-pressed':o,rel:this.props.rel,ajaxify:this.props.ajaxify,onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:function(t,u){this.props.onKeyDown&&this.props.onKeyDown(t,u);}.bind(this),'data-ft':r},q),this.renderLayers()));};n.propTypes={ajaxify:l.string,href:l.string,likeAction:l.bool,rel:l.string,forcelegacyrendering:l.bool,onClick:l.func,showLikeNuxForGroupMallAds:l.bool,likeNuxContent:l.string};n.defaultProps={forcelegacyrendering:false,showLikeNuxForGroupMallAds:false};f.exports=n;}),null);
__d('UFILikeActionLink.react',['React','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIReactionTypes','UFIStoryAction'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.onClick=function(event){event.preventDefault();var q=this.props.feedback.hasviewerliked;this.context.dispatch(c('UFIStoryAction').changeReaction(this.props.contextArgs,q?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,event.target));}.bind(this),m;}k.prototype.render=function(){var l=this.props,m=l.contextArgs,n=l.feedback;if(!m.showLikeNuxForGroupMallAds&&m.hasReactions&&n.canviewerreact&&c('UFIReactionsLinkImpl.react')){return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{contextArgs:m,nuxConfig:m.reactionsNuxConfig,reaction:n.viewerreaction,suggestedReaction:n.suggestedreaction,supportedReactions:n.supportedreactions}));}else{var o=m.loggedOutLinkConfig,p=null;if(o&&o.showLikeLink)p=o.likeAjaxifyURI;return (c('React').createElement(c('UFILikeLink.react'),{ajaxify:p,likeAction:!n.hasviewerliked,onClick:this.onClick,rel:p?'dialog':null,forcelegacyrendering:m.forcelegacyrendering,showLikeNuxForGroupMallAds:m.showLikeNuxForGroupMallAds,likeNuxContent:m.groupMallAdsCommentNuxContent}));}};k.contextTypes={dispatch:j.func};k.propTypes={feedback:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k;}),null);
__d('UFIShareNowMenuBootloader.react',['BootloadedComponent.react','JSResource','React','UFIShareLink.react'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j='ufi_share_link_placeholder',k='ufi_share_link_loaded';h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.state={openOnInit:false,focusOnInit:false,interacted:false},n;}l.prototype.render=function(){'use strict';var m=this.state,n=m.openOnInit,o=m.focusOnInit,p=m.interacted,q=this.props,r=q.endpoint,s=q.endpointData,t=q.onShow,u=q.onHide,v=c('React').createElement(c('UFIShareLink.react'),{href:'#','data-testid':j,onClick:function(){return this.setState({interacted:true,openOnInit:true});}.bind(this),onFocus:function(){return this.setState({interacted:true,focusOnInit:true});}.bind(this),onMouseOver:function(){return this.setState({openOnInit:false,focusOnInit:false,interacted:true});}.bind(this)});if(p)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIShareNowMenu.react').__setRef('UFIShareNowMenuBootloader.react'),bootloadPlaceholder:v,endpoint:r,endpointData:s,onShow:t,onHide:u,openOnInit:n,focusOnInit:o,testID:k}));return v;};f.exports=l;}),null);
__d('UFIShareActionLink.react',['ActorURI','React','UFIShareNowMenuBootloader.react','UFIShareLink.react','URI'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.shareURI,n=l.shareRel,o=l.shareNowMenuURI,p=l.feedbackReferrer,q=l.feedbackSource,r=l.feedbackTarget,s={feedback_referrer:p,feedback_source:q},t=r&&r.actorforpost;if(t){m=m&&c('ActorURI').create(m,t);o=o&&new (c('URI'))(o).addQueryData('actor_id',t).toString();}return o?c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:o,endpointData:s}):c('React').createElement(c('UFIShareLink.react'),{href:new (c('URI'))(m).addQueryData(s),rel:n});};function k(){h.apply(this,arguments);}k.propTypes={feedbackTarget:j.object,shareURI:j.string,shareRel:j.string,shareNowMenuURI:j.string,shareLinkHref:j.string,feedbackReferrer:j.string,feedbackSource:j.number};f.exports=k;}),null);
__d('UFIActionLinks.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','FBFeedLocations','JSResource','OnVisible','Parent','React','UFIBling.react','UFICommentActionLink.react','UFIConfig','UFIInstanceAction','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFIShareActionLink.react','UFISharedDispatcher','joinClasses'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l='ufi-share-link.render';j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){var n=this.$UFIActionLinks2();c('BanzaiODS').bumpEntityKey('feedback',n);if(n===l)this.$UFIActionLinks1=new (c('OnVisible'))(this.refs.root,function(){c('BanzaiODS').bumpEntityKey('feedback','ufi-share-link.rendered-vpv');if(this.$UFIActionLinks1){this.$UFIActionLinks1.remove();this.$UFIActionLinks1=null;}}.bind(this),true);};m.prototype.componentWillUnmount=function(){if(this.$UFIActionLinks1){this.$UFIActionLinks1.remove();this.$UFIActionLinks1=null;}};m.prototype.renderActorSelector=function(){if(this.props.hideActorSelector)return null;var n=this.props.contextArgs,o=n.actorSelectorConfig,p=n.hasReactions;if(!o)return null;var q=o.module;return (c('React').createElement('div',{className:"_40yk"+(p?' '+"_pbn":'')},c('React').createElement(q,babelHelpers['extends']({},o.props,{nuxHoverContext:c('Parent').byTag(this.refs.root,'form')}))));};m.prototype.renderActionList=function(){var n=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderEmbedLink()].filter(function(r){return r;}).map(function(r,s){return (c('React').createElement('span',{key:s},r));}),o=null;if(this.props.contextArgs.quickFeedback){var p=this.props.contextArgs.quickFeedback,q=p.UFIQuickFeedbackLink;o=c('React').createElement(q,p);}if(n.length||o){return (c('React').createElement('div',{className:"_42nr"},n,o));}else return null;};m.prototype.renderBling=function(){if(this.props.contextArgs.showBling)return (c('React').createElement(c('UFIBling.react'),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return (c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this.props.contextArgs)));}.bind(this)}));return null;};m.prototype.renderLikeLink=function(){var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=o.loggedOutLinkConfig;if(!p.hasviewerliked&&!p.viewercanlike&&!(q&&q.showLikeLink))return null;return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:p,contextArgs:o}));};m.prototype.renderCommentLink=function(){var n=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(n&&n.showCommentLink)){var o=this.props.contextArgs.disabledCommentTooltip;if(o)return (c('React').createElement('span',null,c('React').createElement('span',{className:"_1ysv",'data-hover':'tooltip','data-tooltip-content':o},i._("Comment"))));return null;}return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.props.contextArgs}));};m.prototype.$UFIActionLinks2=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n)return 'ufi-share-link.unavailable';var o=this.props.contextArgs.loggedOutLinkConfig;if(o&&o.showShareLink)return 'ufi-share-link.loggedout';return l;};m.prototype.renderShareLink=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n)return null;var o=this.props.contextArgs.loggedOutLinkConfig;if(o&&o.showShareLink)n.shareURI=o.shareAjaxifyURI;return (c('React').createElement(c('UFIShareActionLink.react'),babelHelpers['extends']({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},n)));};m.prototype.renderPrivateReplyLink=function(){var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=p.actorforpost,r=p.messagereplycontext;if(!c('UFIPrivateReplyLink.react').willRender(r,q))return null;return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:q,activityID:o.ftentidentifier,context:r,seeResponseLabel:false}));};m.prototype.renderEmbedLink=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n||!n.embedURI)return null;return (c('React').createElement('a',{href:n.embedURI,rel:'dialog',className:"_2g1w"},i._("Embed")));};m.prototype.renderSearchFeedback=function(){var n=this.props.contextArgs.inlineSearchFeedbackConfig;if(!n)return null;return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinks.react')},n)));};m.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return (c('React').createElement('div',{className:"_3csb"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIActionLinks.react'),contextArgs:this.props.contextArgs,feedback:this.props.feedbacktarget})));};m.prototype.renderCrowdsourceLabelingContainer=function(){if(!c('UFIConfig').showUFICrowdsource)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFICrowdsourceLabelingContainer.react').__setRef('UFIActionLinks.react'),feedback:this.props.feedbacktarget,contextArgs:this.props.contextArgs}));};m.prototype.renderLayout=function(n,o,p){o=o.map(function(q,r){return q&&c('React').createElement('div',{className:"_3m9g",key:r},q);}).filter(function(q){return q;});if(!n&&o.length===0)return null;return (c('React').createElement('div',{className:c('joinClasses')("_3399",p)},o,c('React').createElement('div',{className:"_524d"},n)));};m.prototype.shouldRenderActionButtons=function(){var n=null;if(this.props.contextArgs.feedcontext)try{n=JSON.parse(this.props.contextArgs.feedcontext).location_type;}catch(o){}if(n===c('FBFeedLocations').GOODWILL_THROWBACK_PERMALINK||n===c('FBFeedLocations').GOODWILL_THROWBACK_PROMOTION||n===c('FBFeedLocations').GOODWILL_THROWBACK_SHARE||n===c('FBFeedLocations').GROUP_SUGGESTIONS_WITH_STORY)return false;return true;};m.prototype.hasCounts=function(){return this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount;};m.prototype.render=function(){var n=this.renderActorSelector(),o=this.renderSearchFeedback(),p=[],q=[],r=null,s=this.renderBling();if(s){q.push(n);if(this.hasCounts()){r=this.renderLayout(null,[o],"_1f6t");}else q.push(o);}else{p.push(n);p.push(o);}p.push(this.renderCommentOrderingModeSelector());var t="_1f6t"+(this.props.contextArgs.hasReactions?' '+"_4_dr":''),u=this.shouldRenderActionButtons()?this.renderLayout(this.renderActionList(),p,"_a7s clearfix"):null,v=this.renderCrowdsourceLabelingContainer();return (c('React').createElement('div',{ref:'root'},r,this.renderLayout(s,q,t),u,v));};function m(){j.apply(this,arguments);}f.exports=m;}),null);
__d('UFICallbackStore',['FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){var l=k.type,m=babelHelpers.objectWithoutProperties(k,['type']);this.__emitter.emit(l,m);};j.prototype.on=function(k,l){return this.__emitter.addListener(k,l);};j.prototype.remove=function(){this.__emitter.removeAllListeners();};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d("CommentLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"829607027174421",queryID:"865890146879442"});}),null);
__d('UFICommentLikeSubscription',['CommentLikeWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+j;},_getQueryID:function i(){return c('CommentLikeWebGraphQLSubscription').getQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:j})};},_getSubscriptionCallName:function i(){return 'comment_like_subscribe';}});f.exports=h;}),null);
__d("CommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"876506429151147",queryID:"876506445817812"});}),null);
__d('UFICommentSubscription',['CommentCreateWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+j;},_getQueryID:function i(){return c('CommentCreateWebGraphQLSubscription').getQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'comment_create_subscribe';}});f.exports=h;}),null);
__d('UFICommercialBreakController',['Map','SubscriptionsHandler','UFIInstanceState'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){this.ufiID=j;this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(k.addListener('commercialBreak/hideUFI',function(){return this.hideUFI();}.bind(this)),k.addListener('commercialBreak/showUFI',function(){return this.showUFI();}.bind(this)));}h.prototype.hideUFI=function(){c('UFIInstanceState').updateState(this.ufiID,'inCommercialBreak',true);};h.prototype.showUFI=function(){c('UFIInstanceState').updateState(this.ufiID,'inCommercialBreak',false);};h.prototype.stop=function(){this.subscriptions.release();};var i=new (c('Map'))();f.exports={start:function j(k,l){if(i.get(k))return;i.set(k,new h(k,l));},stop:function j(k){var l=i.get(k);if(!l)return;l.stop();i['delete'](k);}};}),null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList','UFIConstants'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIReplyCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};function j(k,l,m,n){i.constructor.call(this,k,l,c('UFIConstants').UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;}),null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelPagedCommentList'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIToplevelPagedCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};j.getCommentListsForFeedbackTargetID=function(k){};j.getCommentListForFeedbackTargetID_UNSAFE=function(k){};j.resetCommentListsForFeedbackTargetID=function(k){};function j(k,l,m){i.constructor.call(this,k,c('UFIConstants').UFICommentOrderingMode.FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){p[q.id]=q;});l.forEach(function(q){this.addOrUpdateComment(p[q]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;}),null);
__d('UFIFeedbackFilters',[],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRequestedIDs:function i(j){var k=[];if(j.reactorids)k=k.concat(j.reactorids);if(j.actorforpost)k=k.concat(j.actorforpost);return k;}};f.exports=h;}),null);
__d('UFIFetcher',['Promise','ShortProfiles','UFIPagedCommentList','UFIRange'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={fetchShortProfiles:function i(j){return new (c('Promise'))(function(k,l){return (c('ShortProfiles').getMulti(j,k));});},fetchComments:function i(j,k,l){return new (c('Promise'))(function(m,n){return (j.getComments(k.getOffset(),k.getLength(),l,m));}).then(function(m){return Object.values(m);});},fetchCommentsOrThrow:function i(j,k,l){return Object.values(j.getCommentsOrThrow(k,l));}};f.exports=h;}),null);
__d("FeedbackLikeWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"836675696467554",queryID:"865890153546108"});}),null);
__d('UFILikeSubscription',['FeedbackLikeWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_like_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('FeedbackLikeWebGraphQLSubscription').getQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'feedback_like_subscribe';}});f.exports=h;}),null);
__d('FacecastStreamingCommentDelayTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentDelayLoggerConfig',this.$FacecastStreamingCommentDelayTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$FacecastStreamingCommentDelayTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$FacecastStreamingCommentDelayTypedLogger1=babelHelpers['extends']({},this.$FacecastStreamingCommentDelayTypedLogger1,j);return this;};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.comment_id=j;return this;};h.prototype.setEvent=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.event=j;return this;};h.prototype.setProtocol=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.protocol=j;return this;};h.prototype.setServerTimestamp=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.server_timestamp=j;return this;};h.prototype.setVC=function(j){this.$FacecastStreamingCommentDelayTypedLogger1.vc=j;return this;};var i={comment_id:true,event:true,protocol:true,server_timestamp:true,vc:true};f.exports=h;}),null);
__d('FacecastStreamingCommentHealthTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentHealthLoggerConfig',this.$FacecastStreamingCommentHealthTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FacecastStreamingCommentHealthLoggerConfig',this.$FacecastStreamingCommentHealthTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$FacecastStreamingCommentHealthTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$FacecastStreamingCommentHealthTypedLogger1=babelHelpers['extends']({},this.$FacecastStreamingCommentHealthTypedLogger1,j);return this;};h.prototype.setCommentID=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.comment_id=j;return this;};h.prototype.setGqlsContext=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.gqls_context=j;return this;};h.prototype.setServerTimestamp=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.server_timestamp=j;return this;};h.prototype.setVC=function(j){this.$FacecastStreamingCommentHealthTypedLogger1.vc=j;return this;};var i={comment_id:true,gqls_context:true,server_timestamp:true,vc:true};f.exports=h;}),null);
__d('StreamingReactionsTrayEvents',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='streamingReactionsTray/AddReactionAnimate',i='streamingReactionsTray/HideChannelViewDetails',j='streamingReactionsTray/ShowChannelViewDetails',k='streamingReactionsTray/UpdateSurface',l='streamingReactionsTray/ResizeChannelViewWindow',m='streamingReactionsTray/ReactionStateChange',n='streamingReactionsTray/FireworksAnimating',o={AddReactionAnimate:h,HideChannelViewDetails:i,ReactionStateChange:m,ResizeChannelViewWindow:l,ShowChannelViewDetails:j,UpdateSurface:k,FireworksAnimating:n};f.exports=o;}),null);
__d("LiveVideoCommentCreateWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"876506435817813",queryID:"876506442484479"});}),null);
__d('UFILiveVideoCommentSubscription',['LiveVideoCommentCreateWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('LiveVideoCommentCreateWebGraphQLSubscription').getQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'live_video_comment_create_subscribe';}});f.exports=h;}),null);
__d("XLiveStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});}),null);
__d("XLiveStreamingRankingExperimentAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/exp\/",{eft_id:{type:"String",required:true}});}),null);
__d('UFILiveStreamingComments',['invariant','Arbiter','AsyncRequest','BanzaiODS','CurrentUser','FacecastStreamingCommentDelayTypedLogger','FacecastStreamingCommentHealthTypedLogger','Map','Set','StreamingReactionsTrayEvents','UFICentralUpdates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFILiveVideoCommentSubscription','UFISubscriptionUpdates','UFIToplevelStreamedCommentList','XLiveStreamingCommentsAsyncController','XLiveStreamingRankingExperimentAsyncController','clearInterval','setInterval'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=new (c('Map'))(),j=10000,k=10000,l=2000;c('BanzaiODS').setEntitySample('feedback',.0001);function m(n,o,p,q){var r,s=this;this.eftID=n;this.totalCommentCount=o;this.tailCommentFBID=p;this.streamingMode=q;this.queue=[];this.ufiPayloadBuffer=[];this.fireworksAnimating=false;this.localCommentBodies=new (c('Set'))();this.errorCount=0;this.mayShortCircuitRendering=false;this.loggedComments=new (c('Set'))();this.mayLogExposure=true;if(this.streamingMode==='Polling'){this.interval=c('setInterval')(function(){if(this.queue.length>c('UFIConfig').facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new (c('AsyncRequest'))().setURI(this.getNextURI()).setHandler(function(t){switch(t.payload.status){case 'streaming':this.$UFILiveStreamingComments1(t.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':this.stopStream();return;case 'transient-error':return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)c('BanzaiODS').bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){c('BanzaiODS').bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');this.stopStream();return;}break;}}.bind(this)).send();}.bind(this),l);this.subscription=null;}else if(this.streamingMode==='Subscription'){(function(){s.interval=c('setInterval')(function(){return this.renderNextComment();}.bind(s),l);var t=Date.now();c('UFIFeedbackTargets').getFeedbackTarget(s.eftID,function(u){this.subscription=c('UFILiveVideoCommentSubscription').subscribe(u.targetfbid,function(v){c('UFISubscriptionUpdates').handleLiveStreamingComment(this.eftID,v.live_video_comment_create_subscribe,Date.now()-t);}.bind(this));}.bind(s));})();}else throw new Error('Invalid streamingMode');if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)this.healthLoggerInterval=c('setInterval')(function(){var t=new (c('FacecastStreamingCommentHealthTypedLogger'))().setCommentID(this.tailCommentFBID);if(this.subscription)t.setGqlsContext(this.subscription.getContext().transformContext);t.log();}.bind(this),k);c('UFICentralUpdates').subscribe('update-comments',function(t,u){if(u.comments&&u.comments.length)u.comments.forEach(function(v){if(v.parentcommentid)return;if(v.islocal)this.trackLocalComment(v);}.bind(this));}.bind(this));c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').FireworksAnimating,function(t,u){this.fireworksAnimating=u;if(this.fireworksAnimating){clearTimeout(this.timeoutID);this.timeoutID=setTimeout(function(){if(this.fireworksAnimating){this.fireworksAnimating=false;c('BanzaiODS').bumpEntityKey('streaming_comments','comment_fetching_unpause_failure');}}.bind(this),j);}else this.backFillComments();}.bind(this));}m.prototype.enqueueSubscribedComment=function(n,o){!(this.streamingMode==='Subscription')?h(0):void 0;if(this.resemblesLocalComment(n.comments[0]))return;this.tailCommentFBID=n.comments[0].fbid;this.queue.push(n);this.queue=m.pruneQueue(this.queue);if(this.queue.length===1&&this.mayShortCircuitRendering){c('BanzaiODS').bumpEntityKey('streaming_comments','short_circuit_render');c('clearInterval')(this.interval);this.renderNextComment();this.interval=c('setInterval')(function(){return this.renderNextComment();}.bind(this),l);}this.$UFILiveStreamingComments2(o);};m.prototype.$UFILiveStreamingComments1=function(n){!(this.streamingMode==='Polling')?h(0):void 0;if(!n.ufipayloads||isNaN(n.commentcount))return;var o=n.ufipayloads.filter(function(q){return !this.resemblesLocalComment(q.comments[0]);}.bind(this)),p=-1;if(this.tailCommentFBID!==null)p=o.findIndex(function(q){return q.comments[0].fbid===this.tailCommentFBID;}.bind(this),this);if(p===-1){this.queue=[];}else o=o.slice(p+1);if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)o.forEach(function(q){return this.logDelayInfo(q.comments[0].fbid,'poll','Polling');}.bind(this));this.queue=this.queue.concat(o);if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;this.$UFILiveStreamingComments2(n.commentcount);};m.prototype.$UFILiveStreamingComments2=function(n){var o=n-this.queue.length;if(o>this.totalCommentCount){this.totalCommentCount=o;c('UFIToplevelStreamedCommentList').getCommentList(this.eftID).updateCommentCount(this.totalCommentCount);}};m.prototype.$UFILiveStreamingComments3=function(){var n=c('UFIToplevelStreamedCommentList').getCommentList(this.eftID);while(this.queue.length){var o=this.queue.shift();if(!n.hasComment(o.comments[0]))return o;}return null;};m.prototype.renderNextComment=function(){var n=this.$UFILiveStreamingComments3();if(!n){this.mayShortCircuitRendering=true;return;}if(this.fireworksAnimating){this.ufiPayloadBuffer.push(n);}else{c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,n);if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)this.logDelayInfo(n.comments[0].fbid,'render',this.streamingMode);c('BanzaiODS').bumpEntityKey('feedback','facecast_live_comment_rendered');}this.mayShortCircuitRendering=false;if(c('CurrentUser').isLoggedIn()&&this.mayLogExposure){new (c('AsyncRequest'))().setURI(c('XLiveStreamingRankingExperimentAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI()).send();this.mayLogExposure=false;}};m.prototype.backFillComments=function(){for(var n=this.ufiPayloadBuffer,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var q;if(o){if(p>=n.length)break;q=n[p++];}else{p=n.next();if(p.done)break;q=p.value;}var r=q;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,r);}this.ufiPayloadBuffer=[];};m.prototype.getNextURI=function(){return c('XLiveStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI();};m.prototype.trackLocalComment=function(n){var o=m.hashCommentData(n);this.localCommentBodies.add(o);};m.prototype.resemblesLocalComment=function(n){var o=m.hashCommentData(n);return this.localCommentBodies.has(o);};m.prototype.logDelayInfo=function(n,event,o){var p=n+':'+event;if(this.loggedComments.has(p))return;this.loggedComments.add(p);new (c('FacecastStreamingCommentDelayTypedLogger'))().setCommentID(n).setEvent(event).setProtocol(o).log();};m.prototype.stopStream=function(){c('clearInterval')(this.interval);c('clearInterval')(this.healthLoggerInterval);if(this.subscription)this.subscription.unsubscribe();};m.hashCommentData=function(n){var o=n.author+n.body.text;if(n.attachment)o+=':'+n.attachment.fbid;return o;};m.pruneQueue=function(n){var o=n.length-c('UFIConfig').facecastWWWCommentQueueThreshold;if(o<=0)return n;var p=n.map(function(q,r){return {index:r,priority:q.priority};}).sort(function(q,r){var s=q.priority-r.priority;return s!==0?s:q.index-r.index;}).map(function(q){return q.index;}).slice(0,o);return n.filter(function(q,r){return p.indexOf(r)===-1;});};m.start=function(n,o,p,q){if(i.get(n))return;i.set(n,new m(n,o,p,q));};m.enqueueSubscribedComment=function(n,o,p){var q=i.get(n);if(!q)return;q.enqueueSubscribedComment(o,p);};m.stop=function(n){var o=i.get(n);if(!o)return;o.stopStream();};f.exports=m;}),null);
__d('UFISubscriptionUpdates',['fbt','BanzaiODS','FacecastStreamingCommentDelayTypedLogger','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIComments','UFIConfig','UFIConstants','UFILiveStreamingComments','UFIReactionsUtils','UFISharedDispatcher','UFIStoryAction'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('BanzaiODS').setEntitySample('feedback',.0001);function i(k,l,m){new (c('LiveWWWFeedbackTypedLogger'))().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log();}var j={handleLiveLike:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_like_received');i('like',n);if(!m||!m.feedback_like_subscribe)return;var o=m.feedback_like_subscribe.feedback,p=m.feedback_like_subscribe.liker;if(!o||!p)return;var q=[babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,likesentences:{current:o.does_viewer_like?o.viewer_likes_sentence:o.viewer_does_not_like_sentence,alternate:o.does_viewer_like?o.viewer_does_not_like_sentence:o.viewer_likes_sentence},hasviewerliked:o.does_viewer_like,likecount:o.likers.count},{})],r=o.reactions_summary;if(r){var s=c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),t=o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0,u=o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count;q.push(babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:p.id,clientid:m.feedback_like_subscribe.client_mutation_id,entidentifier:l,viewerreaction:t,reactioncount:o.reactors.count,reactioncountreduced:u,reactioncountmap:s,reactionsentences:{current:t?o.viewer_likes_reaction_sentence:o.viewer_does_not_like_reaction_sentence,alternate:t?o.viewer_does_not_like_reaction_sentence:o.viewer_likes_reaction_sentence}},{}));}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:q});},handleLiveComment:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_comment_received');var o=m&&m.comment;if(!o)return;i('comment',n,{comment_id:o.legacy_token});var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{comments:[p],isstreaming:o.written_while_video_was_live});},handleLiveStreamingComment:function k(l,m,n){c('BanzaiODS').bumpEntityKey('feedback','gql_streaming_comment_received');var o=m&&m.comment;if(!o)return;i('comment',n,{comment_id:o.legacy_token});if(c('UFIConfig').shouldLogFacecastStreamingCommentDelay)new (c('FacecastStreamingCommentDelayTypedLogger'))().setCommentID(o.legacy_fbid).setEvent('push').setProtocol('Subscription').log();var p=this.prepareCommentData(l,o,n,m.client_mutation_id);c('UFILiveStreamingComments').enqueueSubscribedComment(l,{comments:[p],isstreaming:o.written_while_video_was_live,priority:o.live_streaming_comment_priority},m.feedback.top_level_comments.total_count);},prepareCommentData:function k(l,m,n,o){var p=babelHelpers['extends']({author:m.author.id,body:m.body,cancomment:m.feedback.can_viewer_comment,canedit:m.can_viewer_edit,canremove:m.can_viewer_delete,clientid:o,ftentidentifier:l,id:m.legacy_token,fbid:m.legacy_fbid,legacyid:m.legacy_fbid,timestamp:{time:m.created_time,text:h._("A few seconds ago")},hasviewerliked:m.feedback.does_viewer_like,isauthornoncoworker:m.is_author_non_coworker,isfeatured:m.is_featured,istranslatable:m.translation_available_for_viewer,likecount:m.feedback.likers.count,viewercanlike:m.feedback.can_viewer_like,parentcommentid:m.comment_parent&&m.comment_parent.legacy_token,spamreplycount:0},{});if(m.attachments.length){var q=m.attachments[0],r=q.style_list;if(r&&r.length&&r[0]=='sticker'){var s=q.target;p.attachment={fbid:s.id,metadata:{source_uri:s.img.uri,source_uri_2x:s.img_2x.uri,width:s.img.width,height:s.img.height,frameCount:s.frame_count,frameRate:s.frame_rate,framesPerCol:s.frames_per_column,framesPerRow:s.frames_per_row,sprite_uri:s.sprite_img&&s.sprite_img.uri,sprite_uri_2x:s.sprite_img_2x&&s.sprite_img_2x.uri},type:'sticker'};}else if(r&&r.length&&r[0]=='photo'){var t=q.target;p.attachment={fbid:t.id,metadata:{preview_uri:t.photo_img&&t.photo_img.uri,width:t.photo_img.width,height:t.photo_img.height,url:t.url},type:'photo'};}else if(r&&r.length&&r[0]=='share'){q.type='live_share';p.attachment=q;}else if(r&&r.length&&r[0]=='video_inline'){q.type='video';p.attachment=q;}else if(r&&r.length&&r[0]=='comment_place_info'){q.type='live_comment_place_info';p.attachment=q;}}var u=m.feedback;if(u.reactions_summary){p.canviewerreact=u.can_viewer_react;p.reactioncount=u.reactors.count;p.reactioncountmap=c('UFIReactionsUtils').getReactionCountMapFromSummary(u.reactions_summary);p.reactioncountreduced=u.reaction_count_reduced?u.reaction_count_reduced:u.reactors.count;p.viewerreaction=u.viewer_feedback_reaction_info?u.viewer_feedback_reaction_info.key:0;}return p;},handleLivePinnedComment:function k(l,m,n){var o=m.pinned_comment_event_create_subscribe.pinned_comment_event.pinned_comment;if(o){var p=j.prepareCommentData(l.ftentidentifier,o,n,m.client_mutation_id);c('UFIComments').setComment(p.id,new (c('ImmutableObject'))(p));c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(l,p.id));}else c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(l));},handleLiveCommentLike:function k(l,m,n){i('comment_like',n);var o=m&&m.comment_like_subscribe&&m.comment_like_subscribe.feedback;if(!o)return;var p=null;if(o.reactions_summary)p={reactioncount:o.reactors.count,reactioncountmap:c('UFIReactionsUtils').getReactionCountMapFromSummary(o.reactions_summary),reactioncountreduced:o.reaction_count_reduced?o.reaction_count_reduced:o.reactors.count,viewerreaction:o.viewer_feedback_reaction_info?o.viewer_feedback_reaction_info.key:0};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,clientid:m.comment_like_subscribe.client_mutation_id,commentid:o.legacy_comment_token,likecount:o.likers&&o.likers.count,reactiondata:p,viewerliked:o.does_viewer_like}]});}};f.exports=j;}),null);
__d('UFIReactionStore',['Arbiter','FluxStore','UFIActionTypes','UFIReactionTypes','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry'],(function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:c('UFIUserActions').changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,target:k.target,feedbackReferrer:k.contextArgs.feedbackReferrer,fluentContentToken:k.contextArgs.fluentContentToken,isLiveVOD:k.contextArgs.isLiveVOD,islivestreaming:k.contextArgs.islivestreaming});c('Arbiter').inform(c('UFIUIEvents').ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c('UFIReactionTypes').LIKE,reaction_type:k.reactionType,target:k.target});break;}};function j(){h.apply(this,arguments);}f.exports=j;}),null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('JSLogger').create('UFIRetryActions');function i(l,m){var n={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:l.id};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;c('UFIUserActions').addComment(l.ftentidentifier,o,p,{source:m,replyid:l.parentcommentid,attachedphoto:l.body.mentionsphoto,attachedvideo:l.body.mentionsvideo});}function j(l,m){var n=l.body.text,o=l.body.mentionstext;c('UFIUserActions').editComment(l.id,n,o,{source:m,attachedPhoto:l.body.mentionsphoto,attachedSticker:l.attachment,attachedVideo:l.body.mentionsvideo});}var k={retrySubmit:function l(m,n){switch(m.status){case c('UFIConstants').UFIStatus.FAILED_ADD:i(m,n);break;case c('UFIConstants').UFIStatus.FAILED_EDIT:j(m,n);break;default:h.error('retrysubmitstatus',{status:m.status});break;}}};f.exports=k;}),null);
__d("FeedbackTypingWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"829607023841088",queryID:"865890133546110"});}),null);
__d('UFITypingSubscription',['FeedbackTypingWebGraphQLSubscription','BaseGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/feedback_typing_subscribe/feedback_id_'+j;},_getQueryID:function i(){return c('FeedbackTypingWebGraphQLSubscription').getQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:j})};},_getSubscriptionCallName:function i(){return 'feedback_typing_subscribe';}});f.exports=h;}),null);
__d('UFITypingSubscriptionController',['UFITypingSubscription','getByPath','setTimeout'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=15*1000;function i(l){var m=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','friend_count']),n=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','other_count']);return {friendCount:parseInt(m,10)||0,otherCount:parseInt(n,10)||0};}function j(l){return l.friendCount===0&&l.otherCount===0;}function k(l,m){this.$UFITypingSubscriptionController1=null;this.$UFITypingSubscriptionController2=m;this.$UFITypingSubscriptionController3=c('UFITypingSubscription').subscribe(l,this.$UFITypingSubscriptionController4.bind(this));}k.prototype.unsubscribe=function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController3&&this.$UFITypingSubscriptionController3.unsubscribe();};k.prototype.$UFITypingSubscriptionController4=function(l){this.$UFITypingSubscriptionController5();var m=i(l);this.$UFITypingSubscriptionController2(m);if(!j(m))this.$UFITypingSubscriptionController1=c('setTimeout')(function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2({friendCount:0,otherCount:0});}.bind(this),h);};k.prototype.$UFITypingSubscriptionController5=function(){if(this.$UFITypingSubscriptionController1){clearTimeout(this.$UFITypingSubscriptionController1);this.$UFITypingSubscriptionController1=null;}};f.exports=k;}),null);
__d('UFITypingSubscriptionControllerFactory',['UFIConfig','UFISharedDispatcher','UFIStoryAction','UFITypingSubscriptionController','debounce'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=500,i={forUFIController:function j(k,l){var m=c('debounce')(function(n){var o=c('UFIConfig').typingIndicator.fromEveryone,p=void 0;if(n.friendCount){p=c('UFIStoryAction').friendTyping(l);}else if(n.otherCount&&o){p=c('UFIStoryAction').someoneTyping(l);}else p=c('UFIStoryAction').typingStopped(l);c('UFISharedDispatcher').dispatch(p);},h);return new (c('UFITypingSubscriptionController'))(k.targetfbid,m);}};f.exports=i;}),null);
__d("XVODStreamingCommentsAsyncController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/vodcomments\/",{eft_id:{type:"String",required:true},target_ufi_instance_id:{type:"String",required:true},start_time:{type:"Float",required:true},end_time:{type:"Float",required:true},should_backfill:{type:"Bool",defaultValue:false}});}),null);
__d('UFIVODStreamingComments',['AsyncRequest','BanzaiODS','Map','SubscriptionsHandler','UFICentralUpdates','UFIConstants','UFIInstanceAction','UFILivePinnedCommentStore','UFISharedDispatcher','UFIStoryAction','UFIToplevelStreamedCommentList','XVODStreamingCommentsAsyncController','setInterval'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();c('BanzaiODS').setEntitySample('feedback',.0001);function h(j,k){this.ufiController=j;this.videoPlayerController=k;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new (c('SubscriptionsHandler'))();this.commentsAutoplayState=this.ufiController.shouldAutoplayLiveVODComments()?'MayPlay':'MayNotPlay';this.pinQueue=[];this.resetToTime(k.getCurrentTimePosition());this.subscriptions.addSubscriptions(k.addListener('seekEnd',function(l){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.resetToTime(l.position);}.bind(this)),k.addListener('unmute',function(l){if(this.commentsAutoplayState==='MayNotPlay')this.commentsAutoplayState='MayPlay';this.$UFIVODCommentStream1();}.bind(this)),k.addListener('updateStatus',function(l,m){var n=null;while(this.pinQueue.length){if(this.pinQueue[0].timeoffset>l.position)break;n=this.pinQueue.shift();}if(n)this.$UFIVODCommentStream2(n);}.bind(this)));c('setInterval')(this.renderNextComment.bind(this),2000);c('BanzaiODS').bumpEntityKey('vod_comments','www_load');}h.prototype.renderNextComment=function(){if(!this.videoPlayerController.isState('playing'))return;var j=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(j);while(this.queue.length&&this.queue[0].timeoffset<j){var k=this.queue.shift();if(k.timeoffset<j-5)continue;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,k.ufipayload);c('BanzaiODS').bumpEntityKey('feedback','facecast_vod_comment_rendered');break;}this.$UFIVODCommentStream1();};h.prototype.fetchNewCommments=function(j,k,l,m){var n=j+60,o=c('XVODStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.ufiController.getFtEntIdentifier()).setString('target_ufi_instance_id',this.ufiController.getInstanceID()).setFloat('start_time',j).setFloat('end_time',n).setBool('should_backfill',k).getURI();if(this.currentRequest)this.currentRequest.abandon();this.currentRequest=new (c('AsyncRequest'))().setURI(o).setHandler(function(p){var q=p.getPayload();if(q.status==='error')return;if(q.backfillpayload)c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,q.backfillpayload);l(q.ufipayloads);m(q.pinnedcommentpayloads,q.backfillpinnedcommentpayload);this.queueEndTime=n;}.bind(this)).setFinallyHandler(function(){if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didReceiveVODComments(this.ufiController.getContextArgs()));this.currentRequest=null;}.bind(this));this.currentRequest.send();if(k)c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').didRequestVODComments(this.ufiController.getContextArgs()));};h.prototype.onTimeUpdated=function(j){if(j<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,false,function(k){this.queue=this.queue.concat(k);}.bind(this),function(k,l){this.pinQueue=this.pinQueue.concat(k);}.bind(this));};h.prototype.resetToTime=function(j){var k=this.ufiController.getFtEntIdentifier();c('UFIToplevelStreamedCommentList').resetCommentList(k,this.ufiController.getInstanceID());c('UFICentralUpdates').didUpdateFeedback(k);this.fetchNewCommments(j,true,function(l){this.queue=l;}.bind(this),function(l,m){this.pinQueue=l;this.$UFIVODCommentStream2(m);}.bind(this));};h.prototype.stop=function(){this.subscriptions.release();};h.prototype.$UFIVODCommentStream1=function(){var j=c('UFIToplevelStreamedCommentList').getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!j||j.getActualCommentCount()<5||this.commentsAutoplayState!=='MayPlay'||!this.videoPlayerController.isState('playing'))return;c('BanzaiODS').bumpEntityKey('vod_comments','www_autoplay');this.commentsAutoplayState='Played';c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.ufiController.getContextArgs(),c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING));this.ufiController.scrollToTopOfCommentsInViewer();};h.prototype.$UFIVODCommentStream2=function(j){var k=this.ufiController.getContextArgs();if(!k.enableViewPinnedComments)return;var l=c('UFILivePinnedCommentStore').getPinnedCommentID(k.ftentidentifier),m=j.ufipayload;if(!m){if(l!==null)c('UFISharedDispatcher').dispatch(c('UFIStoryAction').unpinComment(k,j.pineventid));return;}var n=m.pinnedcomments[0].id;if(n===l)return;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.STREAMING,m);c('UFISharedDispatcher').dispatch(c('UFIStoryAction').pinComment(k,n,j.pineventid));};var i=new (c('Map'))();f.exports={start:function j(k,l){var m=k.getInstanceID();if(i.get(m))return;i.set(m,new h(k,l));},stop:function j(k,l){var m=i.get(l);if(!m)return;m.stop();i['delete'](l);}};}),null);
__d('UFIController',['csx','invariant','Promise','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','CommentPrelude','CommercialBreakUFIOverlay.react','DOM','DOMContainer.react','DOMQuery','XCommentEmbedPluginEmbedAsyncDialogController','ErrorUtils','JSResource','LivePinnedCommentEventCreateSubscription','LiveTimer','Parent','React','ReactDOM','Run','ShortProfiles','SubscriptionsHandler','TranslationTrigger','StaticUFI.react','UFIComments','UFIActionLinks.react','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICommentFilters','UFICommentLikeSubscription','UFICommentLogger','UFICommentSubscription','UFICommercialBreakController','UFIConfig','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFIFeedbackFilters','UFIFeedbackTargets','UFIFetcher','UFIInstanceAction','UFIInstanceState','UFILikeSubscription','UFILivePinnedCommentStore','UFILiveStreamingComments','UFINewCommentNotifier','UFIOrderingModeStore','UFIRange','UFIReactionStore','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFISharedDispatcher','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFITypingSubscriptionControllerFactory','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry','UFIVODStreamingComments','URI','createArrayFromMixed','ex','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy'],(function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIFeedbackMode,k=c('UFIConstants').UFIPaging,l=c('UFIConstants').UFIPayloadSourceType,m={NEWSSTAND:'newsstand'},n=function q(r,s,t,u){var v=r.getRequestedOffset(),w=r.getRequestedLength(),x=v+w===s,y=x&&o(u)?t-v:w;return new (c('UFIRange'))(v,y);},o=function q(r){return r==l.USER_ACTION||r==l.LIVE_SEND||r==l.STREAMING;};p.prototype.$UFIController15=function(q,r){if(!this.$UFIController9||r!==l.INITIAL_SERVER)return;this.$UFIController9.startRecording(q);};p.prototype.$UFIController16=function(q,r){if(!this.$UFIController9||r!==l.INITIAL_SERVER)return;var s=this.$UFIController2,t=s.lazyFetch,u=s.disableCSSHiding,v=s.ftentidentifier,w=this.$UFIController12,x=w.feedback,y=w.featuredCommentLists,z=x&&!!this.$UFIController17(x);this.$UFIController9.log(q,String(r),{num_comments:this.comments&&this.comments.length||0,num_likes:x&&x.likecount||0,features:{is_featured:!!y[v],is_streaming:z,is_lazy_fetch:t,is_disable_css_hiding:u}});};p.factory=function(q,r,s){r.rootid=q.id;return new p(q,Object.freeze(r),s);};p.prototype.getRootNode=function(){return this.root;};p.prototype.getContextArgs=function(){return this.$UFIController2;};p.prototype.getFtEntIdentifier=function(){return this.$UFIController2.ftentidentifier;};p.prototype.getInstanceID=function(){return this.$UFIController2.instanceid;};p.prototype.getFluentContentToken=function(){return this.$UFIController2.fluentContentToken;};p.prototype.shouldAutoplayLiveVODComments=function(){return !!this.$UFIController2.autoplayLiveVODComments;};function p(q,r,s){var t;this.$UFIController9=null;this.$UFIController9=c('UFIConfig').perfLogger?new (c('UFIConfig').perfLogger)(r.ftentidentifier):null;this.$UFIController15('construct',l.INITIAL_SERVER);this.$UFIController18();this.$UFIController19();this.root=q;this.$UFIController2=r;c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').init(r,s));c('UFIRootRegistry').registerController(r.rootid,r.instanceid,r.ftentidentifier,function(){this.$UFIController20();this.$UFIController21();}.bind(this));this.$UFIController5=function(){if(!this.$UFIController7){var ja=c('UFIRootRegistry').isSnowliftNode(r.rootid),ka=ja?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu",la=c('DOMQuery').scry(this.root,ka);this.$UFIController7=la&&la[0]||null;}return this.$UFIController7;}.bind(this);this.$UFIController6=function(){if(!this.$UFIController11){var ja=c('DOMQuery').scry(this.root,"^.snowliftPayloadRoot ._29qf ._37uu");this.$UFIController11=ja&&ja[0]||null;}return this.$UFIController11;}.bind(this);if(c('UFIConfig').feedfocusWrapperModule&&r.location==m.NEWSSTAND){var u=c('UFIConfig').feedfocusWrapperModule,v=c('DOMQuery').scry(this.root,"^._5pat"),w=v[0];if(w)(function(){var ja=c('createArrayFromMixed')(w.children),ka=document.createDocumentFragment();ja.forEach(function(la){ka.appendChild(la);});c('ReactDOM').render(c('React').createElement(u,{instanceID:r.instanceid},c('React').createElement(c('DOMContainer.react'),null,ka)),w);})();}var x=r.feedbackMode===j.NEVER||r.feedbackMode===j.NONE;this.$UFIController12={payloadSource:null,feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},requestedInitialComments:false,isHidden:x,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,featuredCommentLists:{},featuredCommentIDs:[],toplevelPagerClickCounts:{},replyPagerClickCounts:{},loadingVODComments:false,shouldTranslateAllVisibleComments:false,commentsLoadingTranslations:{}};this.authorProfiles={};this.commentcounts={};this.comments=[];this.repliesMap={};var y=s.feedbacktargets[0];if(!this.canRenderHeader())c('Bootloader').loadModules(["UFIActionLinkController"],function(ja){return new ja(q,r,y);},'UFIController');var z=Date.now();if(y.ll)this.liveLikeSubscription=c('UFILikeSubscription').subscribe(y.targetfbid,function(ja){c('UFISubscriptionUpdates').handleLiveLike(r.ftentidentifier,ja,Date.now()-z);});if(y.lc)this.liveCommentSubscription=c('UFICommentSubscription').subscribe(y.targetfbid,function(ja){c('UFISubscriptionUpdates').handleLiveComment(r.ftentidentifier,ja.comment_create_subscribe,Date.now()-z);});if(y.lcl)this.liveCommentLikeSubscription=c('UFICommentLikeSubscription').subscribe(y.targetfbid,function(ja){c('UFISubscriptionUpdates').handleLiveCommentLike(r.ftentidentifier,ja,Date.now()-z);});if(y.lti&&c('UFIConfig').typingIndicator.subscribe)this.liveTypingSubscription=c('UFITypingSubscriptionControllerFactory').forUFIController(y,r);var aa=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid),ba=null;if(s.featuredcommentlists&&s.featuredcommentlists.comments&&s.featuredcommentlists.comments[r.ftentidentifier]){ba=s.featuredcommentlists.comments[r.ftentidentifier];this.$UFIController12.featuredCommentLists[r.ftentidentifier]=new (c('UFIFeaturedToplevelCommentList'))(r.ftentidentifier,ba.values,s.comments);}else{var ca=s.commentlists&&s.commentlists.comments,da=ca[r.ftentidentifier];ba=da[aa];}if(s.featuredcommentids)this.$UFIController12.featuredCommentIDs=s.featuredcommentids;this.ranges={};this.replyRanges={};this.commentcounts={};this.ranges[aa]=new (c('UFIRange'))(ba.range.offset,ba.range.length);this.$UFIController12.oldRange={offset:ba.range.offset,length:this.comments&&this.comments.length||0};var ea=void 0,fa=void 0,ga=void 0;if(s.commentlists.replies)for(ea=0;ea<ba.values.length;ea++){fa=ba.values[ea];ga=s.commentlists.replies[fa];if(ga){this.commentcounts[fa]=this.getReplyCommentList(fa).getCommentCount();this.replaceReplyRange(fa,new (c('UFIRange'))(ga.range.offset,ga.range.length));}}if(s.featuredcommentlists)if(s.featuredcommentlists.replies)for(ea=0;ea<ba.values.length;ea++){fa=ba.values[ea];ga=s.featuredcommentlists.replies[fa];if(ga){this.$UFIController12.featuredCommentLists[fa]=new (c('UFIFeaturedReplyCommentList'))(r.ftentidentifier,fa,ga.values,s.comments);this.commentcounts[fa]=this.getReplyCommentList(fa).getCommentCount();this.replaceReplyRange(fa,c('UFIRange').combine(new (c('UFIRange'))(ga.range.offset,ga.range.length),this.replyRanges[fa]));}}this.$UFIController8=null;this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(ja,ka){var la=ka.updates;if(r.ftentidentifier in la){this.$UFIController12.payloadSource=ka.payloadSource;this.fetchAndUpdate(this.$UFIController12.payloadSource);}}.bind(this)),c('UFICentralUpdates').subscribe('instance-updated',function(ja,ka){var la=ka.updates;if(r.instanceid in la){var ma=la[r.instanceid];if(ma.editcommentid||ma.commentsToggling||ma.inCommercialBreak){this.$UFIController12.payloadSource=ka.payloadSource;if(this.canRenderHeader()&&this.$UFIController12.feedback)this.renderHeader(this.$UFIController12.feedback);this.render();}}}.bind(this)),c('UFICentralUpdates').subscribe('actor-changed',function(ja,ka){this.$UFIController22();}.bind(this))];this.$UFIController23(r);this.onUnloadSubscription=c('Run').onUnload(function(){return this.$UFIController24();}.bind(this));this.getToplevelCommentList();c('UFICentralUpdates').handleUpdate(l.INITIAL_SERVER,s);if(r.islivestreaming&&r.enableViewPinnedComments&&r.fluentContentToken)c('LivePinnedCommentEventCreateSubscription').subscribe(r.fluentContentToken,function(ja){c('UFISubscriptionUpdates').handleLivePinnedComment(r,ja,Date.now()-z);this.render();}.bind(this));var ha=this.$UFIController17(y);if(ha){var ia=null;if(s.comments&&s.comments.length>0)ia=s.comments[s.comments.length-1].fbid;c('UFILiveStreamingComments').start(r.ftentidentifier,y.commentcount,ia,ha);this.scrollToTopOfCommentsInViewer();c('Run').onLeave(function(){return c('UFILiveStreamingComments').stop(this.$UFIController2.ftentidentifier);}.bind(this));}if(!r.lazyFetch&&!this.canRenderHeader())this.$UFIController25(y);if(this.$UFIController2.fluentContentToken)c('UFIVideoPlayerRegistry').registerUFIController(this,function(ja){if(r.enableVODStreamingComments&&!this.$UFIController12.featuredCommentLists[r.ftentidentifier])c('UFIVODStreamingComments').start(this,ja);if(r.islivestreaming||r.isLiveVOD)c('UFICommercialBreakController').start(r.instanceid,ja);if(r.islivestreaming)this.$UFIController14.addSubscriptions(ja.addListener('stateChange',function(){if(ja.isState('playing'))this.render();}.bind(this)));}.bind(this),function(){if(r.enableVODStreamingComments)c('UFIVODStreamingComments').stop(this.$UFIController2.ftentidentifier,r.instanceid);if(r.islivestreaming||r.isLiveVOD)c('UFICommercialBreakController').stop(r.instanceid);}.bind(this));this.$UFIController16('construct',l.INITIAL_SERVER);}p.prototype.$UFIController23=function(q){this.$UFIController1=new (c('SubscriptionsHandler'))();this.$UFIController1.addSubscriptions(c('onEnclosingPageletDestroy')(this.root,function(){this.$UFIController21();this.$UFIController20();}.bind(this)),c('Arbiter').subscribe(c('UFIUIEvents').PageCleared,function(){this.$UFIController21();this.$UFIController20();}.bind(this)),c('Arbiter').subscribe('ConversationNub/destroy',function(r,s){if(s.root&&c('DOMQuery').contains(s.root,this.root)){this.$UFIController21();this.$UFIController20();}}.bind(this)));if(q.viewas)this.$UFIController1.addSubscriptions(c('Arbiter').subscribe('pre_page_transition',function(r,s){if(q.viewas!==new (c('URI'))(s.to).getQueryData('viewas')){c('UFIToplevelPagedCommentList').resetCommentListsForFeedbackTargetID(q.ftentidentifier);c('UFIToplevelStreamedCommentList').resetAllCommentLists(q.ftentidentifier);}}));};p.prototype.scrollToTopOfCommentsInViewer=function(){if(!this.$UFIController2.enableScrollToLiveComments)return;c('Arbiter').inform(c('UFIUIEvents').AutoplayLiveComments,{form:this.$UFIController26()});};p.prototype.$UFIController21=function(){var q=this.$UFIController5();if(q)c('ReactDOM').unmountComponentAtNode(q);if(c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid)){var r=this.$UFIController6();if(r)c('ReactDOM').unmountComponentAtNode(r);}c('ReactDOM').unmountComponentAtNode(this.root);};p.prototype.unitTestOnlySetFeedbackIntoState=function(q){this.$UFIController12.feedback=q;};p.prototype.$UFIController18=function(){if(!this.$UFIController14){this.$UFIController3=new (c('UFIDispatcher'))();this.$UFIController13={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIController3),UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIController3)};this.$UFIController14=new (c('SubscriptionsHandler'))();this.$UFIController14.addSubscriptions(this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.CANCEL,function(){return this.$UFIController22();}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_LIKE,function(q){c('UFIUserActions').changeCommentLike(q.comment.id,q.like,{source:this.$UFIController2.source,target:q.target});}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.CHANGE_REACTION,function(q){c('UFIUserActions').changeCommentReaction(q.comment.id,q.reactionType,{source:this.$UFIController2.source,target:q.target});}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE,function(q){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(r){return (r.show(function(){c('UFIUserActions').removeComment(q.comment.id,{source:this.$UFIController2.source,oneclick:false,target:q.target});q.onConfirm();}.bind(this)));}.bind(this),'UFIController');}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EDIT,function(q){c('UFIInstanceState').updateState(this.$UFIController2.instanceid,'isediting',true);c('UFIInstanceState').updateState(this.$UFIController2.instanceid,'editcommentid',q.comment.id);}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TRANSLATE,function(q){if(!this.$UFIController12.commentsLoadingTranslations[q.comment.id]){this.$UFIController12.commentsLoadingTranslations[q.comment.id]=true;c('UFIUserActions').translateComments(q.comment.ftentidentifier,[q.comment.id],q.trigger,{source:this.$UFIController2.source,target:q.target});this.render();}}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,function(q){c('UFIUserActions').setHideAsSpam(q.comment.id,q.is_spam,{source:this.$UFIController2.source,target:q.target});}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,function(q){return c('UFIUserActions').banUser(q.comment,q.ownerid,q.is_banned,{source:this.$UFIController2.source,target:q.target});}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EMBED,function(q){var r=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',q.comment.id).getURI();new (c('AsyncRequest'))(r).send();}),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.SHOW_CONSTITUENT_TITLE,function(q){c('UFIUserActions').showConstituentTitle(q.comment);}),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.HIDE_CONSTITUENT_TITLE,function(q){c('UFIUserActions').hideConstituentTitle(q.comment);}),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.TYPING_CHANGE,function(q){c('UFIUserActions').typingChange(this.$UFIController2.ftentidentifier,q.state);}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_NEW,function(q){c('UFINewCommentNotifier').onNewComment(this.$UFIController26(),this.$UFIController2,q.comment,q.target,q.replyCommentID,q.timestamp);}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_EDIT,function(q){var r=q.comment,s=q.commentData,t=q.target;if(!s.visibleValue&&!s.attachedPhoto&&!s.attachedVideo&&!s.attachedSticker){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(u){return (u.show(function(){return (c('UFIUserActions').removeComment(r.id,{source:this.$UFIController2.source,oneclick:false,target:t}));}.bind(this)));}.bind(this),'UFIController');}else c('UFIUserActions').editComment(r.id,s.visibleValue,s.encodedValue,{source:this.$UFIController2.source,target:t,attachedPhoto:s.attachedPhoto,attachedVideo:s.attachedVideo,attachedSticker:s.attachedSticker});c('UFIInstanceState').updateStateField(this.$UFIController2.instanceid,'locallycomposed',r.id,true);this.$UFIController22();}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE_PREVIEW,function(q){return c('UFIUserActions').removePreview(q.comment,{source:this.$UFIController2.source,target:q.target});}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.RETRY_SUBMIT,function(q){return c('UFIRetryActions').retrySubmit(q.comment,this.$UFIController2.source);}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').STORY.PAGE_IN_COMMENTS,function(q){this.$UFIController12.payloadSource=l.USER_ACTION;this.$UFIController27(q.commentID,q.direction,q.nextRange);this.fetchAndUpdateWithLogs(l.USER_ACTION);}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').STORY.TOGGLE_REPLIES,function(q){this.$UFIController12.payloadSource=l.USER_ACTION;var r=q.commentID,s=this.$UFIController12.repliesExpandedMap[r];if(s){delete this.$UFIController12.isActiveLoading[r];this.$UFIController12.repliesExpandedMap[r]=false;this.render();}else{this.$UFIController12.focusedReplyComposer={replyID:'replycomposer-'+r,initiatorComment:null};this.$UFIController27(r,k.BOTTOM,this.$UFIController28(r));this.fetchAndUpdateWithLogs(l.USER_ACTION);}}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').STORY.SHOW_REPLIES,function(q){this.$UFIController12.payloadSource=l.USER_ACTION;this.$UFIController12.focusedReplyComposer={replyID:'replycomposer-'+q.commentID,initiatorComment:q.initiatorComment};this.$UFIController27(q.commentID,k.BOTTOM,this.$UFIController28(q.commentID));this.fetchAndUpdateWithLogs(l.USER_ACTION);}.bind(this)),this.$UFIController13.UFICallbackStore.on(c('UFIActionTypes').STORY.COMMENTS_ARRIVED,function(q){this.$UFIController12.payloadSource=q.source;this.$UFIController12.showLoadingUFI=false;this.$UFIController12.isActiveLoading={};this.$UFIController12.commentIDToFocusOnMount=q.source===l.USER_ACTION?this.$UFIController29(q.newOffset,q.newLength):null;this.$UFIController12.oldRange={offset:q.newOffset,length:q.newLength};this.$UFIController30();if(this.$UFIController12.shouldTranslateAllVisibleComments&&!this.$UFIController2.islivestreaming)this.$UFIController31();this.render();if(q.source==l.ENDPOINT_COMMENT_FETCH){c('Arbiter').inform(c('UFIUIEvents').CommentPager);if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetchReceived(this.$UFIController2.ftentidentifier,Date.now());}}.bind(this)));}};p.prototype.$UFIController19=function(){this.$UFIController10=[c('UFISharedDispatcher').register(function(q){switch(q.type){case c('UFIActionTypes').INSTANCE.REMOVE:if(q.instanceID!==this.$UFIController2.instanceid)return;c('UFIRootRegistry').cleanupInstance(q.instanceID);break;case c('UFIActionTypes').INSTANCE.TOGGLE_COMMENTS:if(q.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController12.payloadSource=l.COLLAPSE_ACTION;this.$UFIController12.isHidden=!this.$UFIController12.isHidden;this.render();break;case c('UFIActionTypes').INSTANCE.CHANGE_ORDER_MODE:if(q.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController12.payloadSource=l.USER_ACTION;this.$UFIController12.showLoadingUFI=true;this.render();this.fetchAndUpdate(l.USER_ACTION);break;case c('UFIActionTypes').INSTANCE.REQUESTED_VOD_COMMENTS:if(q.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController12.loadingVODComments=true;this.render();break;case c('UFIActionTypes').INSTANCE.RECEIVED_VOD_COMMENTS:if(q.instanceID!==this.$UFIController2.instanceid)return;this.$UFIController12.loadingVODComments=false;this.render();break;case c('UFIActionTypes').STORY.LIVE_PIN_COMMENT:if(q.ftentidentifier!==this.$UFIController2.ftentidentifier)return;var r=c('UFIComments').getComment(q.commentID).author;this.authorProfiles[r]=c('ShortProfiles').getNow(r);this.render();break;case c('UFIActionTypes').STORY.LIVE_UNPIN_COMMENT:if(q.ftentidentifier!==this.$UFIController2.ftentidentifier)return;this.render();break;case c('UFIActionTypes').INSTANCE.TRANSLATE_ALL:if(q.instanceID!==this.$UFIController2.instanceid)return;if(this.$UFIController2.islivestreaming)break;this.$UFIController12.shouldTranslateAllVisibleComments=true;this.$UFIController31();this.render();break;}}.bind(this))];};p.prototype.getStores=function(){return this.$UFIController13;};p.prototype.$UFIController28=function(q){var r=this.commentcounts[q],s=Math.min(r,this.$UFIController2.pagesize);return new (c('UFIRange'))(r-s,s);};p.prototype.$UFIController27=function(q,r,s){var t=this.$UFIController12,u=t.isActiveLoading,v=t.repliesExpandedMap,w=t.toplevelPagerClickCounts,x=t.replyPagerClickCounts,y=this.$UFIController2.ftentidentifier,z=q!==y;u[q]=r;if(z){v[q]=true;}else this.$UFIController12.hasPagedToplevel=true;if(q==y){var aa=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid),ba=w[aa]||0;w[aa]=ba+1;this.getRange().updateRequestedRange(s.offset,s.length);}else{var ca=x[q]||0;x[q]=ca+1;this.replyRanges[q].updateRequestedRange(s.offset,s.length);}};p.prototype.$UFIController17=function(q){if(!this.$UFIController2.islivestreaming)return null;if(q.lvc)return 'Subscription';return 'Polling';};p.prototype.$UFIController26=function(){if(!this.$UFIController4)this.$UFIController4=c('Parent').byTag(this.root,'form');return this.$UFIController4;};p.prototype.$UFIController22=function(){c('UFIInstanceState').updateState(this.$UFIController2.instanceid,'isediting',false);c('UFIInstanceState').updateState(this.$UFIController2.instanceid,'editcommentid',null);};p.prototype.$UFIController32=function(){this.$UFIController12.payloadSource=l.USER_ACTION;this.$UFIController12.showLoadingUFI=true;this.$UFIController12.requestedInitialComments=true;var q=this.getToplevelCommentList().getCommentCount(),r=Math.min(q,this.$UFIController2.numLazyComments||0);c('forEachObject')(this.ranges,function(s){return s.updateRequestedRange(q-r,r);});this.fetchAndUpdate(l.USER_ACTION);c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIController2.ftentidentifier,function(s){if(this.canRenderHeader()){this.renderHeader(s);}else this.$UFIController25(s);}.bind(this));};p.prototype.$UFIController25=function(q){if(this.shouldShowCommentOrderingModeSelector(q))c('DOM').scry(this.root,"^form ._3csb").slice(0,1).forEach(function(r){c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIController'),contextArgs:this.$UFIController2,feedback:q}),r);}.bind(this));};p.prototype.$UFIController30=function(){if(Object.keys(this.$UFIController12.commentsLoadingTranslations).length==0)return;this.comments.forEach(function(q){if(this.$UFIController12.commentsLoadingTranslations[q.id]&&!!q.translationdata)delete this.$UFIController12.commentsLoadingTranslations[q.id];}.bind(this));Object.keys(this.repliesMap).forEach(function(q){var r=this.repliesMap[q];r.forEach(function(s){if(this.$UFIController12.commentsLoadingTranslations[s.id]&&!!s.translationdata)delete this.$UFIController12.commentsLoadingTranslations[s.id];}.bind(this));}.bind(this));};p.prototype.$UFIController31=function(){var q=this.comments.filter(function(t){return this.$UFIController33(t);}.bind(this)).map(function(t){return t.id;}),r=babelHelpers['extends']({},this.$UFIController12.defaultRepliesExpandedMap,this.$UFIController12.repliesExpandedMap),s=[];Object.keys(this.repliesMap).filter(function(t){return r[t];}).forEach(function(t){s=s.concat(this.repliesMap[t]);}.bind(this));q=q.concat(s.filter(function(t){return this.$UFIController33(t);}.bind(this)).map(function(t){return t.id;}));if(q.length>0){q.forEach(function(t){return this.$UFIController12.commentsLoadingTranslations[t]=true;}.bind(this));c('UFIUserActions').translateComments(this.$UFIController2.ftentidentifier,q,c('TranslationTrigger').TRANSLATE_ALL,{source:this.$UFIController2.source});}};p.prototype.$UFIController33=function(q){return q.istranslatable&&!q.translationdata&&!this.$UFIController12.commentsLoadingTranslations[q.id];};p.prototype.canRenderHeader=function(){var q=this.$UFIController5();return !!q;};p.prototype.renderHeader=function(q){if(!this.canRenderHeader())return;var r=c('UFIInstanceState').getKeyForInstance(this.$UFIController2.instanceid,'inCommercialBreak');if(r){c('ReactDOM').render(c('React').createElement(c('CommercialBreakUFIOverlay.react'),{ownerName:this.$UFIController2.ownerName}),this.$UFIController5());return;}var s=this.$UFIController2.hasReactions&&(this.$UFIController2.feedbackMode==='none'||this.$UFIController2.feedbackMode==='toggle')&&q.displayreactions&&this.shouldShowCommentOrderingModeSelector(q)&&(!this.$UFIController2.lazyFetch||this.$UFIController12.requestedInitialComments);c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController13},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:this.$UFIController2,feedbacktarget:q,showCommentOrderingModeSelector:s})),this.$UFIController5());var t=c('UFIRootRegistry').isSnowliftNode(this.$UFIController2.rootid);if(t&&this.$UFIController6())c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController13},c('React').createElement(c('UFIActionLinks.react'),{contextArgs:this.$UFIController2,feedbacktarget:q,showCommentOrderingModeSelector:s,hideActorSelector:true})),this.$UFIController6());};p.prototype.render=function(){var q=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerController(this.$UFIController2.instanceid),r=this.$UFIController12.payloadSource;if(this.$UFIController2.islivestreaming&&q&&(r===l.STREAMING||r===l.LIVE_SEND)&&(q.getOption('WatchAndScroll','isActive')||!q.isState('playing')))return;this.$UFIController15('render',r);if(this.$UFIController12.showLoadingUFI||c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)&&this.$UFIController12.loadingVODComments){c('ReactDOM').render(this.$UFIController34(),this.root);this.$UFIController16('render',r);return;}var s=c('UFIInstanceState').getKeyForInstance(this.$UFIController2.instanceid,'commentsToggling');!this.$UFIController12.feedback?i(0):void 0;var t=this.$UFIController12.feedback,u=t.reactionsentences,v=t.likesentences,w=t.replysocialsentencemaxreplies,x=this.comments.length||!c('isEmpty')((u||v).current);if((x&&o(r)||s)&&this.$UFIController2.feedbackMode!==j.NEVER){this.$UFIController12.isHidden=false;c('CommentPrelude').expand(this.root,false,'ufi_controller');}if(this.$UFIController2.disableCSSHiding&&this.$UFIController12.isHidden){this.$UFIController16('render',r);c('ReactDOM').unmountComponentAtNode(this.root);return;}if(this.$UFIController2.lazyFetch&&!this.$UFIController12.requestedInitialComments){c('ReactDOM').render(this.$UFIController34(),this.root);this.$UFIController16('render',r);this.$UFIController32();return;}var y=this.getRange();if(this.$UFIController8===null)this.$UFIController8=y.getOffset()+y.getLength()-1;var z=w||-1,aa={};aa[this.$UFIController2.ftentidentifier]=new (c('UFIRange'))(y.offset,y.length).updateRequestedRange(y.requestedOffset,y.requestedLength);for(var ba in this.replyRanges)aa[ba]=new (c('UFIRange'))(this.replyRanges[ba].offset,this.replyRanges[ba].length).updateRequestedRange(this.replyRanges[ba].requestedOffset,this.replyRanges[ba].requestedLength);var ca=babelHelpers['extends']({},this.$UFIController12.defaultRepliesExpandedMap,this.$UFIController12.repliesExpandedMap),da=!!this.$UFIController12.featuredCommentLists[this.$UFIController2.ftentidentifier],ea=c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)?true:this.getToplevelCommentList().getClientHasAll()&&y.offset===0&&y.length===this.getToplevelCommentList().getCommentCount(),fa=this.$UFIController35(r),ga=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid),ha=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController13},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController12.feedback,contextArgs:this.$UFIController2,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController12.deletedCounts,availableComments:this.comments,source:this.$UFIController2.source,payloadSource:r,ranges:aa,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController8,replySocialSentenceMaxReplies:z,orderingMode:ga,hideOrderingModeSelector:da,commentPermalinks:this.$UFIController12.commentPermalinks,canAddCommentMap:this.$UFIController12.canAddCommentMap,canReplyMap:this.$UFIController12.canReplyMap,focusReply:fa,commentsToggling:s,isActiveLoading:this.$UFIController12.isActiveLoading,repliesExpandedMap:ca,hasPagedToplevel:this.$UFIController12.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController12.commentIDToFocusOnMount,hideToplevelPager:ea,featuredCommentIDs:this.$UFIController12.featuredCommentIDs,loadingTranslationsMap:this.$UFIController12.commentsLoadingTranslations}));c('ReactDOM').render(ha,this.root);c('LiveTimer').updateTimeStamps();if(this.$UFIController26())c('Arbiter').inform(c('UFIUIEvents').Changed,{form:this.$UFIController26()});if(r!=l.INITIAL_SERVER)c('Arbiter').inform('reflow');this.$UFIController12.focusedReplyComposer=null;this.$UFIController16('render',r);};p.prototype.$UFIController35=function(q){if(q===l.INITIAL_SERVER&&this.$UFIController12.feedback&&this.$UFIController12.feedback.permalinkcommentid){return {replyID:'replycomposer-'+this.$UFIController12.feedback.permalinkcommentid};}else if(this.$UFIController12.focusedReplyComposer)return this.$UFIController12.focusedReplyComposer;return null;};p.prototype.$UFIController29=function(q,r){var s=this.$UFIController12.oldRange;if(s&&(s.offset!=q||s.length!=r)){var t=q<s.offset?s.length:0;if(t<r)return this.comments[t].id;}return this.$UFIController12.commentIDToFocusOnMount;};p.prototype.$UFIController36=function(q,r,s){if(q&&r.id===q.permalinkcommentid)return true;if(s>1)return true;if(s>0&&r.interestingReplyOffset===undefined)return true;var t=q&&r.author===q.viewerid;if(t&&s==1)return true;return false;};p.prototype.getNewRange=function(q,r,s){if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid)){return new (c('UFIRange'))(0,r.feedcarded?4:50);}else return n(this.getRange(),this.commentcounts[r.ftentidentifier],s,q);};p.prototype.getNewReplyRange=function(q,r,s){var t=r.id;if(this.replyRanges[t]){return n(this.getReplyRange(t),this.commentcounts[t],s,q);}else if(r.interestingReplyOffset!==undefined){return new (c('UFIRange'))(r.interestingReplyOffset,1);}else{var u=this.$UFIController12.feedback&&this.$UFIController12.feedback.isranked,v=u?0:Math.min(s,2);return new (c('UFIRange'))(0,v);}};p.prototype.fetchAndUpdateWithLogs=function(q){!(q===this.$UFIController12.payloadSource)?i(0):void 0;this.$UFIController37(q,true);};p.prototype.fetchAndUpdate=function(q){!(q===this.$UFIController12.payloadSource)?i(0):void 0;this.$UFIController37(q,false);};p.prototype.$UFIController38=function(q){var r=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid);return {numPagerClicks:q?this.$UFIController12.toplevelPagerClickCounts[r]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext,feedbackSource:this.$UFIController2.source,streamingOrderReversed:this.$UFIController2.streamingCommentOrderReversed};};p.prototype.$UFIController39=function(q,r){return {numPagerClicks:r?this.$UFIController12.replyPagerClickCounts[q]||0:null,viewAs:this.$UFIController2.viewas,feedContext:this.$UFIController2.feedcontext};};p.prototype.$UFIController40=function(q){var r=this.$UFIController12.feedback,s=this.getToplevelCommentList(),t=this.getNewRange(q,this.$UFIController2,s.getCommentCount()),u=c('UFIFetcher').fetchCommentsOrThrow(s,t,this.$UFIController38(false));this.$UFIController41(t,u);var v=c('UFICommentFilters').getAuthors(u);u.forEach(function(x){var y=x.id,z=this.getReplyCommentList(y),aa=this.getNewReplyRange(q,x,z.getCommentCount()),ba=c('UFIFetcher').fetchCommentsOrThrow(z,aa,this.$UFIController39(y,false));v.push.apply(v,c('UFICommentFilters').getAuthors(ba));this.$UFIController42(aa,x,ba);}.bind(this));if(r)v.push.apply(v,c('UFIFeedbackFilters').getRequestedIDs(r));var w=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(w)v.push(w);this.authorProfiles=c('ShortProfiles').getMultiNow(v);};p.prototype.$UFIController37=function(q,r){var s=c('UFIFeedbackTargets').getFeedbackTargetIfExists(this.$UFIController2.ftentidentifier);if(!s){var t=new Error(c('ex')('Feedback target %s not present while rendering UFI with source %s',this.$UFIController2.ftentidentifier,q));t.type='warn';c('ErrorUtils').reportError(t,true);return;}this.$UFIController12.feedback=s;if(o(q))this.render();if(this.canRenderHeader())this.renderHeader(s);if(!this.$UFIController12.isHidden)if(q===l.INITIAL_SERVER){this.$UFIController40(q);this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,q));}else this.fetchAllComments(q,r).done(function(){return (this.$UFIController3.dispatch(c('UFIStoryAction').commentsArrived(this.$UFIController2,this.getRange().getOffset(),this.comments.length,q)));}.bind(this));};p.prototype.fetchAllComments=function(q,r){return c('Promise').resolve().then(function(){return this.fetchCommentsForFeedbackTarget(q,r).then(function(s){var t=c('UFICommentFilters').getAuthors(s);if(!this.$UFIController12.feedback||!this.$UFIController12.feedback.isthreaded||!s.length)return t;return this.fetchAllReplyIDsForComments(s,q,r).then(function(u){return t.concat(u);});}.bind(this)).then(function(s){if(!this.$UFIController12.feedback)return [];return (c('UFIFeedbackFilters').getRequestedIDs(this.$UFIController12.feedback).concat(s));}.bind(this));}.bind(this)).then(function(s){var t=c('UFILivePinnedCommentStore').getPinnedCommentAuthorID(this.$UFIController2.ftentidentifier);if(t)s.push(t);return c('UFIFetcher').fetchShortProfiles(s);}.bind(this)).then(function(s){this.authorProfiles=s;}.bind(this));};p.prototype.fetchCommentsForFeedbackTarget=function(q,r){var s=this.getToplevelCommentList().getCommentCount(),t=this.getNewRange(q,this.$UFIController2,s);return c('UFIFetcher').fetchComments(this.getToplevelCommentList(),t,this.$UFIController38(r)).then(function(u){this.$UFIController41(t,u);return u;}.bind(this));};p.prototype.$UFIController41=function(q,r){var s=this.getToplevelCommentList(),t=this.$UFIController2.ftentidentifier,u=this.$UFIController12,v=u.deletedCounts,w=u.canAddCommentMap,x=u.canReplyMap,y=u.commentPermalinks;this.replaceRange(q);this.comments=r;this.commentcounts[t]=s.getCommentCount();v[t]=s.getDeletedCount();w[t]=!this.$UFIController12.featuredCommentLists[t];r.forEach(function(z){var aa=z.id,ba=z.cancomment;x[aa]=ba;y[aa]=s.getPermalinkForComment(aa);});};p.prototype.fetchRepliesForComment=function(q,r,s){var t=q.id,u=this.getReplyCommentList(t).getCommentCount(),v=this.getNewReplyRange(r,q,u);return c('UFIFetcher').fetchComments(this.getReplyCommentList(t),v,this.$UFIController39(t,s)).then(function(w){this.$UFIController42(v,q,w);return w;}.bind(this));};p.prototype.$UFIController42=function(q,r,s){var t=r.id,u=this.getReplyCommentList(t),v=this.$UFIController12,w=v.deletedCounts,x=v.canAddCommentMap,y=v.featuredCommentLists,z=v.defaultRepliesExpandedMap,aa=v.feedback,ba=v.canReplyMap,ca=v.commentPermalinks;this.replaceReplyRange(t,q);this.repliesMap[t]=s;this.commentcounts[t]=u.getCommentCount();w[t]=u.getDeletedCount();x[t]=!y[t];z[t]=this.$UFIController36(aa,r,s.length);s.forEach(function(da){var ea=da.id,fa=da.cancomment;ba[ea]=fa;ca[ea]=u.getPermalinkForComment(ea);});};p.prototype.fetchAllReplyIDsForComments=function(q,r,s){var t=new (c('Promise').all)(q.map(function(u){return this.fetchRepliesForComment(u,r,s).then(function(v){return c('UFICommentFilters').getAuthors(v);});}.bind(this)));return t.then(c('flattenArray'));};p.prototype.getToplevelCommentList=function(){var q=this.$UFIController2;if(this.$UFIController12.featuredCommentLists[q.ftentidentifier])return this.$UFIController12.featuredCommentLists[q.ftentidentifier];if(c('UFIOrderingModeStore').isLiveStreaming(this.$UFIController2.instanceid))return c('UFIToplevelStreamedCommentList').getCommentList(q.ftentidentifier,q.islivestreaming?c('UFIToplevelStreamedCommentList').GLOBAL_ID:q.instanceid);var r=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid);return c('UFIToplevelPagedCommentList').getCommentList(q.ftentidentifier,r);};p.prototype.getReplyCommentList=function(q){if(q in this.$UFIController12.featuredCommentLists)return this.$UFIController12.featuredCommentLists[q];var r=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid);return c('UFIReplyCommentList').getCommentList(this.$UFIController2.ftentidentifier,q,r);};p.prototype.getRange=function(){var q=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid);if(!(q in this.ranges)){var r=this.getToplevelCommentList().getCommentCount(),s=Math.min(r,this.$UFIController2.defaultNumCommentsToExpand);this.ranges[q]=new (c('UFIRange'))(r-s,s);}return this.ranges[q];};p.prototype.replaceRange=function(q){var r=c('UFIOrderingModeStore').getState().get(this.$UFIController2.instanceid);this.ranges[r]=q;};p.prototype.getReplyRange=function(q){if(!(q in this.replyRanges))this.replyRanges[q]=new (c('UFIRange'))();return this.replyRanges[q];};p.prototype.replaceReplyRange=function(q,r){this.replyRanges[q]=r;};p.prototype.$UFIController20=function(){this.$UFIController43();this.$UFIController44();this.$UFIController45();this.$UFIController46();this.$UFIController47();this.$UFIController48();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').remove(this.$UFIController2));};p.prototype.$UFIController24=function(){this.$UFIController45();};p.prototype.$UFIController48=function(){var q=this.$UFIController2;c('UFICommercialBreakController').stop(q.instanceid);};p.prototype.$UFIController47=function(){var q=this.$UFIController2;c('UFIVODStreamingComments').stop(q.ftentidentifier,q.instanceid);};p.prototype.$UFIController43=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(q){return q&&c('UFICentralUpdates').unsubscribe(q);});};p.prototype.$UFIController44=function(){this.$UFIController1&&this.$UFIController1.release();};p.prototype.$UFIController45=function(){var q=[this.liveLikeSubscription,this.liveCommentSubscription,this.liveCommentLikeSubscription,this.liveTypingSubscription];q.forEach(function(r){return r&&r.unsubscribe();});};p.prototype.$UFIController46=function(){if(this.$UFIController14){this.$UFIController14.release();this.$UFIController14=null;}this.$UFIController10.forEach(function(q){return c('UFISharedDispatcher').unregister(q);});};p.prototype.$UFIController34=function(){var q=this.$UFIController2;return (c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController3,stores:this.$UFIController13},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController12.feedback,id:this.$UFIController2.ftentidentifier,contextArgs:q,commentCounts:this.commentcounts,loadingComments:true})));};p.prototype.shouldShowCommentOrderingModeSelector=function(q){var r=this.getToplevelCommentList().getCommentCount()||q.commentcount||0;return q.orderingmodes&&r>=c('UFIConstants').minCommentsForOrderingModeSelector&&!this.$UFIController12.featuredCommentLists[this.$UFIController2.ftentidentifier];};f.exports=p;}),null);
__d('UFIMentionsInputProxy.react',['cx','Promise','JSResource','JSResourceReference','React','emptyFunction','setImmediate'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'UFIMentionsInputProxy',getInitialState:function j(){return {component:null,viewComponent:null};},componentDidMount:function j(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function j(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function j(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},focus:function j(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function j(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function j(k){this._fillCmdBuffer({fn:'insertMention',args:[k]});},insertEmoticon:function j(k){this._fillCmdBuffer({fn:'insertEmoticon',args:[k]});},_bootload:function j(){c('Promise').all([c('JSResource')('UFIMentionsInput.react').__setRef('UFIMentionsInputProxy.react').load(),new (c('Promise'))(function(k){if(this.props.viewComponent instanceof c('JSResourceReference')){this.props.viewComponent.load().done(k);}else k(this.props.viewComponent);}.bind(this))]).done(function(k){var l=k[0],m=k[1];if(this.isMounted())this.setState({component:l,viewComponent:m});}.bind(this));},_shouldDrainBuffer:function j(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function j(k){if(this.refs.mentionsinputchild){return this._execCmd(k);}else this._cmdBuffer=this._cmdBuffer.concat([k]);},_drainFnBuffer:function j(){if(this._shouldDrainBuffer()){var k=this._cmdBuffer[0];this._execCmd(k);this._cmdBuffer=this._cmdBuffer.slice(1);c('setImmediate')(this._drainFnBuffer);}},_execCmd:function j(k){var l=this.refs.mentionsinputchild;return l[k.fn].apply(l,k.args);},_renderProxyInput:function j(){var k="_1osa mentionsHidden";return (c('React').createElement('input',{className:k,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus}));},_renderDummy:function j(){var k="UFIAddCommentInput _1osb _1osc";return (c('React').createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:c('emptyFunction'),onMouseOver:this._bootload},c('React').createElement('div',{className:k},this._renderProxyInput(),this.props.placeholder)));},render:function j(){var k=this.state.component;if(!k)return this._renderDummy();return (c('React').createElement(k,babelHelpers['extends']({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props,{viewComponent:this.state.viewComponent}),this.props.children));}});f.exports=i;}),null);
__d('LitestandClassicRHC',['cx','Arbiter','BigPipe','CSS','DOMQuery','NavigationMessage','Run','SubscriptionsHandler','requireWeak'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i="_268y";function j(l,m){var n=new (c('SubscriptionsHandler'))(),o=n.release.bind(n),p=c('DOMQuery').scry(l,'.pagelet'),q=p.length;n.addSubscriptions(m.subscribe([].map.call(p,function(r){return r.id+'_displayed';}),function(){c('CSS').removeClass(l,i);if(--q===0){c('Arbiter').inform('LitestandClassicRHC/loaded');o();}}),c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,o),m.subscribeOnce(c('BigPipe').Events.displayed,function(){c('Arbiter').inform('LitestandClassicRHC/loaded');c('CSS').removeClass(l,i);o();}));c('Run').onLeave(o);}var k={init:function l(m){c('requireWeak')('BigPipe',function(n){var o=n.getCurrentInstance();if(o&&o.arbiter){j(m,o.arbiter);}else c('Arbiter').subscribeOnce('BigPipe/init',function(event,p){j(m,p.arbiter);},c('Arbiter').SUBSCRIBE_NEW);});}};f.exports=k;}),null);
__d('MultiBootstrapDataSource',['DataSource'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._bootstrapEndpoints=k.bootstrapEndpoints;}j.prototype.bootstrapWithoutToken=function(){'use strict';for(var k=0;k<this._bootstrapEndpoints.length;k++)this.fetch(this._bootstrapEndpoints[k].endpoint,this._bootstrapEndpoints[k].data||{},{bootstrap:true});};f.exports=j;}),null);
__d('ReactComposerAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({REGISTER_ATTACHMENT:null,INITIALIZE_ATTACHMENT:null,SELECT_ATTACHMENT:null,SET_INITIALIZED:null,SET_BOOTLOADED:null,SET_BOOTSTRAPPED:null,UPLOAD_ATTACHMENT:null},'ReactComposerAttachmentActionType');}),null);
__d('ReactComposerMediaUploadActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({PHOTO_UPLOAD_ENQUEUED:null,PHOTO_UPLOAD_RESIZE_STARTED:null,PHOTO_UPLOAD_RESIZE_PROGRESS:null,PHOTO_UPLOAD_RESIZE_DONE:null,PHOTO_UPLOAD_RESIZE_FAILED:null,PHOTO_UPLOAD_RESIZER_UNAVAILABLE:null,PHOTO_UPLOAD_UPLOADING:null,PHOTO_UPLOAD_IS_SPHERICAL:null,PHOTO_UPLOAD_DONE:null,PHOTO_UPLOAD_FAILED:null,PHOTO_UPLOAD_RETRY:null,PHOTO_UPLOAD_EXTRA_DONE:null,PHOTOS_SELECT:null,PHOTO_ADD_UPLOAD:null,VIDEO_UPLOAD_ENQUEUED:null,VIDEO_UPLOAD_UPLOADING:null,VIDEO_UPLOAD_DONE:null,VIDEO_UPLOAD_FAILED:null,VIDEO_UPLOAD_RETRY:null,VIDEO_SET_THUMBNAIL:null,VIDEO_SET_UPLOADER:null,MEDIA_UPLOAD_MOVED:null,MEDIA_UPLOAD_REMOVE:null,MEDIA_UPLOAD_PROGRESS:null,MEDIA_UPLOAD_INPUT_CLICKED:null,MEDIA_UPLOAD_INPUT_DONE:null,PREFILL_MEDIAS:null,REORDER_MEDIAS:null},'ReactComposerMediaUploadActionType');}),null);
__d('ReactComposerScrapedAttachmentActionType',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({ATTACHMENT_SCRAPE_ENABLED:null,ATTACHMENT_PERMISSIVE_MATCH_SETTED:null,ATTACHMENT_SCRAPE_INTENDED:null,ATTACHMENT_SCRAPED:null,ATTACHMENT_CAROUSEL_UPLOAD:null,ATTACHMENT_SHARE_SELECTED:null},'ReactComposerScrapedAttachmentActionType');}),null);
__d('ReactComposerActionTypes',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({COMPOSER_ENTRY:null,COMPOSER_CANCEL:null,INIT_CONFIG:null,POST_ERROR:null,POST_STARTED:null,POST_INTENDED:null,POST_SUCCEEDED:null,POST_FINALLY:null,PUBLISH_STARTED:null,PUBLISH_SUCCEEDED:null,COMPOSER_RESET:null,EXPAND_SPROUTS:null,FEATURE_INTENT:null,FEATURE_DONE:null},'ReactComposerActionTypes');}),null);
__d('ReactComposerLoggingQueue',['invariant','Bootloader','requireWeak'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=null;c('requireWeak')('ReactComposerLoggingStore',function(l){i=l;});var j=[],k={add:function l(m){if(m&&m.suppressWaterfallLogging)return;!(m&&m.composerID)?h(0):void 0;if(i&&i.isActivated(m.composerID))return;j.push(m);},initBootload:function l(m,n,o,p){c('Bootloader').loadModules(["ComposerXSessionIDs","ComposerXMarauderLogger","ReactComposerPerfLogger","ReactComposerLoggingStore"],function(q,r,s,t){q.resetSessionID(m);r.registerComposer(n,o,p);s.registerComposer(n,p.targetType,p.ref,o);t.activate(m);},'ReactComposerLoggingQueue');},pop:function l(){return j.shift();},getLength:function l(){return j.length;}};f.exports=k;}),null);
__d('ReactComposerDispatcher',['ReactComposerLoggingQueue','Dispatcher_DEPRECATED'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.dispatch=function(k){'use strict';i.dispatch.call(this,k);c('ReactComposerLoggingQueue').add(k);};function j(){'use strict';h.apply(this,arguments);}f.exports=new j();}),null);
__d('ReactComposerStoreBase',['ReactComposerActionTypes','ReactComposerDispatcher','ReactComposerEvents','EventEmitter','Map'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('EventEmitter'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.$ReactComposerStoreBase1=k;this.$ReactComposerStoreBase2=new (c('Map'))();this.$ReactComposerStoreBase3=c('ReactComposerDispatcher').register(function(m){switch(m.type){case c('ReactComposerActionTypes').COMPOSER_RESET:this.__cleanup(m);break;}l(m);}.bind(this));}j.prototype.getComposerData=function(k){'use strict';var l=this.$ReactComposerStoreBase2.get(k);if(!l){l=this.$ReactComposerStoreBase1();this.$ReactComposerStoreBase2.set(k,l);}return l;};j.prototype.clearComposerData=function(k){'use strict';this.$ReactComposerStoreBase2.set(k,this.$ReactComposerStoreBase1());};j.prototype.addChangeListener=function(k){'use strict';return this.addListener(c('ReactComposerEvents').CHANGE,k);};j.prototype.emitChange=function(k){'use strict';this.emit(c('ReactComposerEvents').CHANGE,{composerID:k});};j.prototype.getDispatchToken=function(){'use strict';return this.$ReactComposerStoreBase3;};j.prototype.validateAction=function(k,l){'use strict';l=[].concat(l);var m=l.map(function(n){if(k[n]===undefined)throw new Error('Action missing field: '+n);return k[n];});if(l.length===1)return m[0];return m;};j.prototype.__cleanup=function(k){'use strict';this.clearComposerData(k.composerID);this.emitChange(k.composerID);};f.exports=j;}),null);
__d('ReactComposerActionStore',['errorCode','ReactComposerActionTypes','ReactComposerEvents','ReactComposerStoreBase','Arbiter','AsyncResponse','Set'],(function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('ReactComposerStoreBase'));j=i&&i.prototype;function k(l,m){'use strict';l=l?l:function(){return null;};var n;j.constructor.call(this,l,function(o){if(!(n&&n.__shouldIgnoreAction(o)))switch(o.type){case c('ReactComposerActionTypes').POST_STARTED:n&&n.$ReactComposerActionStore2(o);break;case c('ReactComposerActionTypes').POST_INTENDED:n&&n.$ReactComposerActionStore3(o);break;case c('ReactComposerActionTypes').POST_SUCCEEDED:n&&n.$ReactComposerActionStore4(o);break;case c('ReactComposerActionTypes').POST_ERROR:n&&n.$ReactComposerActionStore5(o);break;case c('ReactComposerActionTypes').POST_FINALLY:n&&n.$ReactComposerActionStore6(o);break;default:}m&&m(o);});n=this;this.$ReactComposerActionStore1=new (c('Set'))();}k.prototype.registerComposerID=function(l){'use strict';this.$ReactComposerActionStore1.add(l);};k.prototype.$ReactComposerActionStore2=function(l){'use strict';var m=this.validateAction(l,'composerID');this.__onPostStarted&&this.__onPostStarted(l);c('Arbiter').inform(c('ReactComposerEvents').POST_STARTED+m);};k.prototype.$ReactComposerActionStore3=function(l){'use strict';this.validateAction(l,['composerID','actorID','config','targetID']);if(!this.__canPost||this.__canPost(l))this.$ReactComposerActionStore2(l);};k.prototype.$ReactComposerActionStore4=function(l){'use strict';var m=this.validateAction(l,'composerID');this.__onPostSucceeded&&this.__onPostSucceeded(l);c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+m);};k.prototype.$ReactComposerActionStore5=function(l){'use strict';if(this.__onPostError)return this.__onPostError(l);if(l.response){var m=l.response.getError&&l.response.getError()==1455004;if(m)return;c('AsyncResponse').defaultErrorHandler(l.response);}};k.prototype.$ReactComposerActionStore6=function(l){'use strict';this.__onPostFinally&&this.__onPostFinally(l);};k.prototype.__shouldIgnoreAction=function(l){'use strict';var m=this.validateAction(l,'composerID');return !this.$ReactComposerActionStore1.has(m);};f.exports=k;}),null);
__d('ReactComposerFocusActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirror')({SUBSCRIBE:null,UNSUBSCRIBE:null,FOCUS_ACQUIRED:null,FOCUS_LOST:null});}),null);
__d('ReactComposerInit',['invariant','Arbiter','ReactComposerEvents','ReactComposerIDGenerator','Map','React','ReactDOM'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={instances:new (c('Map'))(),changeProps:function j(k,l){var m=i._getCurrentInstance(k);m.props=l;i.resetComposer(k,true);},normalizeComposerID:function j(k){if(!k.contextConfig.composerID)k.contextConfig.composerID=c('ReactComposerIDGenerator').getID();return k.contextConfig.composerID;},init:function j(k,l,m,n){var o=i.normalizeComposerID(l),p={ComposerModule:k,props:l,container:m,asyncPreloader:n};this._render(p);this._preloadAsyncData(p);i.instances.set(o,p);c('Arbiter').inform(c('ReactComposerEvents').INSTANCE_MOUNTED+o);},_render:function j(k){var l=k.ComposerModule,m=k.props,n=k.container;c('ReactDOM').render(c('React').createElement(l,m),n);},_preloadAsyncData:function j(k){var l=k.props,m=k.asyncPreloader;if(m==null||l.config.audienceXHP)return;m.onLoaded(function(n){var o=n.audienceXHP;l.config=babelHelpers['extends']({},l.config,{audienceXHP:l.config.audienceXHP||o});this._render(k);}.bind(this));},resetComposer:function j(k,l){var m=i._unmountReact(k,l);m.props.contextConfig.composerID=c('ReactComposerIDGenerator').getID();m.props.prefillConfig={};i.init(m.ComposerModule,m.props,m.container,m.asyncPreloader);c('Arbiter').inform(c('ReactComposerEvents').COMPOSER_RESET+k,{newComposerID:m.props.contextConfig.composerID});},isInstanceMounted:function j(k){return !!i.instances.get(k);},unmountInstance:function j(k,l){if(i.isInstanceMounted(k)){i._unmountReact(k);if(l)i.deleteInstance(k);}},deleteInstance:function j(k){i.instances['delete'](k);},_unmountReact:function j(k){var l=i._getCurrentInstance(k);c('ReactDOM').unmountComponentAtNode(l.container);return l;},_getCurrentInstance:function j(k){var l=i.instances.get(k);!l?h(0):void 0;return l;}};f.exports=i;}),null);
__d('ReactComposerSproutsDisplayState',['keyMirrorRecursive'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('keyMirrorRecursive')({INLINE:null,EXPANDED:null},'ReactComposerSproutsDisplayState');}),null);
__d('ReactComposerStore',['ReactComposerActionStore','ReactComposerActionTypes','ReactComposerSproutsDisplayState','ReactComposerAttachmentActionType','ReactComposerScrapedAttachmentActionType','ReactComposerInit','Bootloader'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('ReactComposerActionStore'));i=h&&h.prototype;function j(){'use strict';var k;i.constructor.call(this,function(){return {isActive:false,serverErrorResponse:null,posting:false,postSucceeded:false,publishing:false,ref:null,targetType:null,sproutsDisplayState:c('ReactComposerSproutsDisplayState').INLINE};},function(l){switch(l.type){case c('ReactComposerActionTypes').INIT_CONFIG:k&&k.$ReactComposerStore1(l);break;case c('ReactComposerActionTypes').PUBLISH_STARTED:k&&k.$ReactComposerStore2(l);break;case c('ReactComposerAttachmentActionType').SELECT_ATTACHMENT:k&&k.$ReactComposerStore3(l);break;case c('ReactComposerActionTypes').EXPAND_SPROUTS:k&&k.$ReactComposerStore4(l);break;case c('ReactComposerAttachmentActionType').UPLOAD_ATTACHMENT:case c('ReactComposerScrapedAttachmentActionType').ATTACHMENT_SCRAPED:k&&k.$ReactComposerStore5(l);break;}});k=this;}j.prototype.getServerErrorResponse=function(k){'use strict';return this.getComposerData(k).serverErrorResponse;};j.prototype.getRef=function(k){'use strict';return this.getComposerData(k).ref;};j.prototype.getTargetType=function(k){'use strict';return this.getComposerData(k).targetType;};j.prototype.isPosting=function(k){'use strict';return this.getComposerData(k).posting;};j.prototype.hasPostSucceeded=function(k){'use strict';return this.getComposerData(k).postSucceeded;};j.prototype.isActive=function(k){'use strict';return this.getComposerData(k).isActive;};j.prototype.isPublishing=function(k){'use strict';return this.getComposerData(k).publishing;};j.prototype.getSproutsDisplayState=function(k){'use strict';return this.getComposerData(k).sproutsDisplayState;};j.prototype.isUploading=function(k){'use strict';return this.getComposerData(k).uploading;};j.prototype.__shouldIgnoreAction=function(k){'use strict';return false;};j.prototype.__onPostStarted=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.posting=true;this.emitChange(l);};j.prototype.__onPostSucceeded=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.serverErrorResponse=null;m.posting=false;m.postSucceeded=true;m.publishing=false;this.emitChange(l);};j.prototype.__onPostError=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.serverErrorResponse=k.response;m.posting=false;m.postSucceeded=false;m.publishing=false;this.emitChange(l);};j.prototype.__onPostFinally=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.posting=false;m.publishing=false;this.emitChange(l);};j.prototype.$ReactComposerStore1=function(k){'use strict';var l=this.validateAction(k,['composerID','loggingConfig','activateOnInit']),m=l[0],n=l[1],o=l[2],p=this.getComposerData(m);p.ref=n.ref;p.composerVersion=n.composerVersion;p.targetType=n.targetType;if(o){this.$ReactComposerStore6(m);this.emitChange(m);}};j.prototype.$ReactComposerStore2=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.publishing=true;this.emitChange(l);};j.prototype.$ReactComposerStore5=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(k.composerID);m.uploading=k.uploading;this.emitChange(l);};j.prototype.$ReactComposerStore3=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.sproutsDisplayState=c('ReactComposerSproutsDisplayState').EXPANDED;this.$ReactComposerStore6(l);this.emitChange(l);};j.prototype.$ReactComposerStore4=function(k){'use strict';var l=this.validateAction(k,'composerID'),m=this.getComposerData(l);m.sproutsDisplayState=c('ReactComposerSproutsDisplayState').EXPANDED;this.emitChange(l);};j.prototype.$ReactComposerStore6=function(k){'use strict';var l=this.getComposerData(k);if(!l.isActive){l.isActive=true;c('Bootloader').loadModules(["curry","Run","ReactComposerHandleUnsavedChanges","URI"],function(m,n,o,p){return (n.onBeforeUnload(m(o.handler,k,p.getNextURI())));},'ReactComposerStore');}};j.prototype.__cleanup=function(k){'use strict';setTimeout(c('ReactComposerInit').resetComposer.bind(null,k.composerID),0);};f.exports=new j();}),null);
__d('ReactComposerFocusActions',['ReactComposerFocusActionTypes','ReactComposerDispatcher','ReactComposerStore'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();c('ReactComposerStore');var h={subscribe:function i(j,k,l){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').SUBSCRIBE,onFocusAcquiredCallback:k,onFocusLostCallback:l});},unsubscribe:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').UNSUBSCRIBE});},notifyFocusAcquired:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').FOCUS_ACQUIRED});},notifyFocusLost:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerFocusActionTypes').FOCUS_LOST});}};f.exports=h;}),null);
__d('ReactComposerLoggingActions',['ReactComposerActionTypes','ReactComposerDispatcher','ReactComposerFeatureType','ReactComposerLoggingName','ReactComposerMediaUploadActionType'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={composerEntry:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').COMPOSER_ENTRY,uiElementName:k});},mediaUploadInputClicked:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_CLICKED,sourceLoggingName:k});},mediaUploadInputDone:function i(j,k){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerMediaUploadActionType').MEDIA_UPLOAD_INPUT_DONE,sourceLoggingName:k});},mediaFileDropped:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_INTENT,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_DROPPED});},mediaFileDropFinished:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_DONE,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_DROPPED});},mediaFilePasted:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_INTENT,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_PASTED});},mediaFilePasteFinished:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').FEATURE_DONE,featureType:c('ReactComposerFeatureType').MEDIA,uiElementName:c('ReactComposerLoggingName').MEDIA_FILE_PASTED});},composerCancel:function i(j){c('ReactComposerDispatcher').dispatch({composerID:j,type:c('ReactComposerActionTypes').COMPOSER_CANCEL});}};f.exports=h;}),null);
__d('ReactComposerFocusHandleScrollAway',['Event','getActiveElement','throttle'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=-400,i=300,j={handler:function k(l,m){var n=c('Event').listen(window,'scroll',c('throttle')(function(){var o=l.getBoundingClientRect().bottom;if(o<h){m();c('getActiveElement')().blur();n.remove();}},i));}};f.exports=j;}),null);
__d('ReactComposerFocusInit',['invariant','DOM','DOMContainer.react','React','ReactDOM'],(function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={handler:function j(k,l,m,n,o){var p=c('DOM').create('div'),q=k.parentNode;c('ReactDOM').render(c('React').createElement(o,{composerID:l,actorID:m,gks:n,enableFocusBehavior:true},c('React').createElement(c('DOMContainer.react'),{display:'block'},k)),p);!q?h(0):void 0;q.appendChild(p);},preload:function j(){}};f.exports=i;}),null);
__d('ReactComposerFocusWrapperCore.react',['cssVar','cx','fbt','ix','ReactComposerEvents','Arbiter','CurrentUser','Event','Image.react','Keys','Link.react','ReactComponentWithPureRenderMixin','React','ReactDOM','ReactComposerFocusActions','Run','SubscriptionsHandler','URI'],(function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=parseInt("10px",10),n=c('React').createClass({displayName:'ReactComposerFocusWrapperCore',_composerID:'',_fixedHeight:0,_subscriptions:c('SubscriptionsHandler'),_firstFocus:true,_onLeaveHandle:null,mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{composerID:l.string.isRequired,onDismiss:l.func.isRequired,onFocus:l.func.isRequired,focused:l.bool.isRequired,topPostButton:l.bool,onFirstFocus:l.func,fixHeight:l.bool},getDefaultProps:function o(){return {focused:false,fixHeight:false};},componentWillMount:function o(){this._composerID=this.props.composerID;},componentWillReceiveProps:function o(p){if(this.props.fixHeight&&!this.props.focused&&p.focused){var q=c('ReactDOM').findDOMNode(this.refs.container);this._fixedHeight=q.offsetHeight+m;}},componentDidMount:function o(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscribeComposerEvents();this._onLeaveHandle=c('Run').onLeave(this._onDismiss);},componentDidUpdate:function o(p){if(!p.focused&&this.props.focused)try{var q=document.createEvent('HTMLEvents');if(q.initEvent){q.initEvent('resize',true,false);window.dispatchEvent(new (c('Event'))('resize'));}}catch(q){}},componentWillUnmount:function o(){this._subscriptions&&this._subscriptions.release();this._onDismiss();if(this._onLeaveHandle)this._onLeaveHandle.remove();},render:function o(){var p=this.props.fixHeight&&this.props.focused?{height:this._fixedHeight}:null,q=this.props.focused?this._renderDismissButton():null,r=this.props.focused?this._renderBugNub():null;return (c('React').createElement('div',{className:"_3u13"+(this.props.focused?' '+"_3u14":''),style:p,onKeyDown:this._onKeyDown},c('React').createElement('div',{className:"_3u15",onClick:this._onDismiss}),c('React').createElement('div',{className:"_3u16",ref:'container',onFocus:this._onFocus},this.props.children,q),r));},getComposerID:function o(){return this._composerID;},getComposer:function o(){return this.refs.container;},_renderDismissButton:function o(){return (c('React').createElement('div',{className:"_3u17"+(this.props.topPostButton?' '+"_nse":''),onClick:this._onDismiss},c('React').createElement(c('Image.react'),{alt:j._("Close"),src:k('/images/composer/exit.png')})));},_renderBugNub:function o(){if(!c('CurrentUser').isEmployee())return null;var p=new (c('URI'))('/ajax/bugs/report');return (c('React').createElement('div',{className:"_t95"},c('React').createElement(c('Link.react'),{href:'#',ajaxify:p,className:"_t97",rel:'dialog'})));},_subscribeComposerEvents:function o(){var p=c('Arbiter').subscribe(c('ReactComposerEvents').OPTIMISTIC_POSTING_STARTED+this._composerID,function(){return this.props.onDismiss(true);}.bind(this)),q=c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+this._composerID,function(){return this.props.onDismiss(true);}.bind(this)),r=c('Arbiter').subscribe('ReactFeedComposerXBootloader/focuscomposer/'+this._composerID,function(){return this._onFocus();}.bind(this)),s=c('Arbiter').subscribe(c('ReactComposerEvents').COMPOSER_RESET+this._composerID,function(t,u){if(u&&u.newComposerID){this._composerID=u.newComposerID;this._subscribeComposerEvents();p.remove&&p.remove();q.remove&&q.remove();r.remove&&r.remove();s.remove&&s.remove();}}.bind(this));this._subscriptions.addSubscriptions(p,q,r,s);},_onFocus:function o(){if(this.props.focused)return;if(this._firstFocus){this.props.onFirstFocus&&this.props.onFirstFocus();this._firstFocus=false;}this.props.onFocus();c('ReactComposerFocusActions').notifyFocusAcquired(this.props.composerID);},_onKeyDown:function o(p){if(p.keyCode===c('Keys').ESC&&!p.isDefaultPrevented())this._onDismiss();},_onDismiss:function o(){this.props.onDismiss();c('ReactComposerFocusActions').notifyFocusLost(this.props.composerID);}});f.exports=n;}),null);
__d('ReactComposerFocusInline.react',['ReactComposerFocusHandleScrollAway','ReactComposerFocusWrapperCore.react','React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={focused:false},this.$ReactComposerFocusInline2=function(){var q=c('ReactDOM').findDOMNode(this.refs.focus.getComposer());c('ReactComposerFocusHandleScrollAway').handler(q,this.$ReactComposerFocusInline1);this.setState({focused:true});}.bind(this),this.$ReactComposerFocusInline1=function(){this.setState({focused:false});}.bind(this),m;}k.prototype.componentWillUnmount=function(){'use strict';this.$ReactComposerFocusInline1();};k.prototype.render=function(){'use strict';return c('React').createElement(c('ReactComposerFocusWrapperCore.react'),{composerID:this.props.composerID,focused:this.state.focused&&this.props.enableFocusBehavior,onFocus:this.$ReactComposerFocusInline2,onDismiss:this.$ReactComposerFocusInline1,ref:'focus'},this.props.children);};k.propTypes={composerID:j.string.isRequired};f.exports=k;}),null);
__d('VideoFeedFastPreloadController',['Run','DOMQuery'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0,i={preload:function j(k){if(h<2){k=c('DOMQuery').scry(k,'video')[0];if(k instanceof b.HTMLVideoElement){if(!h)c('Run').onBeforeUnload(function(){return i.reset();});k.preload='auto';h+=1;}}},reset:function j(){h=0;}};i.reset();f.exports=i;}),null);
__d('PriorityJobQueue',['Promise','Map'],(function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=1;function i(j){this.$PriorityJobQueue2=new (c('Map'))();this.$PriorityJobQueue3=new (c('Map'))();this.$PriorityJobQueue4=false;this.$PriorityJobQueue5=new (c('Map'))();this.$PriorityJobQueue8=function(){var k=this.$PriorityJobQueue3.size,l=Date.now();if(k<this.$PriorityJobQueue1){var m=this.$PriorityJobQueue1-k,n=Array.from(this.$PriorityJobQueue2.values());n.sort(function(q,r){return r.job.getPriority(l-r.timeQueued)-q.job.getPriority(l-q.timeQueued);});var o=this.$PriorityJobQueue2.size;for(var p=0;p<Math.min(o,m);p++)this.$PriorityJobQueue9(n[p]);}this.$PriorityJobQueue4=false;}.bind(this);this.$PriorityJobQueue1=j||h;}i.prototype.$PriorityJobQueue6=function(j){this.$PriorityJobQueue3['delete'](j);this.$PriorityJobQueue7();};i.prototype.$PriorityJobQueue7=function(){if(!this.$PriorityJobQueue4){this.$PriorityJobQueue4=true;c('Promise').resolve().then(this.$PriorityJobQueue8).done();}};i.prototype.$PriorityJobQueue9=function(j){var k=j.job,l=k.getJobID();this.$PriorityJobQueue2['delete'](l);this.$PriorityJobQueue3.set(l,j);k.getPromise().then(function(){return this.$PriorityJobQueue6(l);}.bind(this)).done();var m=this.$PriorityJobQueue5.get(l);m&&m();this.$PriorityJobQueue5['delete'](l);k.start();};i.prototype.enqueue=function(j,k){var l={job:j,timeQueued:Date.now()},m=j.getJobID();this.$PriorityJobQueue2.set(m,l);if(k)this.$PriorityJobQueue5.set(m,k);this.$PriorityJobQueue7();return this;};i.get=function(){if(!i.$PriorityJobQueue10)i.$PriorityJobQueue10=new i(h);return i.$PriorityJobQueue10;};f.exports=i;}),null);
__d('VideoPlayerShakaBandwidthEstimator',['CacheStorage','requireWeak','Run','VideoPlayerShakaExperiments'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=void 0;c('requireWeak')('Shaka',function(l){h=l.util.EWMACacheBandwidthEstimator;});var i=null,j=false;function k(){'use strict';var l=new (c('CacheStorage'))('localstorage','_video_'),m=l.get('bandwidthEstimate');this.$VideoPlayerShakaBandwidthEstimator1={isMockObject:true,getBandwidth:function n(){return m;},getFastMovingBandwidth:function n(){return m;}};if(h){this.$VideoPlayerShakaBandwidthEstimator1=new h(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?m:undefined);this.$VideoPlayerShakaBandwidthEstimator1.isMockObject=false;}c('Run').onUnload(function(){l.set('bandwidthEstimate',this.$VideoPlayerShakaBandwidthEstimator1.getBandwidth());}.bind(this));}k.prototype.getEstimator=function(){'use strict';return this.$VideoPlayerShakaBandwidthEstimator1;};k.getInstance=function(){'use strict';if(i===null||i.getEstimator().isMockObject&&h)i=new k();return i;};k.getEstimator=function(){'use strict';return k.getInstance().getEstimator();};k.isAutoplayBandwidthRestrained=function(){'use strict';var l=k.getEstimator(),m=void 0;if(j){m=l.getFastMovingBandwidth();}else m=l.getBandwidth();if(m===null||m>c('VideoPlayerShakaExperiments').blockAutoplayBandwidthThreshold){j=false;}else j=true;return j;};f.exports=k;}),null);
__d('VideoDashPrefetchCache',['Promise','Deferred','Map','PriorityJobQueue','Run','URI','VideoPlayerShakaBandwidthEstimator','VideoPlayerShakaExperiments','XHRRequest','getCrossOriginTransport'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;function i(n,o){var p=new Error(n.errorMsg);p.name=n.errorType;p.type='preload';p.url=o;p.status=n.errorCode;return p;}function j(n){var o=new (c('URI'))(n.url),p=o.getDomain();return p.endsWith('fbcdn.net')&&!p.startsWith('interncache')&&!p.endsWith('ak.fbcdn.net');}function k(n,o,p){return {response:n.slice(o.start+0,o.end+1),responseTime:p};}function l(n,o,p){'use strict';this.$UrlRequestJob1=n;this.$UrlRequestJob2=o;this.$UrlRequestJob5=p;var q=new (c('XHRRequest'))(this.$UrlRequestJob2).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport'));this.$UrlRequestJob3=new (c('Promise'))(function(r,s){q.setErrorHandler(function(t){s(i(t,this.$UrlRequestJob2));}.bind(this));q.setResponseHandler(function(t){q.response=t;r(q);});q.setAbortHandler(function(){s(this.$UrlRequestJob3,new Error('Request promise aborted'));}.bind(this));}.bind(this));this.$UrlRequestJob4=q;}l.prototype.getUrl=function(){'use strict';return this.$UrlRequestJob2;};l.prototype.getPromise=function(){'use strict';return this.$UrlRequestJob3;};l.prototype.start=function(){'use strict';this.$UrlRequestJob4.send();};l.prototype.abort=function(){'use strict';};l.prototype.getPriority=function(n){'use strict';return 1/Math.min(this.$UrlRequestJob5,1)/Math.min(n,1);};l.prototype.getJobID=function(){'use strict';return this.$UrlRequestJob1;};function m(){'use strict';this.$VideoDashPrefetchCache1=new (c('Map'))();this.$VideoDashPrefetchCache2=new (c('Map'))();this.$VideoDashPrefetchCache3=[];this.$VideoDashPrefetchCache4=[];this.$VideoDashPrefetchCache5=0;this.$VideoDashPrefetchCache6=c('VideoPlayerShakaExperiments').maxPrefetchVideosNum;this.$VideoDashPrefetchCache7=c('VideoPlayerShakaExperiments').consolidateFragmentedPrefetchRequest;}m.prototype.$VideoDashPrefetchCache8=function(n){var o=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],p=arguments.length<=2||arguments[2]===undefined?0:arguments[2];'use strict';var q=n;if(Object.keys(o))q=new (c('URI'))(n).addQueryData(o);var r=new (c('XHRRequest'))(q).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport')),s=new (c('Promise'))(function(t,u){r.setErrorHandler(function(v){this.$VideoDashPrefetchCache9(r);u(i(v,q));}.bind(this));r.setResponseHandler(function(v){r.response=v;this.$VideoDashPrefetchCache9(r);t(r);}.bind(this));r.setAbortHandler(function(){u(s,new Error('Request promise aborted'));});}.bind(this));this.$VideoDashPrefetchCache10(n,s,p);this.$VideoDashPrefetchCache11(n,s);this.$VideoDashPrefetchCache3.push(r);r.send();return s;};m.prototype.$VideoDashPrefetchCache10=function(n,o){var p=arguments.length<=2||arguments[2]===undefined?0:arguments[2];'use strict';this.$VideoDashPrefetchCache12(n);if(p>0)this.$VideoDashPrefetchCache2.set(n,setTimeout(function(){return this.$VideoDashPrefetchCache12(n);}.bind(this),p));this.$VideoDashPrefetchCache11(n,o);};m.prototype.queueRequestFromMouseMovement=function(n,o){var p=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],q=arguments[3],r=arguments.length<=4||arguments[4]===undefined?0:arguments[4];'use strict';var s=o,t=c('PriorityJobQueue').get();if(this.has(o))return;if(Object.keys(p))s=new (c('URI'))(o).addQueryData(p);var u=new l(n,s,q);t.enqueue(u,function(){this.$VideoDashPrefetchCache10(o,u.getPromise(),r);}.bind(this));};m.prototype.$VideoDashPrefetchCache12=function(n){'use strict';this.getAndDelete(n);if(this.$VideoDashPrefetchCache2.has(n)){clearTimeout(this.$VideoDashPrefetchCache2.get(n));this.$VideoDashPrefetchCache2['delete'](n);}};m.prototype.$VideoDashPrefetchCache13=function(n){'use strict';var o=[];for(var p=0;p<n.length;p++){var q=m.createQueryStringURL(n[p]);if(!this.has(q))o.push(this.$VideoDashPrefetchCache8(q));}return o;};m.prototype.$VideoDashPrefetchCache14=function(n){'use strict';var o=m.getConsolidatedURL(n);if(o==null)return this.$VideoDashPrefetchCache13(n);var p=new (c('XHRRequest'))(o).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport')),q=Date.now(),r=[];for(var s=0;s<n.length;s++){var t=m.createQueryStringURL(n[s]),u=new (c('Deferred'))();if(!this.has(t))this.$VideoDashPrefetchCache11(t,u.getPromise());r.push(u);}p.setErrorHandler(function(v){this.$VideoDashPrefetchCache9(p);for(var w=0;w<r.length;w++)r[w].reject(i(v,o));}.bind(this));p.setResponseHandler(function(v){var w=Date.now()-q;for(var x=0;x<n.length;x++){var y=r[x],z=n[x];y.resolve(k(v,z,w));}this.$VideoDashPrefetchCache9(p);}.bind(this));p.setAbortHandler(function(){for(var v=0;v<n.length;v++){var w=r[v];w.reject(new Error('Request aborted.'));}});this.$VideoDashPrefetchCache3.push(p);p.send();return r.map(function(v){return v.getPromise();});};m.prototype.$VideoDashPrefetchCache15=function(n){'use strict';this.$VideoDashPrefetchCache5++;var o=this.$VideoDashPrefetchCache7?this.$VideoDashPrefetchCache14(n.video):this.$VideoDashPrefetchCache13(n.video),p=this.$VideoDashPrefetchCache7?this.$VideoDashPrefetchCache14(n.audio):this.$VideoDashPrefetchCache13(n.audio),q=this.$VideoDashPrefetchCache13(n.manifest),r=o.concat(p,q);c('Promise').all(r).then(function(){return this.$VideoDashPrefetchCache16();}.bind(this))['catch'](function(){return this.$VideoDashPrefetchCache16();}.bind(this));};m.prototype.$VideoDashPrefetchCache11=function(n,o){'use strict';if(this.$VideoDashPrefetchCache1.values().next().done)c('Run').onLeave(function(){for(var p=0;p<this.$VideoDashPrefetchCache3.length;p++)this.$VideoDashPrefetchCache3[p].abort();this.$VideoDashPrefetchCache3=[];this.$VideoDashPrefetchCache4=[];this.$VideoDashPrefetchCache5=0;this.$VideoDashPrefetchCache1.clear();}.bind(this));this.$VideoDashPrefetchCache1.set(n,o);};m.prototype.$VideoDashPrefetchCache9=function(n){'use strict';var o=this.$VideoDashPrefetchCache3.indexOf(n);if(o>-1)this.$VideoDashPrefetchCache3.splice(o,1);};m.prototype.$VideoDashPrefetchCache16=function(){'use strict';this.$VideoDashPrefetchCache5--;var n=this.$VideoDashPrefetchCache4.shift();if(n)this.$VideoDashPrefetchCache15(n);};m.prototype.has=function(n){'use strict';return this.$VideoDashPrefetchCache1.has(n);};m.prototype.getAndDelete=function(n){'use strict';var o=this.$VideoDashPrefetchCache1.get(n);this.$VideoDashPrefetchCache1['delete'](n);return o;};m.prototype.queueRequestBatch=function(n){'use strict';if(this.$VideoDashPrefetchCache6===0||this.$VideoDashPrefetchCache5<this.$VideoDashPrefetchCache6){this.$VideoDashPrefetchCache15(n);}else this.$VideoDashPrefetchCache4.push(n);};m.getInstance=function(){'use strict';if(h===null)h=new m();return h;};m.createQueryStringURL=function(n){'use strict';var o=n.url,p=n.start,q=n.end;if(p!==null&&p!==undefined&&q!==null&&q!==undefined)o=new (c('URI'))(o).addQueryData({bytestart:p,byteend:q});return o.toString();};m.getConsolidatedURL=function(n){'use strict';var o='',p=Infinity,q=0;for(var r=0;r<n.length;r++){var s=n[r],t=s.url,u=s.start,v=s.end;if(t==null||u==null||v==null)return null;if(o===''){o=t;}else if(o!==t)return null;p=Math.min(p,u);q=Math.max(q,v);}return m.createQueryStringURL({url:o,start:p,end:q});};m.loadVideo=function(n){'use strict';if(c('VideoPlayerShakaBandwidthEstimator').isAutoplayBandwidthRestrained())return;var o=m.getInstance();if(!n.manifest)n.manifest=[];o.queueRequestBatch({manifest:n.manifest.filter(j),video:n.video.filter(j),audio:n.audio.filter(j)});};m.getCacheValue=function(n){'use strict';return m.getInstance().getAndDelete(n);};f.exports=m;}),null);
__d("XReactComposerLoggingODSController",["XController"],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/logging\/ods\/",{attachment_type:{type:"String"},composer_type:{type:"Enum",required:true,enumType:1},event:{type:"String",required:true}});}),null);